{"config":{"lang":["ja"],"separator":"[\\s\\-\\.]","pipeline":["stemmer"]},"docs":[{"location":"","title":"\u30db\u30fc\u30e0","text":"<p>\u6c4e\u7528\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u7f6e\u304d\u5834\u3078\u3088\u3046\u3053\u305d\u3002</p> <p>\u3053\u306e\u30b5\u30a4\u30c8\u3067\u306f\u3001\u6280\u8853\u8a2d\u8a08\u3084\u5b9f\u88c5\u306b\u95a2\u3059\u308b\u5404\u7a2e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u63d0\u4f9b\u3057\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"#_2","title":"\ud83d\udcd6 \u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306b\u3064\u3044\u3066","text":"<p>\u3053\u306e\u30b5\u30a4\u30c8\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306f\u4ee5\u4e0b\u306e\u65b9\u91dd\u3067\u7ba1\u7406\u3055\u308c\u3066\u3044\u307e\u3059:</p> <ul> <li>\u6700\u65b0\u6027: 2025\u5e74\u306e\u6700\u65b0\u52d5\u5411\u3092\u53cd\u6620</li> <li>\u5b9f\u8df5\u6027: \u5b9f\u88c5\u306b\u76f4\u7d50\u3059\u308b\u5177\u4f53\u7684\u306a\u60c5\u5831\u3092\u63d0\u4f9b</li> <li>\u5305\u62ec\u6027: \u57fa\u790e\u304b\u3089\u5fdc\u7528\u307e\u3067\u4f53\u7cfb\u7684\u306b\u5b66\u7fd2\u53ef\u80fd</li> </ul>"},{"location":"#_3","title":"\ud83d\udd27 \u6280\u8853\u30b9\u30bf\u30c3\u30af","text":"<p>\u3053\u306e\u30b5\u30a4\u30c8\u306f\u4ee5\u4e0b\u306e\u6280\u8853\u3067\u69cb\u7bc9\u3055\u308c\u3066\u3044\u307e\u3059:</p> <ul> <li>MkDocs - \u9759\u7684\u30b5\u30a4\u30c8\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u30fc</li> <li>Material for MkDocs - \u30c6\u30fc\u30de</li> <li>GitHub Pages - \u30db\u30b9\u30c6\u30a3\u30f3\u30b0</li> </ul>"},{"location":"auth/architecture/","title":"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u691c\u8a0e","text":"\ud83d\udccc \u524d\u63d0\u6761\u4ef6"},{"location":"auth/architecture/#_2","title":"\u30b7\u30b9\u30c6\u30e0\u69cb\u6210","text":"<ul> <li>\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9: Next.js (BFF \u30d1\u30bf\u30fc\u30f3)</li> <li>\u30d0\u30c3\u30af\u30a8\u30f3\u30c9: Spring Boot (API \u30b5\u30fc\u30d0)</li> <li>\u30b5\u30fc\u30d3\u30b9\u6570: \u521d\u671f3\u30b5\u30fc\u30d3\u30b9\uff08\u4eca\u5f8c\u3082\u5897\u52a0\u898b\u8fbc\u307f\uff09</li> <li>SSO\u8981\u4ef6: 1\u56de\u306e\u30ed\u30b0\u30a4\u30f3\u3067\u5168\u30b5\u30fc\u30d3\u30b9\u306b\u30a2\u30af\u30bb\u30b9\u53ef\u80fd</li> </ul>"},{"location":"auth/architecture/#_3","title":"\u8a8d\u8a3c\u57fa\u76e4","text":"<ul> <li>\u793e\u5185IdP: HENNGE One\uff08\u793e\u5185\u65e2\u5b58\u8a8d\u8a3c\u57fa\u76e4\uff09</li> <li>\u30a2\u30d7\u30ea\u5074\u30c8\u30fc\u30af\u30f3\u767a\u884c: Amazon Cognito User Pool\uff08HENNGE One \u3092\u5916\u90e8 IdP \u3068\u3057\u3066\u30d5\u30a7\u30c7\u30ec\u30fc\u30b7\u30e7\u30f3\uff09</li> <li>\u9023\u643a\u65b9\u5f0f: OIDC \uff08\u307e\u305f\u306f SAML\uff09</li> </ul>"},{"location":"auth/architecture/#_4","title":"\u6a29\u9650\u7ba1\u7406\u306e\u8981\u4ef6","text":"<ul> <li>\u30b0\u30eb\u30fc\u30d7\u30d9\u30fc\u30b9\u306e\u57fa\u672c\u6a29\u9650\uff08Cognito User Pool \u306e <code>groups</code> \u5c5e\u6027\u3067\u7ba1\u7406\uff09</li> <li>\u8907\u96d1\u306a\u6a29\u9650\u8981\u4ef6\u306b\u3082\u5bfe\u5fdc\u53ef\u80fd\u306a\u8a2d\u8a08\uff08\u5c06\u6765\u62e1\u5f35\u6027\uff09</li> <li>\u6a29\u9650\u5909\u66f4\u306e\u5373\u6642\u53cd\u6620\u304c\u5fc5\u8981</li> <li>\u76e3\u67fb\u30ed\u30b0\u306e\u8a18\u9332\u304c\u5fc5\u9808</li> </ul>"},{"location":"auth/architecture/#_5","title":"\ud83e\udd14 \u691c\u8a0e\u30dd\u30a4\u30f3\u30c8\u3068\u9078\u629e\u80a2","text":"<p>\u524d\u63d0\u6761\u4ef6\u306e\u3082\u3068\u3067\u3001\u4ee5\u4e0b\u306e\u9805\u76ee\u306b\u3064\u3044\u3066\u6700\u9069\u306a\u9078\u629e\u80a2\u3092\u691c\u8a0e\u3057\u307e\u3059\u3002</p> \u691c\u8a0e1: \u8a8d\u53ef\u65b9\u5f0f\u3068\u6a29\u9650\u30c7\u30fc\u30bf\u306e\u6301\u3061\u65b9 <p>\u8ab2\u984c: \u8ab0\u304c\u3069\u306e\u30ea\u30bd\u30fc\u30b9\u306b\u30a2\u30af\u30bb\u30b9\u3067\u304d\u308b\u304b\u306e\u6a29\u9650\u30c1\u30a7\u30c3\u30af\u306e\u4ed5\u7d44\u307f\u3092\u3069\u306e\u3088\u3046\u306a\u69cb\u6210\u3067\u5b9f\u73fe\u3059\u308b\u304b</p> \u691c\u8a0e2: \u30d6\u30e9\u30a6\u30b6\u3068BFF\u9593\u306e\u8a8d\u8a3c\u60c5\u5831\u306e\u53d7\u3051\u6e21\u3057\u65b9\u5f0f <p>\u8ab2\u984c: \u30d6\u30e9\u30a6\u30b6\u3068Next.js BFF\u9593\u3067\u8a8d\u8a3c\u72b6\u614b\u3092\u3069\u3046\u7ba1\u7406\u3057\u3001\u30c8\u30fc\u30af\u30f3\u3092\u3069\u3046\u4fdd\u6301\u3059\u308b\u304b\uff1f</p> <p>BFF \u69cb\u6210\u306b\u304a\u3051\u308b\u524d\u63d0</p> <p>\u672c\u69cb\u6210\u3067\u306f BFF (Backend for Frontend) \u30d1\u30bf\u30fc\u30f3 \u3092\u63a1\u7528\u3057\u3066\u3044\u308b\u305f\u3081\u3001\u30d6\u30e9\u30a6\u30b6\u21d4BFF\u9593\u306e\u8a8d\u8a3c\u60c5\u5831\u306e\u53d7\u3051\u6e21\u3057\u306f Cookie \u3092\u4f7f\u7528\u3057\u307e\u3059\u3002</p> <p>Cookie \u3092\u63a1\u7528\u3059\u308b\u7406\u7531:</p> <ul> <li>\u2705 \u30d6\u30e9\u30a6\u30b6\u3068BFF\u306f\u540c\u4e00\u30aa\u30ea\u30b8\u30f3\uff08\u540c\u3058\u30c9\u30e1\u30a4\u30f3\uff09\u306a\u306e\u3067Cookie\u304c\u81ea\u7136</li> <li>\u2705 HttpOnly \u5c5e\u6027\u306b\u3088\u308aJavaScript\u304b\u3089\u30a2\u30af\u30bb\u30b9\u4e0d\u53ef\uff08XSS\u5bfe\u7b56\uff09</li> <li>\u2705 Next.js \u306e SSR/SSG \u6a5f\u80fd\u3068\u306e\u89aa\u548c\u6027\u304c\u9ad8\u3044</li> <li>\u2705 NextAuth.js \u306e\u6a5f\u80fd\u3092\u6d3b\u7528\u3067\u304d\u308b</li> </ul> <p>Authorization\u30d8\u30c3\u30c0\u30fc\u3092\u63a1\u7528\u3057\u306a\u3044\u7406\u7531:</p> <ul> <li>\u274c \u30c8\u30fc\u30af\u30f3\u3092localStorage\u7b49\u306b\u4fdd\u5b58\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u3001XSS\u8106\u5f31\u6027\u306e\u30ea\u30b9\u30af</li> <li>\u274c SSR\u6642\u306b\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u5f97\u3067\u304d\u306a\u3044</li> <li>\u2139\ufe0f \u6ce8: Authorization \u30d8\u30c3\u30c0\u30fc\u306f\u3001\u30e2\u30d0\u30a4\u30eb\u30a2\u30d7\u30ea\u21d4API \u3084 BFF\u21d4\u30d0\u30c3\u30af\u30a8\u30f3\u30c9API \u9593\u3067\u306f\u6709\u52b9</li> </ul> <p>Cookie\u3092\u524d\u63d0\u3068\u3057\u305f\u5834\u5408\u3001\u6b21\u306e\u8b70\u8ad6\u306f Cookie\u306b\u4f55\u3092\u683c\u7d0d\u3059\u308b\u304b \u3067\u3059\u3002</p> \u691c\u8a0e3: \u8a8d\u8a3c\u30fb\u8a8d\u53ef\u30c1\u30a7\u30c3\u30af\u306e\u5b9f\u65bd\u7b87\u6240 <p>\u8ab2\u984c: \u30d6\u30e9\u30a6\u30b6 \u2192 BFF \u2192 API \u306e\u901a\u4fe1\u7d4c\u8def\u306b\u304a\u3044\u3066\u3001\u3069\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3067\u8a8d\u8a3c\u30fb\u8a8d\u53ef\u30c1\u30a7\u30c3\u30af\u3092\u5b9f\u65bd\u3059\u308b\u304b\uff1f</p> \u691c\u8a0e4: SSO \u5b9f\u88c5\u65b9\u91dd <p>\u8ab2\u984c: \u8907\u6570\u30b5\u30fc\u30d3\u30b9\u9593\u3067\u306e\u30ed\u30b0\u30a4\u30f3\u4f53\u9a13\u3092\u3069\u3046\u5b9f\u73fe\u3059\u308b\u304b\uff1f</p>"},{"location":"auth/architecture/#_6","title":"\u9078\u629e\u80a2\u306e\u6982\u8981","text":"<p>\u2460 JWT\u57cb\u3081\u8fbc\u307f\u65b9\u5f0f</p> <ul> <li>JWT \u306b\u500b\u5225\u306e\u8a73\u7d30\u6a29\u9650\uff08\u30ea\u30bd\u30fc\u30b9\u3054\u3068\u306e\u30a2\u30af\u30bb\u30b9\u6a29\u306a\u3069\uff09\u3092\u57cb\u3081\u8fbc\u3080</li> <li>Cognito Pre Token Generation Lambda \u3067 DB \u304b\u3089\u6a29\u9650\u3092\u53d6\u5f97\u3057\u3066\u30c8\u30fc\u30af\u30f3\u306b\u8ffd\u52a0</li> <li>\u6a29\u9650\u5224\u5b9a\u306f\u30c8\u30fc\u30af\u30f3\u306e\u691c\u8a3c\u306e\u307f\u3067\u5b8c\u7d50</li> </ul> <p>\u2461 OIDC Groups\u65b9\u5f0f</p> <ul> <li>Cognito \u306e <code>groups</code> \u5c5e\u6027\u306e\u307f\u3067\u6a29\u9650\u7ba1\u7406</li> <li>\u30b7\u30f3\u30d7\u30eb\u306a\u30b0\u30eb\u30fc\u30d7\u30d9\u30fc\u30b9\u306e\u30a2\u30af\u30bb\u30b9\u5236\u5fa1\uff08\u4f8b: admin, user, guest\uff09</li> <li>\u8907\u96d1\u306a\u6a29\u9650\u8981\u4ef6\u306b\u306f\u5bfe\u5fdc\u56f0\u96e3</li> </ul> <p>\u2462 AVP\u5b9f\u884c\u6642\u30c1\u30a7\u30c3\u30af\u65b9\u5f0f</p> <ul> <li>JWT \u306b\u306f\u6700\u5c0f\u9650\u306e\u60c5\u5831\uff08<code>userId</code> + <code>groups</code>\uff09\u306e\u307f</li> <li>Amazon Verified Permissions (AVP) \u304c\u5b9f\u884c\u6642\u306b Cedar \u30dd\u30ea\u30b7\u30fc\u3067\u6a29\u9650\u3092\u8a55\u4fa1</li> <li>Redis \u30ad\u30e3\u30c3\u30b7\u30e5 + \u30a4\u30d9\u30f3\u30c8\u99c6\u52d5\u306e\u5373\u6642\u7121\u52b9\u5316\u3067\u9ad8\u901f\u5316</li> </ul>"},{"location":"auth/architecture/#_7","title":"\u6bd4\u8f03\u8868","text":"\u6bd4\u8f03\u9805\u76ee \u2460 JWT\u57cb\u3081\u8fbc\u307f \u2461 OIDC Groups \u2462 AVP\u5b9f\u884c\u6642\u30c1\u30a7\u30c3\u30af \u6700\u9069 JWT \u30b5\u30a4\u30ba \u274c \u5927\u304d\u304f\u306a\u308a\u3084\u3059\u3044\uff088KB\u8d85\u904e\u30ea\u30b9\u30af\uff09 \u2705 \u5c0f\u3055\u3044\uff08~1KB\uff09 \u2705 \u5c0f\u3055\u3044\uff08~1KB\uff09 \u2461\u2462 \u6a29\u9650\u306e\u67d4\u8edf\u6027 \ud83d\udfe1 \u57cb\u3081\u8fbc\u307f\u5185\u5bb9\u6b21\u7b2c \u274c \u30b0\u30eb\u30fc\u30d7\u306e\u307f\u8907\u96d1\u306a\u8981\u4ef6\u306b\u975e\u5bfe\u5fdc \u2705 Cedar \u30dd\u30ea\u30b7\u30fc\u3067\u8907\u96d1\u306a\u8981\u4ef6\u306b\u5bfe\u5fdc \u2462 \u5373\u6642\u53cd\u6620 \u274c JWT\u518d\u767a\u884c\u307e\u3067\u53cd\u6620\u3055\u308c\u306a\u3044 \u274c JWT\u518d\u767a\u884c\u307e\u3067\u53cd\u6620\u3055\u308c\u306a\u3044 \u2705 \u30dd\u30ea\u30b7\u30fc\u66f4\u65b0\u3067\u5373\u5ea7\u306b\u53cd\u6620 \u2462 \u76e3\u67fb\u30ed\u30b0 \ud83d\udfe1 \u30c8\u30fc\u30af\u30f3\u691c\u8a3c\u30ed\u30b0\u306e\u307f \ud83d\udfe1 \u30c8\u30fc\u30af\u30f3\u691c\u8a3c\u30ed\u30b0\u306e\u307f \u2705 CloudWatch Logs \u306b\u5224\u5b9a\u8a73\u7d30\u3092\u8a18\u9332 \u2462 \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9 \u2705 \u30c8\u30fc\u30af\u30f3\u691c\u8a3c\u306e\u307f \u2705 \u30c8\u30fc\u30af\u30f3\u691c\u8a3c\u306e\u307f \ud83d\udfe2 Redis \u30ad\u30e3\u30c3\u30b7\u30e5\u3067\u9ad8\u901f\u5316 \u2460\u2461\u2462 \u5b9f\u88c5\u30b3\u30b9\u30c8 \ud83d\udfe1 Lambda\u5b9f\u88c5\u304c\u5fc5\u8981 \u2705 \u6700\u5c0f\u9650 \ud83d\udfe1 AVP\u8a2d\u5b9a\u304c\u5fc5\u8981 \u2461 <p>\u63a8\u5968\u3059\u308b\u9078\u629e\u80a2: \u2705 \u2462 AVP\u5b9f\u884c\u6642\u30c1\u30a7\u30c3\u30af\u65b9\u5f0f</p> <p>\u9078\u629e\u7406\u7531:</p> <ul> <li>\u2705 JWT \u30b5\u30a4\u30ba\u6700\u5c0f\u5316: <code>userId</code> + <code>groups</code> \u306e\u307f\u3067~1KB\u3001\u30c8\u30fc\u30af\u30f3\u30b5\u30a4\u30ba\u554f\u984c\u3092\u56de\u907f</li> <li>\u2705 \u67d4\u8edf\u6027: Cedar \u30dd\u30ea\u30b7\u30fc\u3067\u8907\u96d1\u306a\u6a29\u9650\u8981\u4ef6\uff08\u90e8\u7f72\u5225\u3001\u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u5225\u306a\u3069\uff09\u306b\u5bfe\u5fdc\u53ef\u80fd</li> <li>\u2705 \u5373\u6642\u53cd\u6620: \u30dd\u30ea\u30b7\u30fc\u66f4\u65b0\u3067\u6a29\u9650\u5909\u66f4\u304c\u53cd\u6620\u3055\u308c\u308b\uff08JWT \u518d\u767a\u884c\u4e0d\u8981\uff09</li> <li>\u2705 \u76e3\u67fb: CloudWatch Logs \u306b\u8a8d\u53ef\u5224\u5b9a\u306e\u8a73\u7d30\u30ed\u30b0\u3092\u81ea\u52d5\u8a18\u9332</li> <li>\u2705 \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9: Redis \u30ad\u30e3\u30c3\u30b7\u30e5\u3067\u9ad8\u901f\u306a\u5224\u5b9a\u304c\u53ef\u80fd</li> </ul> <p>\u2460 \u3092\u63a1\u7528\u3057\u306a\u3044\u7406\u7531:</p> <ul> <li>\u274c JWT \u30b5\u30a4\u30ba\u8d85\u904e\u30ea\u30b9\u30af: \u8a73\u7d30\u6a29\u9650\u3092\u57cb\u3081\u8fbc\u3080\u30688KB\u5236\u9650\u3092\u8d85\u3048\u308b\u53ef\u80fd\u6027</li> <li>\u274c \u5373\u6642\u53cd\u6620\u4e0d\u53ef: \u6a29\u9650\u5909\u66f4\u304cJWT\u518d\u767a\u884c\u307e\u3067\u53cd\u6620\u3055\u308c\u306a\u3044\uff08\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30ea\u30b9\u30af\uff09</li> <li>\u274c Lambda \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9: DB\u53d6\u5f97\u51e6\u7406\u3067\u30c8\u30fc\u30af\u30f3\u767a\u884c\u304c\u9045\u5ef6\u3059\u308b\u53ef\u80fd\u6027</li> </ul> <p>\u2461 \u3092\u63a1\u7528\u3057\u306a\u3044\u7406\u7531:</p> <ul> <li>\u274c \u67d4\u8edf\u6027\u4e0d\u8db3: \u30b0\u30eb\u30fc\u30d7\u30d9\u30fc\u30b9\u306e\u307f\u3067\u3001\u8907\u96d1\u306a\u6a29\u9650\u8981\u4ef6\uff08\u30ea\u30bd\u30fc\u30b9\u5358\u4f4d\u306e\u5236\u5fa1\u306a\u3069\uff09\u306b\u975e\u5bfe\u5fdc</li> <li>\u274c \u5373\u6642\u53cd\u6620\u4e0d\u53ef: \u30b0\u30eb\u30fc\u30d7\u5909\u66f4\u304cJWT\u518d\u767a\u884c\u307e\u3067\u53cd\u6620\u3055\u308c\u306a\u3044</li> <li>\u274c \u76e3\u67fb\u30ed\u30b0\u9650\u5b9a\u7684: \u8a73\u7d30\u306a\u8a8d\u53ef\u5224\u5b9a\u306e\u8a18\u9332\u304c\u56f0\u96e3</li> </ul> \u2462 \u63a8\u5968\u65b9\u5f0f\u306e\u5b9f\u88c5\u8a73\u7d30 <p>JWT \u306e\u5185\u5bb9:</p> <ul> <li><code>userId</code>, <code>email</code>, <code>groups</code>\uff08Cognito\u6a19\u6e96\u30af\u30ec\u30fc\u30e0\uff09</li> <li>\u30c8\u30fc\u30af\u30f3\u30b5\u30a4\u30ba: ~1KB</li> </ul> <p>\u6a29\u9650\u5224\u5b9a\u30d5\u30ed\u30fc:</p> <ol> <li>BFF (Next.js) \u304c AVP \u306b\u6a29\u9650\u30c1\u30a7\u30c3\u30af\u3092\u30ea\u30af\u30a8\u30b9\u30c8</li> <li>AVP \u304c Cedar \u30dd\u30ea\u30b7\u30fc\u3092\u8a55\u4fa1\uff08\u30ad\u30e3\u30c3\u30b7\u30e5\u30d2\u30c3\u30c8\u6642\u306fRedis\u304b\u3089\u53d6\u5f97\uff09</li> <li>\u8a31\u53ef/\u62d2\u5426\u3092\u8fd4\u5374\u3001CloudWatch Logs \u306b\u8a73\u7d30\u3092\u8a18\u9332</li> </ol> <p>\u30ad\u30e3\u30c3\u30b7\u30e5\u6226\u7565:</p> <p>\u4e3b\u6226\u7565: \u30a4\u30d9\u30f3\u30c8\u99c6\u52d5\u7121\u52b9\u5316</p> <ul> <li>\u30dd\u30ea\u30b7\u30fc\u66f4\u65b0\u6642: EventBridge \u2192 Lambda \u2192 Redis \u30ad\u30e3\u30c3\u30b7\u30e5\u524a\u9664</li> <li>\u30b0\u30eb\u30fc\u30d7\u5909\u66f4\u6642: Cognito Post Confirmation \u2192 Lambda \u2192 Redis \u30ad\u30e3\u30c3\u30b7\u30e5\u524a\u9664</li> <li>\u30a4\u30d9\u30f3\u30c8\u99c6\u52d5\u3067\u81ea\u52d5\u7684\u306b\u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u7121\u52b9\u5316</li> </ul> <p>\u526f\u6226\u7565: TTL \u30d5\u30a9\u30fc\u30eb\u30d0\u30c3\u30af</p> <ul> <li>\u30ad\u30e3\u30c3\u30b7\u30e5 TTL: 5\u5206</li> <li>\u30a4\u30d9\u30f3\u30c8\u6b20\u640d\u6642\u306e\u5b89\u5168\u30cd\u30c3\u30c8</li> <li>TTL\u671f\u9650\u5207\u308c\u5f8c\u306b\u65b0\u3057\u3044\u6a29\u9650\u304c\u53cd\u6620</li> </ul> <p>\u30ad\u30e3\u30c3\u30b7\u30e5\u30ad\u30fc\u8a2d\u8a08:</p> <pre><code>avp:{userId}:{action}:{resource}\n\u4f8b: avp:user123:viewCustomer:customer456\n</code></pre> \u30b3\u30b9\u30c8\u8a66\u7b97\uff08\u5177\u4f53\u4f8b\uff09 <p>\u6599\u91d1\u60c5\u5831:</p> <ul> <li>Amazon Verified Permissions \u6599\u91d1</li> <li>Single Authorization Request: $0.000005/\u30ea\u30af\u30a8\u30b9\u30c8</li> <li>2025\u5e746\u670812\u65e5\u306b\u5927\u5e45\u5024\u4e0b\u3052 (\u65e7\u4fa1\u683c\u306e\u7d041/30): AWS\u3001Amazon Verified Permissions\u306e\u6599\u91d1\u3092\u5927\u5e45\u5024\u4e0b\u3052</li> <li>Amazon ElastiCache \u6599\u91d1</li> <li>\u53c2\u8003: cache.t4g.micro (US East) \u7d04 $0.016/\u6642\u9593 = \u7d04 $12/\u6708</li> </ul> <p>\u524d\u63d0: 200 DAU\u3001\u5404\u30e6\u30fc\u30b6\u30fc1\u65e5200 API\u30b3\u30fc\u30eb\uff08\u5168\u3066\u306eAPI\u30b3\u30fc\u30eb\u3067\u8a8d\u53ef\u30c1\u30a7\u30c3\u30af\uff09\u3001\u60f3\u5b9a\u30ad\u30e3\u30c3\u30b7\u30e5\u30d2\u30c3\u30c8\u738780%</p> <p>\u30ad\u30e3\u30c3\u30b7\u30e5\u306a\u3057\uff08\u6bce\u56de AVP \u547c\u3073\u51fa\u3057\uff09</p> <pre><code>AVP \u30b3\u30fc\u30eb\u6570/\u6708 = 200 \u30e6\u30fc\u30b6\u30fc \u00d7 200 \u30ea\u30af\u30a8\u30b9\u30c8/\u65e5 \u00d7 30 \u65e5 = 1,200,000 \u30ea\u30af\u30a8\u30b9\u30c8\nAVP \u30b3\u30b9\u30c8 = 1,200,000 \u00d7 $0.000005 = $6.00/\u6708\nRedis \u30b3\u30b9\u30c8 = $0/\u6708\n\u5408\u8a08 = $6.00/\u6708\n</code></pre> <p>Redis \u30ad\u30e3\u30c3\u30b7\u30e5\u3042\u308a\uff08\u30ad\u30e3\u30c3\u30b7\u30e5\u30d2\u30c3\u30c8\u738780%\uff09</p> <pre><code>AVP \u30b3\u30fc\u30eb\u6570/\u6708 = 1,200,000 \u00d7 20% = 240,000 \u30ea\u30af\u30a8\u30b9\u30c8\nAVP \u30b3\u30b9\u30c8 = 240,000 \u00d7 $0.000005 = $1.20/\u6708\nRedis \u30b3\u30b9\u30c8 (cache.t4g.micro) = \u7d04 $12/\u6708\n\u5408\u8a08 = \u7d04 $13.20/\u6708\n</code></pre> <p>\u30b3\u30b9\u30c8 vs \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u306e\u30c8\u30ec\u30fc\u30c9\u30aa\u30d5</p> <p>\u30b3\u30b9\u30c8\u9762:</p> <ul> <li>AVP \u5358\u4f53: $6.00/\u6708 \u2192 Redis \u4f75\u7528: $13.20/\u6708\uff08\u7d042.2\u500d\uff09</li> <li>200 DAU \u00d7 200 API \u30b3\u30fc\u30eb/\u65e5\u306e\u898f\u6a21\u3067\u306f\u3001Redis \u306e\u56fa\u5b9a\u8cbb\uff08\\(12/\u6708\uff09\u304c AVP \u30b3\u30b9\u30c8\u524a\u6e1b\u984d\uff08\\)4.80/\u6708\uff09\u3092\u4e0a\u56de\u308b</li> </ul> <p>\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u9762:</p> <ul> <li>Redis \u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u3088\u308a\u8a8d\u53ef\u30c1\u30a7\u30c3\u30af\u306e\u30ec\u30b9\u30dd\u30f3\u30b9\u6642\u9593\u3092\u5927\u5e45\u306b\u77ed\u7e2e</li> <li>AVP API \u547c\u3073\u51fa\u3057\u309280%\u524a\u6e1b\u3059\u308b\u3053\u3068\u3067\u3001API \u30ec\u30fc\u30c8\u5236\u9650\u3078\u306e\u4f59\u88d5\u304c\u751f\u307e\u308c\u308b</li> <li>\u30e6\u30fc\u30b6\u30fc\u4f53\u9a13\u306e\u5411\u4e0a\uff08\u753b\u9762\u9077\u79fb\u30fb\u64cd\u4f5c\u306e\u9ad8\u901f\u5316\uff09</li> </ul> <p>\u63a8\u5968:</p> <ul> <li>\u521d\u671f\u6bb5\u968e\u3067\u306f\u30ad\u30e3\u30c3\u30b7\u30e5\u306a\u3057\u3067\u904b\u7528\u3057\u3001\u30b3\u30b9\u30c8\u3092\u6700\u5c0f\u5316</li> <li>\u30e6\u30fc\u30b6\u30fc\u6570\u5897\u52a0\u3084\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u8981\u4ef6\u306b\u5fdc\u3058\u3066 Redis \u30ad\u30e3\u30c3\u30b7\u30e5\u3092\u5c0e\u5165</li> <li>1,000 DAU \u4ee5\u4e0a\u3067\u306f Redis \u5c0e\u5165\u306b\u3088\u308b\u30b3\u30b9\u30c8\u524a\u6e1b\u52b9\u679c\u304c\u9855\u8457\u306b\u306a\u308b</li> </ul> <p>Cognito \u30b0\u30eb\u30fc\u30d7\u7ba1\u7406:</p> <ul> <li>\u521d\u56de\u767b\u9332: \u521d\u671f\u30b0\u30eb\u30fc\u30d7\uff08\u4f8b: <code>guest</code>\uff09\u3092\u81ea\u52d5\u4ed8\u4e0e</li> <li>\u6a29\u9650\u4ed8\u4e0e: \u7ba1\u7406\u8005\u304c Cognito \u30b3\u30f3\u30bd\u30fc\u30eb/API \u3067\u8a2d\u5b9a</li> <li>JWT \u53cd\u6620: Cognito \u304c\u81ea\u52d5\u7684\u306b <code>cognito:groups</code> \u30af\u30ec\u30fc\u30e0\u306b\u542b\u3081\u308b</li> </ul> <p>Pre Token Generation Lambda \u306b\u3064\u3044\u3066</p> <p>Cognito \u3067 JWT \u306e\u5185\u5bb9\u3092\u8ffd\u52a0\u30fb\u5909\u63db\u3059\u308b\u5834\u5408\u306f Pre Token Generation Lambda \u30c8\u30ea\u30ac\u30fc \u3092\u5b9f\u88c5\u3067\u304d\u307e\u3059\u3002\u672c\u69cb\u6210\u3067\u306f\u30c8\u30fc\u30af\u30f3\u30b5\u30a4\u30ba\u3092\u6700\u5c0f\u9650\u306b\u4fdd\u3064\u305f\u3081\u57fa\u672c\u7684\u306a <code>userId</code> \u3068 <code>groups</code> \u306e\u4ed8\u4e0e\u306b\u3068\u3069\u3081\u3001\u30b0\u30eb\u30fc\u30d7\u540d\u306e\u5909\u63db\u3084\u30ab\u30b9\u30bf\u30e0\u30af\u30ec\u30fc\u30e0\u4ed8\u4e0e\u304c\u5fc5\u8981\u306a\u5834\u5408\u306e\u307f Lambda \u3092\u5c0e\u5165\u3057\u307e\u3059\u3002Lambda \u3092\u631f\u3080\u969b\u306f\u30b3\u30fc\u30eb\u30c9\u30b9\u30bf\u30fc\u30c8\u3084\u5916\u90e8\u30a2\u30af\u30bb\u30b9\u306b\u3088\u308b\u9045\u5ef6\u3092\u907f\u3051\u308b\u305f\u3081\u3001\u51e6\u7406\u5185\u5bb9\u306f\u8efd\u91cf\u306b\u4fdd\u3061\u3001\u5916\u90e8 DB \u53c2\u7167\u306a\u3069\u306f\u884c\u308f\u306a\u3044\u65b9\u91dd\u3068\u3057\u307e\u3059\u3002</p>"},{"location":"auth/architecture/#_8","title":"\u9078\u629e\u80a2\u306e\u6982\u8981","text":"<p>\u2460 \u30b9\u30c6\u30fc\u30c8\u30ec\u30b9JWT\u65b9\u5f0f</p> <ul> <li>Cookie \u306b Cognito \u306e JWT\uff08Access Token\u3001Refresh Token\uff09\u3092\u305d\u306e\u307e\u307e\u5e73\u6587\u3067\u683c\u7d0d</li> <li>\u30b5\u30fc\u30d0\u30fc\u5074\u306e\u30b9\u30c8\u30ec\u30fc\u30b8\u4e0d\u8981\u3067\u30b9\u30c6\u30fc\u30c8\u30ec\u30b9</li> <li>NextAuth.js \u3092\u4f7f\u308f\u306a\u3044\u72ec\u81ea\u5b9f\u88c5\u304c\u5fc5\u8981</li> </ul> <p>\u2461 \u6697\u53f7\u5316JWT\u65b9\u5f0f\uff08NextAuth.js JWT\u6226\u7565\uff09</p> <ul> <li>Cookie \u306b\u6697\u53f7\u5316\u3057\u305f JWT \u3092\u683c\u7d0d\uff08NextAuth.js <code>strategy: \"jwt\"</code> \u3067\u81ea\u52d5\u5bfe\u5fdc\uff09</li> <li>\u30b5\u30fc\u30d0\u30fc\u5074\u306e\u30b9\u30c8\u30ec\u30fc\u30b8\u4e0d\u8981\u3067\u30b9\u30c6\u30fc\u30c8\u30ec\u30b9</li> <li>NextAuth.js \u304c\u6697\u53f7\u5316\u30fb\u5fa9\u53f7\u5316\u3092\u81ea\u52d5\u51e6\u7406</li> </ul> <p>\u2462 \u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30c8\u30a2\u65b9\u5f0f\uff08NextAuth.js Database\u6226\u7565\uff09</p> <ul> <li>Cookie \u306b\u306f\u30bb\u30c3\u30b7\u30e7\u30f3ID\u306e\u307f\u3092\u683c\u7d0d\uff08\u6570\u5341\u30d0\u30a4\u30c8\uff09</li> <li>Cognito \u30c8\u30fc\u30af\u30f3\u306f\u30b5\u30fc\u30d0\u30fc\u5074\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30c8\u30a2\uff08DynamoDB/Redis\uff09\u306b\u4fdd\u5b58</li> <li>\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30a2\u30c0\u30d7\u30bf\u30fc\u306e\u8a2d\u5b9a\u304c\u5fc5\u8981</li> </ul>"},{"location":"auth/architecture/#_9","title":"\u6bd4\u8f03\u8868","text":"\u6bd4\u8f03\u9805\u76ee \u2460 \u30b9\u30c6\u30fc\u30c8\u30ec\u30b9JWT \u2461 \u6697\u53f7\u5316JWT \u2462 \u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30c8\u30a2 \u6700\u9069 \u5b9f\u88c5\u306e\u5bb9\u6613\u3055 \u274c \u81ea\u524d\u5b9f\u88c5\u304c\u5fc5\u8981 \ud83d\udfe2 NextAuth.js \u304c\u81ea\u52d5\u5bfe\u5fdc \ud83d\udfe1 DynamoDB/Redis\u306e\u6e96\u5099\u304c\u5fc5\u8981 \u2461 Cookie \u30b5\u30a4\u30ba \u274c 3\u301c5KB\uff084KB\u5236\u9650\u8d85\u904e\u30ea\u30b9\u30af\uff09 \u274c 3\u301c5KB\uff08\u6697\u53f7\u5316\u3067\u3055\u3089\u306b\u5897\uff09 \u2705 \u6570\u5341\u30d0\u30a4\u30c8 \u2462 \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\uff08XSS\uff09 \u274c \u5e73\u6587\u30c8\u30fc\u30af\u30f3\u304cCookie\u5185\u306b\u5b58\u5728 \ud83d\udfe1 \u6697\u53f7\u5316\u3055\u308c\u3066\u3044\u308b\u304cCookie\u5185\u306b\u5b58\u5728 \u2705 \u30c8\u30fc\u30af\u30f3\u304c\u30d6\u30e9\u30a6\u30b6\u306b\u4e00\u5207\u9732\u51fa\u3057\u306a\u3044 \u2462 \u5373\u6642\u7121\u52b9\u5316 \u274c \u4e0d\u53ef \u274c \u4e0d\u53ef \u2705 \u30b5\u30fc\u30d0\u30fc\u5074\u3067\u53ef\u80fd \u2462 Cognito\u30c8\u30fc\u30af\u30f3\u66f4\u65b0 \u274c \u81ea\u524d\u5b9f\u88c5\u304c\u5fc5\u8981 \ud83d\udfe1 <code>jwt</code>\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3067\u30ed\u30b8\u30c3\u30af\u5b9f\u88c5\u304c\u5fc5\u8981 \u2705 \u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u81ea\u52d5\u51e6\u7406 \u2462 CSRF\u5bfe\u7b56 \u274c \u81ea\u524d\u5b9f\u88c5\u304c\u5fc5\u8981 \u2705 NextAuth.js \u304c\u81ea\u52d5\u5b9f\u88c5 \u2705 NextAuth.js \u304c\u81ea\u52d5\u5b9f\u88c5 \u2461\u2462 \u30b9\u30c6\u30fc\u30c8\u30ec\u30b9\u6027 \u2705 \u30b9\u30c6\u30fc\u30c8\u30ec\u30b9 \u2705 \u30b9\u30c6\u30fc\u30c8\u30ec\u30b9 \u274c \u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30c8\u30a2\u5fc5\u8981 \u2460\u2461 \u904b\u7528\u30b3\u30b9\u30c8 \u2705 \u30b9\u30c8\u30ec\u30fc\u30b8\u4e0d\u8981 \u2705 \u30b9\u30c8\u30ec\u30fc\u30b8\u4e0d\u8981 \ud83d\udfe1 \u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30c8\u30a2\u306e\u7ba1\u7406\u304c\u5fc5\u8981 \u2460\u2461 <p>\u63a8\u5968\u3059\u308b\u9078\u629e\u80a2: \u2705 \u2462 \u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30c8\u30a2\u65b9\u5f0f</p> <p>\u9078\u629e\u7406\u7531:</p> <ul> <li>\u2705 \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u6700\u512a\u5148: Cognito\u30c8\u30fc\u30af\u30f3\u304c\u30d6\u30e9\u30a6\u30b6\u306b\u4e00\u5207\u9732\u51fa\u305b\u305a\u3001XSS\u653b\u6483\u306e\u30ea\u30b9\u30af\u3092\u6700\u5c0f\u5316</li> <li>\u2705 \u5373\u6642\u7121\u52b9\u5316: \u30ed\u30b0\u30a2\u30a6\u30c8\u3084\u6a29\u9650\u5909\u66f4\u6642\u306b\u30b5\u30fc\u30d0\u30fc\u5074\u3067\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u7121\u52b9\u5316\u53ef\u80fd</li> <li>\u2705 Cookie \u30b5\u30a4\u30ba: 4KB\u5236\u9650\u3092\u6c17\u306b\u3059\u308b\u5fc5\u8981\u304c\u4e00\u5207\u306a\u3044</li> <li>\u2705 \u5b9f\u88c5\u306e\u7c21\u6f54\u3055: NextAuth.js \u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u52d5\u4f5c\u3067\u30c8\u30fc\u30af\u30f3\u66f4\u65b0\u30fbCSRF\u5bfe\u7b56\u304c\u81ea\u52d5\u51e6\u7406</li> <li>\ud83d\udfe1 \u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30c8\u30a2\u306e\u6e96\u5099\u304c\u5fc5\u8981\u3060\u304c\u3001DynamoDB\uff08\u30b5\u30fc\u30d0\u30fc\u30ec\u30b9\uff09\u3067\u904b\u7528\u8ca0\u8377\u3092\u6700\u5c0f\u5316</li> </ul> <p>\u2460 \u3092\u63a1\u7528\u3057\u306a\u3044\u7406\u7531:</p> <ul> <li>\u274c Cookie \u30b5\u30a4\u30ba\u8d85\u904e: Cognito JWT\uff082\u301c3KB\uff09+ Refresh Token \u30674KB\u5236\u9650\u3092\u8d85\u3048\u308b\u53ef\u80fd\u6027\u304c\u9ad8\u3044</li> <li>\u274c \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30ea\u30b9\u30af: \u5e73\u6587\u30c8\u30fc\u30af\u30f3\u304cCookie\u306b\u683c\u7d0d\u3055\u308c\u308b</li> <li>\u274c \u5373\u6642\u7121\u52b9\u5316\u4e0d\u53ef: \u30ed\u30b0\u30a2\u30a6\u30c8\u5f8c\u3082\u30c8\u30fc\u30af\u30f3\u6709\u52b9\u671f\u9650\u307e\u3067\u4f7f\u7528\u53ef\u80fd</li> <li>\u274c \u5b9f\u88c5\u30b3\u30b9\u30c8: \u30c8\u30fc\u30af\u30f3\u66f4\u65b0\u30fbCSRF\u5bfe\u7b56\u306a\u3069\u3092\u81ea\u524d\u5b9f\u88c5\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b</li> </ul> <p>\u2461 \u3092\u63a1\u7528\u3057\u306a\u3044\u7406\u7531:</p> <ul> <li>\u274c Cookie \u30b5\u30a4\u30ba\u8d85\u904e: \u6697\u53f7\u5316\u30aa\u30fc\u30d0\u30fc\u30d8\u30c3\u30c9\u3067\u2460\u3088\u308a\u3055\u3089\u306b\u5927\u304d\u304f\u306a\u308a\u30014KB\u5236\u9650\u8d85\u904e\u306e\u53ef\u80fd\u6027\u304c\u6975\u3081\u3066\u9ad8\u3044</li> <li>\u274c \u5373\u6642\u7121\u52b9\u5316\u4e0d\u53ef: \u30ed\u30b0\u30a2\u30a6\u30c8\u5f8c\u3082\u30c8\u30fc\u30af\u30f3\u6709\u52b9\u671f\u9650\u307e\u3067\u4f7f\u7528\u53ef\u80fd\uff08\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30ea\u30b9\u30af\uff09</li> <li>\ud83d\udfe1 \u30c8\u30fc\u30af\u30f3\u66f4\u65b0\u5b9f\u88c5: <code>jwt</code> \u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u3067 Cognito Refresh Token \u306e\u30ed\u30b8\u30c3\u30af\u3092\u5b9f\u88c5\u3059\u308b\u5fc5\u8981\u304c\u3042\u308b</li> <li>\u2139\ufe0f \u30b9\u30c6\u30fc\u30c8\u30ec\u30b9\u304c\u8981\u4ef6\u306e\u5834\u5408\u306f\u9078\u629e\u80a2\u306b\u306a\u308b\u304c\u3001\u672c\u69cb\u6210\u3067\u306f\u2462\u304c\u9069\u5207</li> </ul> \u2462 \u63a8\u5968\u65b9\u5f0f\u306e\u5b9f\u88c5\u8a73\u7d30 <p>Cookie \u306e\u5185\u5bb9:</p> <ul> <li>\u30bb\u30c3\u30b7\u30e7\u30f3ID\u306e\u307f\uff08\u6570\u5341\u30d0\u30a4\u30c8\u3001\u4f8b: <code>session_abc123xyz...</code>\uff09</li> <li><code>HttpOnly</code>, <code>Secure</code>, <code>SameSite=Lax</code> \u5c5e\u6027\u3092\u8a2d\u5b9a</li> </ul> <p>\u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30c8\u30a2\u306e\u5185\u5bb9:</p> <ul> <li>Cognito ID Token, Access Token, Refresh Token</li> <li>\u30e6\u30fc\u30b6\u30fc\u60c5\u5831\uff08userId, email, groups\uff09</li> <li>\u30bb\u30c3\u30b7\u30e7\u30f3\u6709\u52b9\u671f\u9650</li> </ul> <p>\u81ea\u52d5\u51e6\u7406\u3055\u308c\u308b\u6a5f\u80fd:</p> <ul> <li>Refresh Token \u306b\u3088\u308b Access Token \u306e\u81ea\u52d5\u66f4\u65b0</li> <li>CSRF \u30c8\u30fc\u30af\u30f3\u306e\u751f\u6210\u30fb\u691c\u8a3c</li> <li>\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u6709\u52b9\u671f\u9650\u7ba1\u7406</li> </ul> <p>\u30a4\u30f3\u30d5\u30e9\u69cb\u6210:</p> <ul> <li>\u521d\u671f: DynamoDB\uff08\u30b5\u30fc\u30d0\u30fc\u30ec\u30b9\u3001\u4f4e\u30b3\u30b9\u30c8\uff09</li> <li>\u30b9\u30b1\u30fc\u30eb\u6642: Redis\uff08ElastiCache\uff09\u8ffd\u52a0\u3067\u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u6700\u9069\u5316</li> </ul> \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u4e0a\u306e\u8003\u616e\u4e8b\u9805 <p>JWT \u306e\u53d6\u308a\u6271\u3044</p> <ul> <li>\u2705 JWT \u306b\u306f <code>userId</code> + <code>groups</code> \u306e\u307f\u683c\u7d0d\uff08\u8a73\u7d30\u6a29\u9650\u306f\u542b\u3081\u306a\u3044\uff09</li> <li>\u2705 \u30c8\u30fc\u30af\u30f3\u76d7\u96e3\u6642\u306e\u88ab\u5bb3\u3092\u6700\u5c0f\u5316</li> <li>\u2705 \u6a29\u9650\u5909\u66f4\u6642\u306b JWT \u518d\u767a\u884c\u4e0d\u8981\uff08AVP \u30dd\u30ea\u30b7\u30fc\u66f4\u65b0\u306e\u307f\uff09</li> </ul> <p>Cookie \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5c5e\u6027</p> <ul> <li>\u2705 <code>HttpOnly</code>: JavaScript \u304b\u3089\u30a2\u30af\u30bb\u30b9\u4e0d\u53ef\uff08XSS \u5bfe\u7b56\uff09</li> <li>\u2705 <code>Secure</code>: HTTPS \u901a\u4fe1\u3067\u306e\u307f\u9001\u4fe1</li> <li>\u2705 <code>SameSite=Lax</code>: CSRF \u653b\u6483\u3092\u9632\u6b62</li> </ul> <p>\u30c8\u30fc\u30af\u30f3\u6709\u52b9\u671f\u9650</p> <ul> <li>ID Token: 1\u6642\u9593\uff08Cognito \u30c7\u30d5\u30a9\u30eb\u30c8\uff09</li> <li>Access Token: 1\u6642\u9593\uff08Cognito \u30c7\u30d5\u30a9\u30eb\u30c8\uff09</li> <li>Refresh Token: \u8a2d\u5b9a\u3057\u305f\u6709\u52b9\u671f\u9650\uff08NextAuth.js \u304c\u81ea\u52d5\u66f4\u65b0\uff09</li> <li>\u30bb\u30c3\u30b7\u30e7\u30f3: NextAuth.js \u304c Refresh Token \u3092\u4f7f\u7528\u3057\u3066\u81ea\u52d5\u5ef6\u9577</li> </ul> <p>\u30bb\u30c3\u30b7\u30e7\u30f3\u7121\u52b9\u5316</p> <ul> <li>\u30ed\u30b0\u30a2\u30a6\u30c8\u6642: \u30b5\u30fc\u30d0\u30fc\u5074\u3067\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u524a\u9664</li> <li>\u6a29\u9650\u5909\u66f4\u6642: \u5fc5\u8981\u306b\u5fdc\u3058\u3066\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u7121\u52b9\u5316\u53ef\u80fd</li> <li>\u4e0d\u6b63\u30a2\u30af\u30bb\u30b9\u691c\u77e5\u6642: \u7ba1\u7406\u8005\u304c\u7279\u5b9a\u30e6\u30fc\u30b6\u30fc\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u5f37\u5236\u7d42\u4e86\u53ef\u80fd</li> </ul>"},{"location":"auth/architecture/#_10","title":"\u9078\u629e\u80a2\u306e\u6982\u8981","text":"<p>\u2460 BFF\u96c6\u4e2d\u30c1\u30a7\u30c3\u30af\u65b9\u5f0f\uff08API\u306f\u7121\u691c\u8a3c\uff09</p> <ul> <li>\u30d6\u30e9\u30a6\u30b6\u2192BFF: Cookie\uff08\u30bb\u30c3\u30b7\u30e7\u30f3ID\uff09\u3067\u8a8d\u8a3c + AVP \u3067\u8a8d\u53ef\u30c1\u30a7\u30c3\u30af</li> <li>BFF\u2192API: \u8a8d\u8a3c\u30fb\u8a8d\u53ef\u30c1\u30a7\u30c3\u30af\u306a\u3057\u3067\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u8ee2\u9001\uff08\u5185\u90e8\u901a\u4fe1\u3068\u3057\u3066\u4fe1\u983c\uff09</li> <li>\u3059\u3079\u3066\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30c1\u30a7\u30c3\u30af\u3092 BFF \u306b\u96c6\u4e2d</li> </ul> <p>\u2461 \u591a\u5c64\u9632\u5fa1\u65b9\u5f0f\uff08BFF\u30fbAPI\u4e21\u65b9\u3067\u30c1\u30a7\u30c3\u30af\uff09</p> <ul> <li>\u30d6\u30e9\u30a6\u30b6\u2192BFF: Cookie\uff08\u30bb\u30c3\u30b7\u30e7\u30f3ID\uff09\u3067\u8a8d\u8a3c + AVP \u3067\u8a8d\u53ef\u30c1\u30a7\u30c3\u30af</li> <li>BFF\u2192API: JWT\uff08Access Token\uff09\u3092\u30d8\u30c3\u30c0\u30fc\u306b\u4ed8\u4e0e\u3057\u3001API\u5074\u3067JWT\u691c\u8a3c\u3092\u5b9f\u65bd</li> <li>\u5404\u5c64\u3067\u72ec\u7acb\u3057\u305f\u691c\u8a3c\u3092\u5b9f\u65bd</li> </ul> <p>\u2462 API Gateway \u96c6\u4e2d\u5236\u5fa1\u65b9\u5f0f</p> <ul> <li>\u30d6\u30e9\u30a6\u30b6\u2192BFF: Cookie\uff08\u30bb\u30c3\u30b7\u30e7\u30f3ID\uff09\u3067\u8a8d\u8a3c + AVP \u3067\u8a8d\u53ef\u30c1\u30a7\u30c3\u30af</li> <li>BFF\u2192API Gateway\u2192API: API Gateway \u306e Lambda Authorizer \u3067 JWT\u691c\u8a3c\u30fb\u8a8d\u53ef\u30c1\u30a7\u30c3\u30af</li> <li>Gateway \u3067\u96c6\u4e2d\u7684\u306b\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5236\u5fa1</li> </ul>"},{"location":"auth/architecture/#_11","title":"\u6bd4\u8f03\u8868","text":"\u6bd4\u8f03\u9805\u76ee \u2460 BFF \u96c6\u4e2d \u2461 \u591a\u5c64\u9632\u5fa1 \u2462 Gateway \u96c6\u4e2d \u6700\u9069 \u65e9\u671f\u30ea\u30b8\u30a7\u30af\u30b7\u30e7\u30f3 \u2705 BFF \u3067\u62d2\u5426 \u2705 BFF \u3067\u62d2\u5426 \ud83d\udfe1 Gateway \u3067\u62d2\u5426\uff08BFF\u7d4c\u7531\u5f8c\uff09 \u2460\u2461 \u591a\u5c64\u9632\u5fa1 \u274c API \u304c\u7121\u9632\u5099\uff08BFF\u4fe1\u983c\u524d\u63d0\uff09 \u2705 BFF\u30fbAPI \u3067\u4e8c\u91cd\u30c1\u30a7\u30c3\u30af \u2705 Gateway\u30fbAPI \u3067\u4e8c\u91cd\u30c1\u30a7\u30c3\u30af\u53ef\u80fd \u2461\u2462 \u5b9f\u88c5\u306e\u5bb9\u6613\u3055 \u2705 BFF \u306e\u307f\u5b9f\u88c5 \ud83d\udfe1 BFF\u30fbAPI \u4e21\u65b9\u306b\u5b9f\u88c5 \u274c Gateway + Lambda\u8ffd\u52a0\u5b9f\u88c5\u304c\u5fc5\u8981 \u2460 API \u5358\u4f53\u5229\u7528 \u274c \u4e0d\u53ef\uff08BFF \u5fc5\u9808\uff09 \u2705 \u53ef\u80fd\uff08\u30e2\u30d0\u30a4\u30eb\u30a2\u30d7\u30ea\u7b49\uff09 \u2705 \u53ef\u80fd\uff08Gateway \u7d4c\u7531\uff09 \u2461\u2462 \u30da\u30fc\u30b8\u30ec\u30d9\u30eb\u5236\u5fa1 \u2705 BFF \u3067 SSR \u5236\u5fa1 \u2705 BFF \u3067 SSR \u5236\u5fa1 \u2705 BFF \u3067 SSR \u5236\u5fa1 \u2460\u2461\u2462 \u904b\u7528\u30b3\u30b9\u30c8 \u2705 \u6700\u5c0f\u9650 \ud83d\udfe1 \u3084\u3084\u5897\u52a0 \u274c Gateway \u7ba1\u7406\u304c\u8ffd\u52a0\u3067\u5fc5\u8981 \u2460 \u8cac\u52d9\u306e\u660e\u78ba\u3055 \ud83d\udfe1 BFF \u306b\u96c6\u4e2d \u2705 \u660e\u78ba\u306b\u5206\u96e2 \ud83d\udfe1 Gateway \u304c\u96c6\u4e2d \u2461 <p>\u63a8\u5968\u3059\u308b\u9078\u629e\u80a2: \u2705 \u2461 \u591a\u5c64\u9632\u5fa1\u65b9\u5f0f\uff08BFF\u30fbAPI \u4e21\u65b9\u3067\u30c1\u30a7\u30c3\u30af\uff09</p> <p>\u9078\u629e\u7406\u7531:</p> <ul> <li>\u2705 \u65e9\u671f\u30ea\u30b8\u30a7\u30af\u30b7\u30e7\u30f3: BFF \u3067\u8a8d\u8a3c\u30fb\u8a8d\u53ef\u30c1\u30a7\u30c3\u30af\u3001\u4e0d\u6b63\u30ea\u30af\u30a8\u30b9\u30c8\u306f API \u306b\u5230\u9054\u3055\u305b\u306a\u3044</li> <li>\u2705 \u591a\u5c64\u9632\u5fa1: API \u5074\u3067\u3082 JWT \u691c\u8a3c\u3092\u5b9f\u65bd\u3057\u3001BFF \u3092\u30d0\u30a4\u30d1\u30b9\u3057\u305f\u653b\u6483\u306b\u5bfe\u5fdc</li> <li>\u2705 \u67d4\u8edf\u6027: \u5c06\u6765\u7684\u306a\u30e2\u30d0\u30a4\u30eb\u30a2\u30d7\u30ea\u306a\u3069\u3001BFF \u3092\u7d4c\u7531\u3057\u306a\u3044 API \u76f4\u63a5\u30a2\u30af\u30bb\u30b9\u306b\u5bfe\u5fdc\u53ef\u80fd</li> <li>\u2705 \u8cac\u52d9\u306e\u660e\u78ba\u5316: BFF\uff08\u8a8d\u8a3c\u30fb\u8a8d\u53ef\u30fbUI\u5236\u5fa1\uff09\u3068 API\uff08JWT\u691c\u8a3c\u30fb\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\uff09\u306e\u5f79\u5272\u304c\u660e\u78ba</li> <li>\u2705 \u5b9f\u88c5\u306e\u30b7\u30f3\u30d7\u30eb\u3055: API Gateway \u4e0d\u8981\u3001BFF \u304b\u3089\u76f4\u63a5 AVP SDK \u3092\u547c\u3073\u51fa\u3057</li> </ul> <p>\u2460 \u3092\u63a1\u7528\u3057\u306a\u3044\u7406\u7531:</p> <ul> <li>\u274c \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30ea\u30b9\u30af: BFF \u304c\u4fb5\u5bb3\u3055\u308c\u305f\u5834\u5408\u3084\u8a2d\u5b9a\u30df\u30b9\u304c\u3042\u3063\u305f\u5834\u5408\u3001API \u304c\u7121\u9632\u5099\u306b\u306a\u308b</li> <li>\u274c API \u5358\u4f53\u5229\u7528\u4e0d\u53ef: \u5c06\u6765\u7684\u306a\u30e2\u30d0\u30a4\u30eb\u30a2\u30d7\u30ea\u306a\u3069\u306e\u8981\u4ef6\u306b\u5bfe\u5fdc\u56f0\u96e3</li> <li>\u274c \u30bc\u30ed\u30c8\u30e9\u30b9\u30c8\u306b\u975e\u5bfe\u5fdc: BFF \u3068 API \u9593\u306e\u5185\u90e8\u901a\u4fe1\u3092\u7121\u6761\u4ef6\u306b\u4fe1\u983c\u3059\u308b\u524d\u63d0\u304c\u5fc5\u8981</li> </ul> <p>\u2462 \u3092\u63a1\u7528\u3057\u306a\u3044\u7406\u7531:</p> <ul> <li>\u274c BFF \u69cb\u6210\u3067\u4e0d\u8981: BFF \u81ea\u4f53\u304c\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u306e\u5f79\u5272\u3092\u679c\u305f\u3057\u3066\u3044\u308b\u305f\u3081\u5197\u9577</li> <li>\u274c \u5b9f\u88c5\u30fb\u904b\u7528\u30b3\u30b9\u30c8: Lambda Authorizer \u306e\u5b9f\u88c5\u30fb\u904b\u7528\u304c\u8ffd\u52a0\u3067\u5fc5\u8981</li> <li>\u274c \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u8907\u96d1\u5316: BFF \u3068 Gateway \u3067\u5f79\u5272\u304c\u91cd\u8907</li> <li>\u2139\ufe0f BFF \u3092\u4f7f\u308f\u306a\u3044\u69cb\u6210\uff08SPA + API\uff09\u306e\u5834\u5408\u306f\u6709\u52b9\u306a\u9078\u629e\u80a2</li> </ul> \u2461 \u63a8\u5968\u65b9\u5f0f\u306e\u5b9f\u88c5\u8a73\u7d30 <p>\u30d6\u30e9\u30a6\u30b6 \u2192 BFF \u9593\u306e\u30c1\u30a7\u30c3\u30af:</p> <ul> <li>\u8a8d\u8a3c: Cookie\uff08\u30bb\u30c3\u30b7\u30e7\u30f3ID\uff09\u306e\u6709\u52b9\u6027\u30c1\u30a7\u30c3\u30af</li> <li>\u30bb\u30c3\u30b7\u30e7\u30f3\u691c\u8a3c: DynamoDB/Redis \u304b\u3089\u30bb\u30c3\u30b7\u30e7\u30f3\u60c5\u5831\u3092\u53d6\u5f97</li> <li>\u8a8d\u53ef: AVP \u3092\u547c\u3073\u51fa\u3057\u3066\u6a29\u9650\u30c1\u30a7\u30c3\u30af\uff08Redis \u30ad\u30e3\u30c3\u30b7\u30e5\u6d3b\u7528\uff09</li> <li>SSR \u5236\u5fa1: \u6a29\u9650\u306b\u5fdc\u3058\u305f\u30da\u30fc\u30b8\u751f\u6210\u30fb\u30ea\u30c0\u30a4\u30ec\u30af\u30c8</li> </ul> <p>BFF \u2192 API \u9593\u306e\u30c1\u30a7\u30c3\u30af:</p> <ul> <li>\u30c8\u30fc\u30af\u30f3\u4ed8\u4e0e: BFF \u304c\u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30c8\u30a2\u304b\u3089 Cognito Access Token \u3092\u53d6\u5f97\u3057\u3001Authorization \u30d8\u30c3\u30c0\u30fc\u306b\u8a2d\u5b9a</li> <li>JWT \u691c\u8a3c: API\uff08Spring Boot\uff09\u304c JWT \u7f72\u540d\u30fb\u6709\u52b9\u671f\u9650\u30fbIssuer \u3092\u691c\u8a3c</li> <li>\u57fa\u672c\u7684\u306a\u8a8d\u53ef: JWT \u306e <code>groups</code> \u30af\u30ec\u30fc\u30e0\u3067\u7c21\u6613\u30c1\u30a7\u30c3\u30af\uff08\u8a73\u7d30\u306a\u8a8d\u53ef\u306f BFF \u3067\u5b8c\u4e86\u6e08\u307f\uff09</li> </ul> <p>\u8cac\u52d9\u5206\u62c5:</p> \u5c64 \u8a8d\u8a3c \u8a8d\u53ef \u305d\u306e\u4ed6\u306e\u5f79\u5272 BFF (Next.js) \u2705 \u30bb\u30c3\u30b7\u30e7\u30f3\u691c\u8a3c \u2705 AVP \u3067\u8a73\u7d30\u30c1\u30a7\u30c3\u30af UI\u5236\u5fa1\u3001SSR\u3001\u65e9\u671f\u30ea\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3001\u30da\u30fc\u30b8\u30ec\u30d9\u30eb\u5236\u5fa1 API (Spring Boot) \u2705 JWT \u691c\u8a3c \ud83d\udfe1 Groups \u3067\u7c21\u6613\u30c1\u30a7\u30c3\u30af \u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u3001\u30c7\u30fc\u30bf\u30a2\u30af\u30bb\u30b9\u3001\u591a\u5c64\u9632\u5fa1 <p>\u8cac\u52d9\u5206\u62c5\u306e\u30dd\u30a4\u30f3\u30c8:</p> <ul> <li>BFF: \u5168\u3066\u306e\u8a8d\u8a3c\u30fb\u8a8d\u53ef\u30c1\u30a7\u30c3\u30af\u3092\u5b9f\u65bd\uff08\u30da\u30fc\u30b8\u30a2\u30af\u30bb\u30b9\u6642\uff09</li> <li>Cookie\uff08\u30bb\u30c3\u30b7\u30e7\u30f3ID\uff09\u306e\u691c\u8a3c</li> <li>AVP \u306b\u3088\u308b\u8a73\u7d30\u306a\u6a29\u9650\u30c1\u30a7\u30c3\u30af</li> <li>\u4e0d\u6b63\u30ea\u30af\u30a8\u30b9\u30c8\u306f API \u306b\u5230\u9054\u3055\u305b\u306a\u3044</li> <li> <p>\u6a29\u9650\u306b\u5fdc\u3058\u305f UI \u306e\u51fa\u3057\u5206\u3051</p> </li> <li> <p>API: JWT \u691c\u8a3c + Groups \u7c21\u6613\u30c1\u30a7\u30c3\u30af\uff08\u591a\u5c64\u9632\u5fa1\u3068\u3057\u3066\uff09</p> </li> <li>JWT \u306e\u7f72\u540d\u30fb\u6709\u52b9\u671f\u9650\u30fbIssuer \u691c\u8a3c</li> <li><code>groups</code> \u30af\u30ec\u30fc\u30e0\u306b\u3088\u308b\u57fa\u672c\u7684\u306a\u6a29\u9650\u78ba\u8a8d</li> <li>\u8a73\u7d30\u306a\u8a8d\u53ef\u30ed\u30b8\u30c3\u30af\u306f BFF \u306b\u59d4\u8b72</li> <li>\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u306b\u5c02\u5ff5</li> </ul> <p>\u5b9f\u88c5\u4f8b:</p> <pre><code>// BFF (Next.js Server Component)\nasync function getProtectedData() {\n  const session = await getServerSession(); // \u30bb\u30c3\u30b7\u30e7\u30f3\u691c\u8a3c\n\n  // \u8a8d\u53ef\u30c1\u30a7\u30c3\u30af\n  const allowed = await avp.isAuthorized({\n    principal: session.user.id,\n    action: \"read\",\n    resource: \"orders\"\n  });\n\n  if (!allowed) {\n    redirect('/unauthorized');\n  }\n\n  // API \u547c\u3073\u51fa\u3057\uff08Access Token \u4ed8\u4e0e\uff09\n  const response = await fetch('https://api.example.com/orders', {\n    headers: {\n      'Authorization': `Bearer ${session.accessToken}`\n    }\n  });\n\n  return response.json();\n}\n</code></pre> <pre><code>// API (Spring Boot)\n@RestController\n@RequestMapping(\"/orders\")\npublic class OrderController {\n\n  @GetMapping\n  @PreAuthorize(\"hasAuthority('SCOPE_api/read')\")\n  public List&lt;Order&gt; getOrders(@AuthenticationPrincipal Jwt jwt) {\n    // JWT \u306f\u65e2\u306b\u691c\u8a3c\u6e08\u307f\n    String userId = jwt.getSubject();\n\n    // \u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\n    return orderService.findByUserId(userId);\n  }\n}\n</code></pre> <p>\u30e2\u30d0\u30a4\u30eb\u30a2\u30d7\u30ea\u306a\u3069 BFF \u975e\u7d4c\u7531\u30a2\u30af\u30bb\u30b9\u3078\u306e\u5bfe\u5fdc</p> <p>\u30e2\u30d0\u30a4\u30eb\u30a2\u30d7\u30ea\u306a\u3069 BFF \u3092\u7d4c\u7531\u3057\u306a\u3044\u76f4\u63a5 API \u30a2\u30af\u30bb\u30b9\u304c\u3042\u308b\u5834\u5408\u306f\u3001\u8a72\u5f53\u3059\u308b API \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3067 AVP \u306b\u3088\u308b\u8a73\u7d30\u306a\u8a8d\u53ef\u30c1\u30a7\u30c3\u30af\u3082\u5b9f\u88c5\u3057\u307e\u3059\uff08\u591a\u5c64\u9632\u5fa1\uff09\u3002\u3053\u306e\u5834\u5408\u3001API \u5074\u3067\u3082 BFF \u3068\u540c\u69d8\u306e\u8a8d\u53ef\u30ed\u30b8\u30c3\u30af\u3092\u6301\u3064\u3053\u3068\u306b\u306a\u308a\u307e\u3059\u3002</p>"},{"location":"auth/architecture/#_12","title":"\u9078\u629e\u80a2\u306e\u6982\u8981","text":"<p>\u2460 Cookie\u5171\u6709\u65b9\u5f0f</p> <ul> <li>\u89aa\u30c9\u30e1\u30a4\u30f3\u306b\u5171\u6709 Cookie \u3092\u8a2d\u5b9a\uff08\u4f8b: <code>.example.com</code>\uff09</li> <li>\u5168\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u3067\u30bb\u30c3\u30b7\u30e7\u30f3\u5171\u6709\u3001\u30b5\u30fc\u30d3\u30b9\u9593\u79fb\u52d5\u6642\u306e\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u306a\u3057</li> <li>\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u69cb\u6210\u304c\u524d\u63d0\u6761\u4ef6</li> </ul> <p>\u2461 \u30b5\u30a4\u30ec\u30f3\u30c8\u8a8d\u8a3c\u65b9\u5f0f\uff08<code>prompt=none</code>\uff09</p> <ul> <li>IdP\uff08HENNGE One\uff09\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u6d3b\u7528\u3057\u305f\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u30d9\u30fc\u30b9 SSO</li> <li>\u5404\u30b5\u30fc\u30d3\u30b9\u3067\u30db\u30b9\u30c8\u9650\u5b9a Cookie\u3001\u30b5\u30fc\u30d3\u30b9\u9593\u79fb\u52d5\u6642\u306f\u30b5\u30a4\u30ec\u30f3\u30c8\u8a8d\u8a3c\u7d4c\u7531</li> <li>\u30c9\u30e1\u30a4\u30f3\u69cb\u6210\u306b\u4f9d\u5b58\u3057\u306a\u3044</li> </ul> <p>\u2462 \u30ab\u30b9\u30bf\u30e0\u30c8\u30fc\u30af\u30f3\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u65b9\u5f0f</p> <ul> <li>\u5c02\u7528\u306e\u8a8d\u8a3c\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u3067\u30c8\u30fc\u30af\u30f3\u3092\u4e00\u5143\u7ba1\u7406</li> <li>\u30b5\u30fc\u30d3\u30b9\u9593\u3067\u30c8\u30fc\u30af\u30f3\u3092\u5f15\u304d\u56de\u3057\u3001\u5404\u30b5\u30fc\u30d3\u30b9\u3067\u691c\u8a3c</li> <li>\u5b8c\u5168\u306a\u4e2d\u592e\u96c6\u6a29\u578b\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3</li> </ul>"},{"location":"auth/architecture/#_13","title":"\u6bd4\u8f03\u8868","text":"\u6bd4\u8f03\u9805\u76ee \u2460 Cookie\u5171\u6709 \u2461 \u30b5\u30a4\u30ec\u30f3\u30c8\u8a8d\u8a3c \u2462 \u30c8\u30fc\u30af\u30f3GW \u6700\u9069 IdP \u30bb\u30c3\u30b7\u30e7\u30f3\u6d3b\u7528 \ud83d\udfe1 \u521d\u56de\u306e\u307f \u2705 \u6bce\u56de\u6d3b\u7528 \ud83d\udfe1 \u521d\u56de\u306e\u307f \u2461 \u30c9\u30e1\u30a4\u30f3\u5236\u7d04 \u274c \u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u5fc5\u9808\uff08<code>.example.com</code>\uff09 \u2705 \u5236\u7d04\u306a\u3057 \u2705 \u5236\u7d04\u306a\u3057 \u2461\u2462 \u5b9f\u88c5\u306e\u5bb9\u6613\u3055 \ud83d\udfe1 Cookie\u8a2d\u5b9a\u306e\u8abf\u6574 \u2705 NextAuth.js\u6a19\u6e96\uff08<code>prompt=none</code>\u8ffd\u52a0\u306e\u307f\uff09 \u274c GW\u5b9f\u88c5\u304c\u5fc5\u8981 \u2461 \u30b5\u30fc\u30d3\u30b9\u9593\u9077\u79fb \u2705 \u5373\u5ea7\uff080\u79d2\uff09 \ud83d\udfe1 \u30b5\u30a4\u30ec\u30f3\u30c8\u8a8d\u8a3c\u7d4c\u7531\uff08\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u767a\u751f\uff09 \ud83d\udfe1 \u30c8\u30fc\u30af\u30f3\u5f15\u304d\u56de\u3057\uff08\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u767a\u751f\uff09 \u2460 \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3 \ud83d\udfe1 Cookie\u7bc4\u56f2\u304c\u5e83\u3044 \u2705 \u30db\u30b9\u30c8\u9650\u5b9aCookie \u2705 \u30c8\u30fc\u30af\u30f3\u5206\u96e2 \u2461\u2462 \u30b9\u30b1\u30fc\u30e9\u30d3\u30ea\u30c6\u30a3 \ud83d\udfe1 \u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u5236\u7d04 \u2705 \u30b5\u30fc\u30d3\u30b9\u8ffd\u52a0\u5bb9\u6613 \ud83d\udfe1 GW \u304c SPOF \u2461 \u904b\u7528\u30b3\u30b9\u30c8 \u2705 \u6700\u5c0f\u9650 \u2705 \u6700\u5c0f\u9650 \u274c GW\u904b\u7528\u304c\u5fc5\u8981 \u2460\u2461 <p>\u63a8\u5968\u3059\u308b\u9078\u629e\u80a2: \u2705 \u2461 \u30b5\u30a4\u30ec\u30f3\u30c8\u8a8d\u8a3c\u65b9\u5f0f\uff08<code>prompt=none</code>\uff09</p> <p>\u9078\u629e\u7406\u7531:</p> <ul> <li>\u2705 IdP \u30bb\u30c3\u30b7\u30e7\u30f3\u6d3b\u7528: HENNGE One \u306e\u30ed\u30b0\u30a4\u30f3\u72b6\u614b\u3092\u6bce\u56de\u518d\u5229\u7528\u3001IdP \u5074\u3067\u306e\u30ed\u30b0\u30a2\u30a6\u30c8\u304c\u6b21\u56de\u30a2\u30af\u30bb\u30b9\u6642\u306b\u5168\u30b5\u30fc\u30d3\u30b9\u306b\u53cd\u6620</li> <li>\u2705 \u30c9\u30e1\u30a4\u30f3\u5236\u7d04\u306a\u3057: \u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u69cb\u6210\u306b\u4f9d\u5b58\u305b\u305a\u3001\u5c06\u6765\u7684\u306a\u30c9\u30e1\u30a4\u30f3\u5909\u66f4\u306b\u3082\u67d4\u8edf\u306b\u5bfe\u5fdc</li> <li>\u2705 \u5b9f\u88c5\u306e\u8efd\u3055: NextAuth.js \u6a19\u6e96\u30d5\u30ed\u30fc\u306b <code>prompt=none</code> \u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u8ffd\u52a0\u3059\u308b\u306e\u307f</li> <li>\u2705 \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3: \u5404\u30b5\u30fc\u30d3\u30b9\u304c\u30db\u30b9\u30c8\u9650\u5b9a Cookie \u3067\u72ec\u7acb\u3001Cookie \u6f0f\u6d29\u6642\u306e\u5f71\u97ff\u7bc4\u56f2\u3092\u6700\u5c0f\u5316</li> <li>\u2705 \u30b9\u30b1\u30fc\u30e9\u30d3\u30ea\u30c6\u30a3: \u65b0\u898f\u30b5\u30fc\u30d3\u30b9\u8ffd\u52a0\u6642\u3082\u540c\u3058\u30d5\u30ed\u30fc\u3092\u9069\u7528\u3001\u8ffd\u52a0\u5b9f\u88c5\u4e0d\u8981</li> <li>\ud83d\udfe1 \u30b5\u30fc\u30d3\u30b9\u9593\u9077\u79fb\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u304c\u767a\u751f\u3059\u308b\u304c\u3001UX\u4e0a\u306e\u554f\u984c\u306f\u9650\u5b9a\u7684</li> </ul> <p>\u2460 \u3092\u63a1\u7528\u3057\u306a\u3044\u7406\u7531:</p> <ul> <li>\u274c \u30c9\u30e1\u30a4\u30f3\u5236\u7d04: \u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u69cb\u6210\uff08<code>service-a.example.com</code>, <code>service-b.example.com</code>\uff09\u304c\u5fc5\u9808</li> <li>\u274c Cookie\u7bc4\u56f2: \u89aa\u30c9\u30e1\u30a4\u30f3\u5168\u4f53\u306b Cookie \u304c\u9001\u4fe1\u3055\u308c\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30ea\u30b9\u30af\u304c\u9ad8\u307e\u308b</li> <li>\u274c IdP \u30ed\u30b0\u30a2\u30a6\u30c8\u53cd\u6620: HENNGE One \u3067\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u3066\u3082\u3001\u30d6\u30e9\u30a6\u30b6\u4e0a\u306e\u5171\u6709 Cookie \u304c\u6b8b\u308b\u53ef\u80fd\u6027</li> <li>\u2139\ufe0f \u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u69cb\u6210\u304c\u78ba\u5b9a\u3057\u3066\u304a\u308a\u3001\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u306a\u3057\u306e\u9077\u79fb\u304c\u5fc5\u9808\u8981\u4ef6\u306e\u5834\u5408\u306f\u9078\u629e\u80a2\u306b\u306a\u308b</li> </ul> <p>\u2462 \u3092\u63a1\u7528\u3057\u306a\u3044\u7406\u7531:</p> <ul> <li>\u274c \u5b9f\u88c5\u30fb\u904b\u7528\u30b3\u30b9\u30c8: \u5c02\u7528\u306e\u30c8\u30fc\u30af\u30f3\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u306e\u5b9f\u88c5\u30fb\u904b\u7528\u304c\u5fc5\u8981</li> <li>\u274c SPOF\uff08\u5358\u4e00\u969c\u5bb3\u70b9\uff09: \u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u304c\u30c0\u30a6\u30f3\u3059\u308b\u3068\u5168\u30b5\u30fc\u30d3\u30b9\u304c\u5f71\u97ff\u3092\u53d7\u3051\u308b</li> <li>\u274c \u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u8907\u96d1\u5316: BFF + GW \u3067\u8cac\u52d9\u304c\u91cd\u8907\u3001\u30e1\u30f3\u30c6\u30ca\u30f3\u30b9\u6027\u304c\u4f4e\u4e0b</li> <li>\u2139\ufe0f \u65e2\u5b58\u306e\u8a8d\u8a3c\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4\u304c\u3042\u308b\u74b0\u5883\u3067\u306f\u9078\u629e\u80a2\u306b\u306a\u308b</li> </ul> \u2461 \u63a8\u5968\u65b9\u5f0f\u306e\u5b9f\u88c5\u8a73\u7d30 <p>\u8a8d\u8a3c\u30d5\u30ed\u30fc:</p> <ul> <li>Cognito \u2192 HENNGE One \u3078\u306e\u30b5\u30a4\u30ec\u30f3\u30c8\u30ea\u30c0\u30a4\u30ec\u30af\u30c8</li> <li>\u5404\u30b5\u30fc\u30d3\u30b9\u3067\u30db\u30b9\u30c8\u9650\u5b9a Cookie\uff08<code>service-a.example.com</code>, <code>service-b.example.com</code> \u306a\u3069\uff09</li> <li>SSO \u306f IdP \u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u4f9d\u5b58</li> </ul> <p>\u30e6\u30fc\u30b6\u30fc\u4f53\u9a13:</p> <pre><code>\u3010\u521d\u56de\u8a2a\u554f\u3011\n1. \u30b5\u30fc\u30d3\u30b9A \u306b\u30a2\u30af\u30bb\u30b9 \u2192 Cognito Hosted UI\uff08HENNGE One \u3078\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\uff09\n2. \u30e6\u30fc\u30b6\u30fc\u304c HENNGE One \u3067\u30ed\u30b0\u30a4\u30f3\uff08\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9 + \u30d1\u30b9\u30ef\u30fc\u30c9\uff09\n3. Cognito \u304c\u30c8\u30fc\u30af\u30f3\u3092\u767a\u884c\u3057\u30b5\u30fc\u30d3\u30b9A \u306e\u30da\u30fc\u30b8\u8868\u793a\n\n\u30102\u56de\u76ee\u4ee5\u964d\uff08\u540c\u4e00\u30b5\u30fc\u30d3\u30b9\uff09\u3011\n4. \u30b5\u30fc\u30d3\u30b9A \u306b\u30a2\u30af\u30bb\u30b9\n5. \u2192 Cognito \u306b `prompt=none` \u3067\u30ea\u30c0\u30a4\u30ec\u30af\u30c8 \u2192 \u80cc\u5f8c\u3067 HENNGE One \u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u518d\u5229\u7528\n6. \u2192 \u30da\u30fc\u30b8\u8868\u793a\n\n\u3010\u30b5\u30fc\u30d3\u30b9\u9593\u79fb\u52d5\u3011\n7. \u30b5\u30fc\u30d3\u30b9A \u3067\u4f5c\u696d\u4e2d\n8. \u30b5\u30fc\u30d3\u30b9B \u3078\u306e\u30ea\u30f3\u30af\u3092\u30af\u30ea\u30c3\u30af\n9. \u2192 \u30b5\u30a4\u30ec\u30f3\u30c8\u8a8d\u8a3c\u7d4c\u7531\u3067 Cognito/HENNGE One \u3092\u5f80\u5fa9\u3057\u30b5\u30fc\u30d3\u30b9B \u3078\u9077\u79fb\n</code></pre> <p>NextAuth.js \u8a2d\u5b9a\u4f8b:</p> <pre><code>// pages/api/auth/[...nextauth].ts\nimport NextAuth from \"next-auth\"\nimport CognitoProvider from \"next-auth/providers/cognito\"\n\nexport default NextAuth({\n  providers: [\n    CognitoProvider({\n      clientId: process.env.COGNITO_CLIENT_ID,\n      clientSecret: process.env.COGNITO_CLIENT_SECRET,\n      issuer: process.env.COGNITO_ISSUER,\n      authorization: {\n        params: {\n          prompt: \"none\" // \u30b5\u30a4\u30ec\u30f3\u30c8\u8a8d\u8a3c\u3092\u6709\u52b9\u5316\n        }\n      }\n    })\n  ],\n  session: {\n    strategy: \"database\" // \u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30c8\u30a2\u65b9\u5f0f\uff08\u691c\u8a0e2\u306e\u63a8\u5968\u65b9\u5f0f\uff09\n  }\n})\n</code></pre> <p>\u30e6\u30fc\u30b6\u30fc\u5207\u308a\u66ff\u3048\u6642\u306e\u52d5\u4f5c:</p> <ul> <li>\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5358\u4f53\u306e\u30ed\u30b0\u30a2\u30a6\u30c8\u6a5f\u80fd\u306f\u63d0\u4f9b\u305b\u305a\u3001HENNGE One \u304b\u3089\u30b5\u30a4\u30f3\u30a2\u30a6\u30c8\u3057\u3001Cognito\uff08Hosted UI\uff09\u306b\u518d\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3082\u3089\u3046\u904b\u7528</li> <li>HENNGE One / Cognito \u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u304c\u7834\u68c4\u3055\u308c\u308b\u3068\u3001\u6b21\u56de\u30b5\u30a4\u30c8\u30a2\u30af\u30bb\u30b9\u6642\u306b BFF \u304c\u672a\u8a8d\u8a3c\u3068\u5224\u65ad\u3057\u65b0\u3057\u3044\u30e6\u30fc\u30b6\u30fc\u3067\u30b5\u30a4\u30ec\u30f3\u30c8\u8a8d\u8a3c\u306b\u9077\u79fb</li> <li>\u30d6\u30e9\u30a6\u30b6\u306b\u6b8b\u308b BFF \u30bb\u30c3\u30b7\u30e7\u30f3 Cookie \u306f\u6b21\u306e\u30b5\u30a4\u30ec\u30f3\u30c8\u8a8d\u8a3c\u5b8c\u4e86\u6642\u306b\u65b0\u3057\u3044\u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u3067\u4e0a\u66f8\u304d</li> <li>IdP \u5074\u306e\u30ed\u30b0\u30a2\u30a6\u30c8\u5b8c\u4e86\uff08HENNGE One \u3068 Cognito \u53cc\u65b9\uff09\u3092\u78ba\u8a8d\u3057\u3066\u304b\u3089\u30b5\u30a4\u30c8\u306b\u623b\u308b\u904b\u7528\u3092\u30e6\u30fc\u30b6\u30fc\u306b\u6848\u5185</li> </ul> <p>\u30b5\u30a4\u30ec\u30f3\u30c8\u8a8d\u8a3c\u3068\u306f</p> <p>\u30b5\u30a4\u30ec\u30f3\u30c8\u8a8d\u8a3c\uff08Silent Authentication\uff09 \u306f\u3001OIDC\u306e <code>prompt=none</code> \u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u4f7f\u7528\u3057\u3066\u3001\u30e6\u30fc\u30b6\u30fc\u306b\u8a8d\u8a3c\u753b\u9762\u3092\u8868\u793a\u305b\u305a\u306b\u30d0\u30c3\u30af\u30b0\u30e9\u30a6\u30f3\u30c9\u3067\u81ea\u52d5\u7684\u306b\u8a8d\u8a3c\u3092\u884c\u3046\u4ed5\u7d44\u307f\u3067\u3059\u3002IdP\uff08HENNGE One\uff09\u5074\u306b\u30bb\u30c3\u30b7\u30e7\u30f3\u304c\u5b58\u5728\u3059\u308b\u5834\u5408\u3001\u30e6\u30fc\u30b6\u30fc\u64cd\u4f5c\u306a\u3057\u3067\u65b0\u3057\u3044\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u5f97\u3067\u304d\u307e\u3059\u3002</p> <p>\u30c8\u30fc\u30af\u30f3\u30d5\u30ed\u30fc\u306e\u6574\u7406</p> <p>NextAuth.js \u304b\u3089\u306f Amazon Cognito \u306e OIDC \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u5229\u7528\u3057\u307e\u3059\u3002Cognito \u306f HENNGE One \u3092\u5916\u90e8 IdP \u3068\u3057\u3066\u30d5\u30a7\u30c7\u30ec\u30fc\u30b7\u30e7\u30f3\u3057\u3066\u3044\u308b\u305f\u3081\u3001<code>prompt=none</code> \u3067 Cognito \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308b\u3068\u3001\u5fc5\u8981\u306b\u5fdc\u3058\u3066 HENNGE One \u3078\u30b5\u30a4\u30ec\u30f3\u30c8\u306b\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\u3057\u3001\u65e2\u5b58\u306e\u793e\u5185\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u518d\u5229\u7528\u3057\u307e\u3059\u3002</p>"},{"location":"auth/architecture/#_14","title":"\ud83c\udfaf \u4e3b\u8981\u306a\u8a2d\u8a08\u6c7a\u5b9a\u306e\u307e\u3068\u3081","text":"\u63a1\u7528\u3057\u305f\u65b9\u5f0f\u306e\u4e00\u89a7 \u691c\u8a0e\u9805\u76ee \u63a1\u7528\u3057\u305f\u65b9\u5f0f \u4e3b\u306a\u7406\u7531 \u8a8d\u53ef\u65b9\u5f0f AVP \u306b\u3088\u308b\u5b9f\u884c\u6642\u6a29\u9650\u30c1\u30a7\u30c3\u30af JWT \u30b5\u30a4\u30ba\u6700\u5c0f\u5316\u3001\u5373\u6642\u53cd\u6620\u3001\u67d4\u8edf\u6027\u3001\u76e3\u67fb\u30ed\u30b0 \u30d6\u30e9\u30a6\u30b6\u21d4BFF\u8a8d\u8a3c\u60c5\u5831\u7ba1\u7406 HttpOnly Cookie + \u30b5\u30fc\u30d0\u30fc\u5074\u30bb\u30c3\u30b7\u30e7\u30f3 XSS\u5bfe\u7b56\u3001\u30c8\u30fc\u30af\u30f3\u975e\u9732\u51fa\u3001NextAuth.js\u6a19\u6e96 \u8a8d\u8a3c\u30fb\u8a8d\u53ef\u5b9f\u65bd\u7b87\u6240 BFF\u30fbAPI \u591a\u5c64\u9632\u5fa1 \u65e9\u671f\u30ea\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3001\u591a\u5c64\u9632\u5fa1\u3001\u67d4\u8edf\u6027 SSO \u5b9f\u88c5 \u30b5\u30a4\u30ec\u30f3\u30c8\u8a8d\u8a3c\uff08prompt=none\uff09 IdP \u30bb\u30c3\u30b7\u30e7\u30f3\u6d3b\u7528\u3001\u30c9\u30e1\u30a4\u30f3\u5236\u7d04\u306a\u3057\u3001\u5b9f\u88c5\u8efd\u5fae \u3053\u306e\u69cb\u6210\u306e\u5229\u70b9 <p>\u2705 \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3</p> <ul> <li>JWT \u30b5\u30a4\u30ba\u6700\u5c0f\u5316\uff08<code>userId</code> + <code>groups</code> \u306e\u307f\uff09\u3067\u8a73\u7d30\u6a29\u9650\u306f AVP \u3067\u7ba1\u7406</li> <li>BFF \u3068 API \u306e\u591a\u5c64\u9632\u5fa1\u3001\u30c8\u30fc\u30af\u30f3\u3092\u30d6\u30e9\u30a6\u30b6\u306b\u9732\u51fa\u3055\u305b\u306a\u3044\u8a2d\u8a08</li> <li>\u6a29\u9650\u5909\u66f4\u30fb\u30ed\u30b0\u30a2\u30a6\u30c8\u6642\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u5373\u6642\u7121\u52b9\u5316</li> <li>CloudWatch Logs \u306b\u3088\u308b\u76e3\u67fb\u8a3c\u8de1</li> </ul> <p>\u2705 \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9\u30fb\u30b3\u30b9\u30c8</p> <ul> <li>Redis \u30ad\u30e3\u30c3\u30b7\u30e5\u306b\u3088\u308b\u8a8d\u53ef\u30c1\u30a7\u30c3\u30af\u306e\u9ad8\u901f\u5316</li> <li>AVP \u306e\u5f93\u91cf\u8ab2\u91d1\u306f\u975e\u5e38\u306b\u5b89\u4fa1\uff08200 DAU \u00d7 200 API \u30b3\u30fc\u30eb/\u65e5\u3067\u7d04 $6/\u6708\uff09</li> <li>\u6c34\u5e73\u30b9\u30b1\u30fc\u30eb\u30a2\u30a6\u30c8\u5bfe\u5fdc</li> </ul> <p>\u2705 \u958b\u767a\u30fb\u904b\u7528\u52b9\u7387</p> <ul> <li>NextAuth.js \u6d3b\u7528\u306b\u3088\u308b\u5b9f\u88c5\u306e\u7c21\u6f54\u3055</li> <li>BFF \u3067\u306e\u65e9\u671f\u30ea\u30b8\u30a7\u30af\u30b7\u30e7\u30f3\u3001\u8cac\u52d9\u306e\u660e\u78ba\u306a\u5206\u96e2</li> <li>\u30c8\u30fc\u30af\u30f3\u66f4\u65b0\u30fbCSRF \u5bfe\u7b56\u30fb\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406\u306e\u81ea\u52d5\u5316</li> </ul> <p>\u2705 \u62e1\u5f35\u6027</p> <ul> <li>\u65b0\u898f\u30b5\u30fc\u30d3\u30b9\u8ffd\u52a0\u304c\u5bb9\u6613\uff08\u540c\u3058\u8a8d\u8a3c\u30d5\u30ed\u30fc\u3092\u9069\u7528\uff09</li> <li>Cedar \u30dd\u30ea\u30b7\u30fc\u66f4\u65b0\u306e\u307f\u3067\u6a29\u9650\u8981\u4ef6\u5909\u66f4\u306b\u5bfe\u5fdc</li> </ul>"},{"location":"auth/basics/","title":"\u8a8d\u8a3c\u30fb\u8a8d\u53ef\u306e\u57fa\u790e\u77e5\u8b58","text":"<p>\ud83c\udfaf \u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u76ee\u7684 \u8a8d\u8a3c\u30fb\u8a8d\u53ef\u306e\u57fa\u672c\u6982\u5ff5\u304b\u3089\u3001OAuth 2.0/OpenID Connect\u306e\u4ed5\u7d44\u307f\u307e\u3067\u3001\u4f53\u7cfb\u7684\u306b\u7406\u89e3\u3067\u304d\u307e\u3059\u3002\u5b9f\u88c5\u306b\u5fc5\u8981\u306a\u672c\u8cea\u7684\u306a\u77e5\u8b58\u306b\u7d5e\u308a\u3001\u7c21\u6f54\u306b\u89e3\u8aac\u3057\u307e\u3059\u3002</p>"},{"location":"auth/basics/#_2","title":"\ud83d\udcda \u95a2\u9023\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8","text":"<ul> <li>\u524d\u63d0\u77e5\u8b58: Web\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u57fa\u790e - \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u30fb\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b5\u30a4\u30c9\u306e\u9055\u3044\u3001\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u30d1\u30bf\u30fc\u30f3</li> <li>\u6b21\u306e\u30b9\u30c6\u30c3\u30d7: \u5b9f\u88c5\u30ac\u30a4\u30c9 - Next.js + Spring Boot + Cognito \u3067\u306e\u5b9f\u88c5</li> </ul>"},{"location":"auth/basics/#_3","title":"\u8a8d\u8a3c\u3068\u8a8d\u53ef","text":"\u8a8d\u8a3c(Authentication) - \u300c\u8ab0\u304b\u300d\u3092\u78ba\u8a8d <p>\u300c\u3042\u306a\u305f\u306f\u8ab0\u3067\u3059\u304b?\u300d \u3068\u3044\u3046\u554f\u3044\u306b\u7b54\u3048\u308b\u30d7\u30ed\u30bb\u30b9\u3002</p> <ul> <li>\u4f8b: \u30ed\u30b0\u30a4\u30f3\u3001\u30d1\u30b9\u30ef\u30fc\u30c9\u5165\u529b</li> <li>HTTP \u30b9\u30c6\u30fc\u30bf\u30b9: <code>401 Unauthorized</code></li> </ul> \u8a8d\u53ef(Authorization) - \u300c\u4f55\u304c\u3067\u304d\u308b\u304b\u300d\u3092\u78ba\u8a8d <p>\u300c\u3042\u306a\u305f\u306f\u4f55\u304c\u3067\u304d\u307e\u3059\u304b?\u300d \u3068\u3044\u3046\u554f\u3044\u306b\u7b54\u3048\u308b\u30d7\u30ed\u30bb\u30b9\u3002</p> <ul> <li>\u4f8b: \u7ba1\u7406\u8005\u753b\u9762\u3078\u306e\u30a2\u30af\u30bb\u30b9\u3001\u30d5\u30a1\u30a4\u30eb\u306e\u7de8\u96c6\u6a29\u9650</li> <li>HTTP \u30b9\u30c6\u30fc\u30bf\u30b9: <code>403 Forbidden</code></li> </ul> \u5b9f\u969b\u306e\u6d41\u308c"},{"location":"auth/basics/#authentication","title":"\u8a8d\u8a3c(Authentication)\u306e\u6d41\u308c","text":"<p>\u30e6\u30fc\u30b6\u30fc\u304c\u30ed\u30b0\u30a4\u30f3\u753b\u9762\u3067ID\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b\u3057\u307e\u3059\u3002\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u305d\u306e\u60c5\u5831\u304c\u6b63\u3057\u3044\u304b\u3092\u78ba\u8a8d\u3057\u3001\u6b63\u3057\u3051\u308c\u3070\u8a8d\u8a3c\u6210\u529f\u3001\u9593\u9055\u3063\u3066\u3044\u308c\u3070<code>401 Unauthorized</code>\u30a8\u30e9\u30fc\u3092\u8fd4\u3057\u307e\u3059\u3002</p> <pre><code>sequenceDiagram\n    participant User as \u30e6\u30fc\u30b6\u30fc\n    participant App as \u30a2\u30d7\u30ea\n\n    User-&gt;&gt;App: \u30ed\u30b0\u30a4\u30f3(ID/\u30d1\u30b9\u30ef\u30fc\u30c9)\n    alt \u8a8d\u8a3c\u6210\u529f\n        App-&gt;&gt;User: \u2705 \u8a8d\u8a3c\u6210\u529f&lt;br/&gt;(\u30db\u30fc\u30e0\u753b\u9762\u3078\u9077\u79fb\u7b49\u306e\u51e6\u7406)\n    else \u8a8d\u8a3c\u5931\u6557\n        App-&gt;&gt;User: \u274c 401 Unauthorized&lt;br/&gt;(ID/\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u9593\u9055\u3063\u3066\u3044\u308b)\n    end</code></pre>"},{"location":"auth/basics/#authorization","title":"\u8a8d\u53ef(Authorization)\u306e\u6d41\u308c","text":"<p>\u8a8d\u8a3c\u5f8c\u3001\u30e6\u30fc\u30b6\u30fc\u304c\u7279\u5b9a\u306e\u30ea\u30bd\u30fc\u30b9\uff08\u30c7\u30fc\u30bf\u3084\u6a5f\u80fd\uff09\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3088\u3046\u3068\u3057\u307e\u3059\u3002\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306f\u305d\u306e\u30e6\u30fc\u30b6\u30fc\u306b\u6a29\u9650\u304c\u3042\u308b\u304b\u3092\u30c1\u30a7\u30c3\u30af\u3057\u3001\u6a29\u9650\u304c\u3042\u308c\u3070\u30c7\u30fc\u30bf\u3092\u8868\u793a\u3001\u306a\u3051\u308c\u3070<code>403 Forbidden</code>\u30a8\u30e9\u30fc\u3092\u8fd4\u3057\u307e\u3059\u3002</p> <pre><code>sequenceDiagram\n    participant User as \u30e6\u30fc\u30b6\u30fc\n    participant App as \u30a2\u30d7\u30ea\n\n    User-&gt;&gt;App: \u30ea\u30bd\u30fc\u30b9\u306b\u30a2\u30af\u30bb\u30b9\n    App-&gt;&gt;App: \u6a29\u9650\u30c1\u30a7\u30c3\u30af(\u8a8d\u53ef)\n    alt \u6a29\u9650\u3042\u308a\n        App-&gt;&gt;User: \u2705 \u30c7\u30fc\u30bf\u8868\u793a&lt;br/&gt;(\u6a29\u9650\u304c\u3042\u308b)\n    else \u6a29\u9650\u306a\u3057\n        App-&gt;&gt;User: \u274c 403 Forbidden&lt;br/&gt;(\u6a29\u9650\u304c\u306a\u3044)\n    end</code></pre>"},{"location":"auth/basics/#vs","title":"\u30bb\u30c3\u30b7\u30e7\u30f3 vs \u30c8\u30fc\u30af\u30f3","text":"\u30bb\u30c3\u30b7\u30e7\u30f3\u30d9\u30fc\u30b9\u8a8d\u8a3c <pre><code>graph LR\n    Browser[\u30d6\u30e9\u30a6\u30b6] --&gt;|Cookie: session_id| Server[\u30b5\u30fc\u30d0\u30fc]\n    Server --&gt;|\u30bb\u30c3\u30b7\u30e7\u30f3\u53d6\u5f97| Store[(\u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30c8\u30a2)]</code></pre> <p>\u7279\u5fb4:</p> <ul> <li>\u30b5\u30fc\u30d0\u30fc\u5074\u3067\u30bb\u30c3\u30b7\u30e7\u30f3\u60c5\u5831\u3092\u4fdd\u6301(Stateful)</li> <li>\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u306b\u306f\u30bb\u30c3\u30b7\u30e7\u30f3ID\u306e\u307f\u9001\u4fe1</li> <li>\u8a8d\u8a3c\u81ea\u4f53\u306f\u5916\u90e8IdP\u306b\u59d4\u8b72\u53ef\u80fd\uff08\u63a8\u5968\uff09</li> </ul> <p>\u30e1\u30ea\u30c3\u30c8:</p> <ul> <li>\u2705 \u30b5\u30fc\u30d0\u30fc\u3067\u5373\u5ea7\u306b\u7121\u52b9\u5316\u53ef\u80fd</li> <li>\u2705 \u30bb\u30c3\u30b7\u30e7\u30f3\u60c5\u5831\u3092\u5b8c\u5168\u7ba1\u7406</li> </ul> <p>\u30c7\u30e1\u30ea\u30c3\u30c8:</p> <ul> <li>\u274c \u30b9\u30c8\u30ec\u30fc\u30b8\u304c\u5fc5\u8981</li> <li>\u274c \u6c34\u5e73\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u6642\u306b\u5171\u6709\u304c\u5fc5\u8981</li> </ul> \u30c8\u30fc\u30af\u30f3\u30d9\u30fc\u30b9\u8a8d\u8a3c(JWT) <pre><code>graph LR\n    Browser[\u30d6\u30e9\u30a6\u30b6] --&gt;|\"Bearer&lt;br/&gt;Token\"| Server[\u30b5\u30fc\u30d0\u30fc]\n    Server --&gt;|\u516c\u958b\u9375\u53d6\u5f97| AuthServer[\u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc]\n    Server --&gt;|\u7f72\u540d\u691c\u8a3c| Server</code></pre> <p>\u7279\u5fb4:</p> <ul> <li>\u30b5\u30fc\u30d0\u30fc\u306f\u72b6\u614b\u3092\u6301\u305f\u306a\u3044(Stateless)</li> <li>\u30c8\u30fc\u30af\u30f3\u81ea\u4f53\u306b\u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u3092\u542b\u3080</li> </ul> <p>JWT \u306e\u69cb\u9020:</p> <pre><code>Header.Payload.Signature\n</code></pre> <ul> <li>Header: \u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u60c5\u5831(\u4f8b: HS256, RS256)</li> <li>Payload: \u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u3001\u6709\u52b9\u671f\u9650</li> <li>Signature: \u6539\u3056\u3093\u691c\u77e5\u7528\u306e\u7f72\u540d</li> </ul> <p>\u30e1\u30ea\u30c3\u30c8:</p> <ul> <li>\u2705 \u30b9\u30c6\u30fc\u30c8\u30ec\u30b9(\u72b6\u614b\u4e0d\u8981)</li> <li>\u2705 \u6c34\u5e73\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u304c\u5bb9\u6613</li> <li>\u2705 \u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u9593\u3067\u5171\u6709\u53ef\u80fd</li> </ul> <p>\u30c7\u30e1\u30ea\u30c3\u30c8:</p> <ul> <li>\u274c \u5373\u5ea7\u306a\u7121\u52b9\u5316\u304c\u56f0\u96e3</li> <li>\u274c \u30c8\u30fc\u30af\u30f3\u30b5\u30a4\u30ba\u304c\u5927\u304d\u3044</li> </ul> \u6bd4\u8f03\u8868 \u9805\u76ee \u30bb\u30c3\u30b7\u30e7\u30f3 \u30c8\u30fc\u30af\u30f3(JWT) \u72b6\u614b\u7ba1\u7406 Stateful Stateless \u4fdd\u5b58\u5834\u6240(\u30b5\u30fc\u30d0\u30fc) \u5fc5\u8981(Redis\u7b49) \u4e0d\u8981 \u7121\u52b9\u5316 \u5373\u5ea7\u306b\u53ef\u80fd \u56f0\u96e3 \u6c34\u5e73\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0 \u5171\u6709\u30b9\u30c8\u30a2\u5fc5\u8981 \u5bb9\u6613 \u5178\u578b\u7684\u306a\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3 \u30e2\u30ce\u30ea\u30b7\u30c3\u30af\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0 SPA\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9 \u69cb\u6210\u4f8b \u30d5\u30ed\u30f3\u30c8+\u30d0\u30c3\u30af\u7d71\u5408(Next.js SSR, Rails, Django) \u9759\u7684HTML + API\u5206\u96e2(React + REST API) \u8a8d\u8a3c\u65b9\u5f0f Cookie Authorization Header \u306a\u305cJWT\uff08\u30c8\u30fc\u30af\u30f3\uff09\u306e\u7121\u52b9\u5316\u306f\u56f0\u96e3\u306a\u306e\u304b\uff1f <p>\u7d50\u8ad6: JWT\u306f\u7f72\u540d\u691c\u8a3c\u306e\u307f\u3067\u8a8d\u8a3c\u3059\u308b\u305f\u3081\u3001\u767a\u884c\u5f8c\u306e\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u308a\u6d88\u305b\u307e\u305b\u3093</p> \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3: \u3069\u3061\u3089\u304c\u5b89\u5168\uff1f <p>\u7d50\u8ad6: \u9069\u5207\u306b\u5b9f\u88c5\u3059\u308c\u3070\u4e21\u65b9\u3068\u3082\u5b89\u5168\u3067\u3059</p> <p>\u3069\u3061\u3089\u3082\u30ea\u30af\u30a8\u30b9\u30c8\u3054\u3068\u306b\u8a8d\u8a3c\u60c5\u5831\u3092\u9001\u4fe1\u3059\u308b\u305f\u3081\u3001\u3053\u306e\u70b9\u3067\u306e\u30ea\u30b9\u30af\u306f\u540c\u3058\u3067\u3059\u3002</p>"},{"location":"auth/basics/#_4","title":"\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u4fdd\u5b58\u5834\u6240","text":"<p>Web\u30b5\u30fc\u30d0\u30fc\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406\u306f\u3001\u4fdd\u5b58\u5834\u6240\u306b\u3088\u3063\u3066\u7279\u6027\u304c\u7570\u306a\u308a\u307e\u3059\u3002</p> 1. \u30e1\u30e2\u30ea(\u958b\u767a\u74b0\u5883\u5411\u3051) <p>\u591a\u304f\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\u8a2d\u5b9a\u3002\u958b\u767a\u6642\u3084\u5358\u4e00\u30b5\u30fc\u30d0\u30fc\u69cb\u6210\u3067\u4f7f\u7528\u3002</p> <p>\u30e1\u30ea\u30c3\u30c8:</p> <ul> <li>\u2705 \u9ad8\u901f\u30a2\u30af\u30bb\u30b9</li> <li>\u2705 \u8a2d\u5b9a\u4e0d\u8981</li> </ul> <p>\u30c7\u30e1\u30ea\u30c3\u30c8:</p> <ul> <li>\u274c \u30b5\u30fc\u30d0\u30fc\u518d\u8d77\u52d5\u3067\u30bb\u30c3\u30b7\u30e7\u30f3\u6d88\u5931</li> <li>\u274c \u6c34\u5e73\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u4e0d\u53ef</li> <li>\u274c \u30e1\u30e2\u30ea\u67af\u6e07\u306e\u30ea\u30b9\u30af</li> </ul> <p>\u9069\u7528: \u958b\u767a\u74b0\u5883\u3001\u5358\u4e00\u30b5\u30fc\u30d0\u30fc\u69cb\u6210</p> 2. \u30a4\u30f3\u30e1\u30e2\u30eaDB - Redis(\u672c\u756a\u63a8\u5968) <p>**\u6700\u3082\u4e00\u822c\u7684\u306a\u672c\u756a\u74b0\u5883\u306e\u69cb\u6210\u3002**\u9ad8\u901f\u3067\u6c38\u7d9a\u5316\u3082\u53ef\u80fd\u3002</p> <p>\u30e1\u30ea\u30c3\u30c8:</p> <ul> <li>\u2705 \u8d85\u9ad8\u901f\uff08\u30e1\u30e2\u30ea\u30d9\u30fc\u30b9\uff09</li> <li>\u2705 \u6c34\u5e73\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u5bfe\u5fdc</li> <li>\u2705 \u6c38\u7d9a\u5316\u53ef\u80fd</li> <li>\u2705 TTL\uff08\u81ea\u52d5\u524a\u9664\uff09\u30b5\u30dd\u30fc\u30c8</li> </ul> <p>\u30c7\u30e1\u30ea\u30c3\u30c8:</p> <ul> <li>\u26a0\ufe0f \u5225\u9014Redis\u74b0\u5883\u304c\u5fc5\u8981</li> </ul> <p>\u9069\u7528: \u672c\u756a\u74b0\u5883\u3001\u8907\u6570\u30b5\u30fc\u30d0\u30fc\u69cb\u6210</p> 3. \u30a4\u30f3\u30e1\u30e2\u30eaDB - Memcached <p>Redis\u3068\u4f3c\u3066\u3044\u308b\u304c\u3001\u6c38\u7d9a\u5316\u6a5f\u80fd\u304c\u306a\u3044\u30b7\u30f3\u30d7\u30eb\u306a\u30ad\u30e3\u30c3\u30b7\u30e5\u3002</p> <p>Redis\u3068\u306e\u9055\u3044:</p> \u9805\u76ee Redis Memcached \u6c38\u7d9a\u5316 \u2705 \u53ef\u80fd \u274c \u4e0d\u53ef \u30c7\u30fc\u30bf\u69cb\u9020 \u8c4a\u5bcc(\u30ea\u30b9\u30c8\u3001\u30bb\u30c3\u30c8\u7b49) \u30b7\u30f3\u30d7\u30eb(Key-Value) \u30ec\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3 \u2705 \u5bfe\u5fdc \u274c \u975e\u5bfe\u5fdc \u7528\u9014 \u30bb\u30c3\u30b7\u30e7\u30f3\u3001\u30ad\u30e3\u30c3\u30b7\u30e5 \u5358\u7d14\u306a\u30ad\u30e3\u30c3\u30b7\u30e5 <p>\u9069\u7528: \u30b7\u30f3\u30d7\u30eb\u306a\u30ad\u30e3\u30c3\u30b7\u30e5\u7528\u9014\u3001\u6c38\u7d9a\u5316\u4e0d\u8981\u306a\u5834\u5408</p> 4. RDB - PostgreSQL\u3001MySQL\u7b49 <p>\u30ea\u30ec\u30fc\u30b7\u30e7\u30ca\u30eb\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u4fdd\u5b58\u3002</p> <p>\u30e1\u30ea\u30c3\u30c8:</p> <ul> <li>\u2705 \u65e2\u5b58DB\u3092\u6d3b\u7528\u53ef\u80fd</li> <li>\u2705 \u6c38\u7d9a\u5316\u30fb\u30d0\u30c3\u30af\u30a2\u30c3\u30d7\u304c\u5bb9\u6613</li> <li>\u2705 \u30c8\u30e9\u30f3\u30b6\u30af\u30b7\u30e7\u30f3\u5bfe\u5fdc</li> </ul> <p>\u30c7\u30e1\u30ea\u30c3\u30c8:</p> <ul> <li>\u274c Redis\u3088\u308a\u9045\u3044</li> <li>\u274c \u983b\u7e41\u306a\u8aad\u307f\u66f8\u304d\u3067DB\u8ca0\u8377</li> </ul> <p>\u9069\u7528: \u65e2\u306bRDB\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u74b0\u5883\u3001\u53b3\u5bc6\u306a\u30c7\u30fc\u30bf\u7ba1\u7406\u304c\u5fc5\u8981</p> 5. NoSQL - MongoDB\u3001DynamoDB\u7b49 <p>NoSQL\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u306b\u30bb\u30c3\u30b7\u30e7\u30f3\u3092\u4fdd\u5b58\u3002</p> <p>MongoDB:</p> <ul> <li>\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u6307\u5411DB</li> <li>TTL\u6a5f\u80fd\u3067\u30bb\u30c3\u30b7\u30e7\u30f3\u81ea\u52d5\u524a\u9664\u53ef\u80fd</li> <li>\u65e2\u306bMongoDB\u3092\u4f7f\u7528\u3057\u3066\u3044\u308b\u5834\u5408\u306b\u6700\u9069</li> </ul> <p>DynamoDB(AWS):</p> <ul> <li>AWS\u306e\u30de\u30cd\u30fc\u30b8\u30c9NoSQL</li> <li>TTL\u6a5f\u80fd\u3042\u308a</li> <li>AWS\u74b0\u5883\u306a\u3089\u904b\u7528\u304c\u5bb9\u6613</li> <li>\u30b5\u30fc\u30d0\u30fc\u30ec\u30b9\u69cb\u6210\u306b\u9069\u5408</li> </ul> <p>\u9069\u7528: NoSQL\u74b0\u5883\u3001AWS/\u30af\u30e9\u30a6\u30c9\u74b0\u5883</p>"},{"location":"auth/basics/#_5","title":"\u6c34\u5e73\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u6642\u306e\u8ab2\u984c","text":"<pre><code>graph TB\n    User[\u30e6\u30fc\u30b6\u30fc]\n    LB[\u30ed\u30fc\u30c9\u30d0\u30e9\u30f3\u30b5\u30fc]\n    Server1[Server 1&lt;br/&gt;\u30e1\u30e2\u30ea]\n    Server2[Server 2&lt;br/&gt;\u30e1\u30e2\u30ea]\n    Redis[(Redis&lt;br/&gt;\u5171\u6709)]\n\n    User --&gt;|1\u56de\u76ee| LB\n    LB --&gt; Server1\n    User --&gt;|2\u56de\u76ee| LB\n    LB --&gt; Server2\n\n    Server1 &lt;-.-&gt;|\u274c \u5171\u6709\u4e0d\u53ef| Server2\n    Server1 &lt;--&gt;|\u2705 \u5171\u6709\u53ef\u80fd| Redis\n    Server2 &lt;--&gt;|\u2705 \u5171\u6709\u53ef\u80fd| Redis</code></pre> <p>\u554f\u984c: \u30e1\u30e2\u30ea\u4fdd\u5b58\u3067\u306f\u3001\u5225\u30b5\u30fc\u30d0\u30fc\u3067\u30bb\u30c3\u30b7\u30e7\u30f3\u53d6\u5f97\u4e0d\u53ef</p> <p>\u89e3\u6c7a\u7b56:</p> <ul> <li>\u2705 Redis\u7b49\u306e\u5916\u90e8\u30b9\u30c8\u30ec\u30fc\u30b8(\u63a8\u5968)</li> <li>\u26a0\ufe0f \u30b9\u30c6\u30a3\u30c3\u30ad\u30fc\u30bb\u30c3\u30b7\u30e7\u30f3(\u975e\u63a8\u5968: \u969c\u5bb3\u6642\u306b\u554f\u984c)</li> </ul> <p>\u74b0\u5883\u5225\u306e\u63a8\u5968:</p> \u74b0\u5883 \u63a8\u5968\u4fdd\u5b58\u5148 \u7406\u7531 \u958b\u767a\u74b0\u5883 \u30e1\u30e2\u30ea \u30b7\u30f3\u30d7\u30eb\u3001\u9ad8\u901f \u672c\u756a(\u5358\u4e00\u30b5\u30fc\u30d0\u30fc) \u30e1\u30e2\u30ea or Redis \u8981\u4ef6\u6b21\u7b2c \u672c\u756a(\u8907\u6570\u30b5\u30fc\u30d0\u30fc) Redis \u6c34\u5e73\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u5fc5\u9808 \u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9 JWT(\u30b9\u30c6\u30fc\u30c8\u30ec\u30b9) \u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30c8\u30a2\u4e0d\u8981"},{"location":"auth/basics/#_6","title":"\u4ed5\u7d44\u307f\u306e\u9055\u3044","text":"\u9805\u76ee \u30bb\u30c3\u30b7\u30e7\u30f3 JWT \u691c\u8a3c\u65b9\u6cd5 \u30b5\u30fc\u30d0\u30fc\u304c\u30b9\u30c8\u30a2\u3092\u78ba\u8a8d \u30b5\u30fc\u30d0\u30fc\u304c\u7f72\u540d\u3092\u78ba\u8a8d \u7121\u52b9\u5316 \u30b9\u30c8\u30a2\u304b\u3089\u524a\u9664 \u274c \u524a\u9664\u3059\u308b\u5834\u6240\u304c\u306a\u3044 \u30b9\u30c6\u30fc\u30c8\u30ec\u30b9 \u274c (Stateful) \u2705 (Stateless)"},{"location":"auth/basics/#aws-cognito","title":"AWS Cognito \u306e\u5834\u5408","text":"<p>Cognito\u306e<code>GlobalSignOut</code>API:</p> <pre><code>aws cognito-idp admin-user-global-sign-out \\\n  --user-pool-id us-east-1_XXXXXXXXX \\\n  --username user@example.com\n</code></pre> <p>\u5b9f\u969b\u306b\u7121\u52b9\u5316\u3055\u308c\u308b\u3082\u306e:</p> <ul> <li>\u2705 \u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u30c8\u30fc\u30af\u30f3: \u5373\u5ea7\u306b\u7121\u52b9\u5316\uff08\u65b0\u3057\u3044\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u5f97\u3067\u304d\u306a\u304f\u306a\u308b\uff09</li> <li>\u274c \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3: \u6709\u52b9\u671f\u9650\u307e\u3067\u4f7f\u3048\u308b\uff08\u65e2\u306b\u767a\u884c\u6e08\u307f\u306e\u30c8\u30fc\u30af\u30f3\u306f\u7121\u52b9\u5316\u3067\u304d\u306a\u3044\uff09</li> <li>\u274c ID\u30c8\u30fc\u30af\u30f3: \u6709\u52b9\u671f\u9650\u307e\u3067\u4f7f\u3048\u308b\uff08\u65e2\u306b\u767a\u884c\u6e08\u307f\u306e\u30c8\u30fc\u30af\u30f3\u306f\u7121\u52b9\u5316\u3067\u304d\u306a\u3044\uff09</li> </ul> <p>\u3064\u307e\u308a:</p> <pre><code>sequenceDiagram\n    participant User as \u30e6\u30fc\u30b6\u30fc\n    participant API as API\u30b5\u30fc\u30d0\u30fc\n    participant Cognito as Cognito\n\n    Note over User,Cognito: \u30ed\u30b0\u30a4\u30f3\u6642\n    User-&gt;&gt;Cognito: \u8a8d\u8a3c\n    Cognito-&gt;&gt;User: \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\uff08\u6709\u52b9\u671f\u9650: 1\u6642\u9593\uff09&lt;br/&gt;\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u30c8\u30fc\u30af\u30f3\n\n    Note over Cognito: \u7ba1\u7406\u8005\u304cGlobalSignOut\u5b9f\u884c\n    Cognito-&gt;&gt;Cognito: \u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u30c8\u30fc\u30af\u30f3\u3092\u7121\u52b9\u5316\n\n    Note over User,API: GlobalSignOut\u5f8c\u3082\n    User-&gt;&gt;API: Bearer: \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\uff08\u65e2\u306b\u767a\u884c\u6e08\u307f\uff09\n    API-&gt;&gt;API: JWT\u7f72\u540d\u691c\u8a3c \u2192 \u2705 \u6709\u52b9\n    API-&gt;&gt;User: \u30ec\u30b9\u30dd\u30f3\u30b9\uff08\u6709\u52b9\u671f\u9650\u307e\u3067\u4f7f\u3048\u308b\uff01\uff09\n\n    Note over User,Cognito: \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u671f\u9650\u5207\u308c\u5f8c\n    User-&gt;&gt;Cognito: \u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u30c8\u30fc\u30af\u30f3\u3067\u66f4\u65b0\n    Cognito-&gt;&gt;User: \u274c \u30a8\u30e9\u30fc\uff08\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u30c8\u30fc\u30af\u30f3\u306f\u7121\u52b9\u5316\u6e08\u307f\uff09</code></pre>"},{"location":"auth/basics/#_7","title":"\u5bfe\u7b56: \u30c8\u30fc\u30af\u30f3\u6709\u52b9\u671f\u9650\u3092\u77ed\u304f\u8a2d\u5b9a","text":"<p>Cognito\u306a\u3069\u306e\u8a8d\u8a3c\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\u3067\u306f\u3001\u30c8\u30fc\u30af\u30f3\u6709\u52b9\u671f\u9650\u3092\u77ed\u304f\u8a2d\u5b9a\u3059\u308b\u3053\u3068\u3067\u5f71\u97ff\u3092\u6700\u5c0f\u5316\u3067\u304d\u307e\u3059\uff1a</p> <ul> <li>\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u6709\u52b9\u671f\u9650: 5\u301c15\u5206</li> <li>ID\u30c8\u30fc\u30af\u30f3\u6709\u52b9\u671f\u9650: 5\u301c15\u5206</li> <li>\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u30c8\u30fc\u30af\u30f3\u6709\u52b9\u671f\u9650: 30\u65e5</li> </ul> <p>\u2192 GlobalSignOut\u5b9f\u884c\u5f8c\u3001\u6700\u59275\u301c15\u5206\u3067\u5b8c\u5168\u306b\u7121\u52b9\u5316</p>"},{"location":"auth/basics/#_8","title":"\u307e\u3068\u3081","text":"\u8981\u4ef6 \u63a8\u5968\u65b9\u6cd5 \u4e00\u822c\u7684\u306aWeb\u30a2\u30d7\u30ea \u77ed\u3044\u6709\u52b9\u671f\u9650\uff085\u301c15\u5206\uff09+ \u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u30c8\u30fc\u30af\u30f3 \u5373\u5ea7\u306e\u7121\u52b9\u5316\u304c\u5fc5\u9808 \u30bb\u30c3\u30b7\u30e7\u30f3\u30d9\u30fc\u30b9\u8a8d\u8a3c Cognito\u4f7f\u7528 \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u6709\u52b9\u671f\u9650\u30925\u301c15\u5206\u306b\u8a2d\u5b9a <p>JWT\u306e\u7121\u52b9\u5316\u304c\u56f0\u96e3\u306a\u7406\u7531\u306f\u3001\u30b9\u30c6\u30fc\u30c8\u30ec\u30b9\u8a2d\u8a08\u3068\u3044\u3046\u672c\u8cea\u7684\u306a\u7279\u6027\u306b\u3088\u308b\u3082\u306e\u3067\u3059\u3002\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u30c8\u30fc\u30af\u30f3\u306f\u7121\u52b9\u5316\u3067\u304d\u307e\u3059\u304c\u3001\u65e2\u306b\u767a\u884c\u6e08\u307f\u306e\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306f\u6709\u52b9\u671f\u9650\u307e\u3067\u4f7f\u3048\u3066\u3057\u307e\u3044\u307e\u3059\u3002\u3053\u308c\u3092\u7406\u89e3\u3057\u305f\u4e0a\u3067\u3001\u9069\u5207\u306a\u6709\u52b9\u671f\u9650\u8a2d\u5b9a\u3067\u5bfe\u5fdc\u3059\u308b\u306e\u304c\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u3067\u3059\u3002</p>"},{"location":"auth/basics/#_9","title":"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30ea\u30b9\u30af\u6bd4\u8f03","text":"\u30ea\u30b9\u30af \u30bb\u30c3\u30b7\u30e7\u30f3 \u30c8\u30fc\u30af\u30f3(JWT) \u5bfe\u7b56 \u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u76d7\u8074 \u26a0\ufe0f \u540c\u3058 \u26a0\ufe0f \u540c\u3058 \u2705 HTTPS\u5fc5\u9808 \u76d7\u307e\u308c\u305f\u5834\u5408\u306e\u7121\u52b9\u5316 \u2705 \u5373\u5ea7\u306b\u53ef\u80fd \u274c \u56f0\u96e3 \u77ed\u3044\u6709\u52b9\u671f\u9650 XSS\u653b\u6483 \u2705 HttpOnly Cookie\u3067\u9632\u5fa1 \u274c LocalStorage\u306f\u5371\u967a HttpOnly Cookie or \u30e1\u30e2\u30ea\u4fdd\u5b58 CSRF\u653b\u6483 \u26a0\ufe0f \u5bfe\u7b56\u5fc5\u8981 \u2705 Authorization Header\u306f\u5b89\u5168 SameSite\u5c5e\u6027"},{"location":"auth/basics/#_10","title":"\u30c8\u30fc\u30af\u30f3\u30d9\u30fc\u30b9\u8a8d\u8a3c\u306e\u6ce8\u610f\u70b9","text":"<p>\u5371\u967a\u306a\u5b9f\u88c5: LocalStorage\u306b\u4fdd\u5b58 - XSS\u3067\u76d7\u307e\u308c\u308b</p> <p>\u5b89\u5168\u306a\u5b9f\u88c5: - \u30e1\u30e2\u30ea\u4fdd\u5b58\uff08React State\u306a\u3069\uff09 - HttpOnly Cookie\u3067\u4fdd\u5b58</p>"},{"location":"auth/basics/#_11","title":"\u5b89\u5168\u306a\u5b9f\u88c5\u306e\u30c1\u30a7\u30c3\u30af\u30ea\u30b9\u30c8","text":"<p>\u3069\u3061\u3089\u306e\u65b9\u5f0f\u3067\u3082\u4ee5\u4e0b\u3092\u5b88\u308b:</p> <ul> <li>\u2705 HTTPS\u5fc5\u9808 - \u901a\u4fe1\u3092\u6697\u53f7\u5316</li> <li>\u2705 HttpOnly Cookie - JavaScript\u304b\u3089\u30a2\u30af\u30bb\u30b9\u4e0d\u53ef</li> <li>\u2705 \u77ed\u3044\u6709\u52b9\u671f\u9650 - \u76d7\u307e\u308c\u3066\u3082\u5f71\u97ff\u3092\u6700\u5c0f\u5316\uff0815\u5206\u301c1\u6642\u9593\uff09</li> <li>\u2705 Secure\u5c5e\u6027 - HTTPS\u901a\u4fe1\u306e\u307f</li> <li>\u2705 SameSite\u5c5e\u6027 - CSRF\u5bfe\u7b56</li> </ul> <p>\u91cd\u8981: \u30ea\u30af\u30a8\u30b9\u30c8\u306b\u8a8d\u8a3c\u60c5\u5831\u304c\u542b\u307e\u308c\u308b\u3053\u3068\u81ea\u4f53\u306f\u554f\u984c\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u30bb\u30c3\u30b7\u30e7\u30f3ID\u3082\u30c8\u30fc\u30af\u30f3\u3082\u540c\u69d8\u306b\u542b\u307e\u308c\u307e\u3059\u3002\u554f\u984c\u306f \u4fdd\u5b58\u65b9\u6cd5 \u3068 \u6709\u52b9\u671f\u9650\u7ba1\u7406 \u3067\u3059\u3002</p>"},{"location":"auth/basics/#oauth-20-openid-connect","title":"OAuth 2.0 \u3068 OpenID Connect","text":"<p>\u53c2\u8003\u8cc7\u6599</p> <p>\u65e5\u672c\u8a9e\u306e\u5206\u304b\u308a\u3084\u3059\u3044\u89e3\u8aac:</p> <ul> <li>\ud83d\udcd8 \u4e00\u756a\u5206\u304b\u308a\u3084\u3059\u3044 OAuth \u306e\u8aac\u660e - OAuth 2.0\u306e\u57fa\u672c\u3092\u4e01\u5be7\u306b\u89e3\u8aac\uff08Authlete\uff09</li> <li>\ud83d\udcd8 OAuth 2.0 \u5168\u30d5\u30ed\u30fc\u306e\u56f3\u89e3\u3068\u52d5\u753b - \u5404\u30d5\u30ed\u30fc\u3092\u56f3\u89e3\u3067\u7406\u89e3</li> <li>\ud83d\udcd8 OpenID Connect \u5168\u30d5\u30ed\u30fc\u89e3\u8aac - OIDC\u306e\u8a73\u7d30\u89e3\u8aac</li> <li>\ud83d\udcd8 OAuth 2.0 / OIDC \u5165\u9580\u7de8 - Authlete\u516c\u5f0f\u30c1\u30e5\u30fc\u30c8\u30ea\u30a2\u30eb</li> </ul> <p>\u516c\u5f0f\u4ed5\u69d8\uff08\u82f1\u8a9e\uff09:</p> <ul> <li>\ud83d\udcd6 RFC 6749 - OAuth 2.0</li> <li>\ud83d\udcd6 RFC 7636 - PKCE</li> <li>\ud83d\udcd6 OpenID Connect Core 1.0</li> </ul> OAuth 2.0 \u3068 OpenID Connect \u306e\u57fa\u672c <p>OAuth 2.0: \u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5171\u6709\u305b\u305a\u306b\u3001\u4ed6\u306e\u30a2\u30d7\u30ea\u306b\u9650\u5b9a\u7684\u306a\u30a2\u30af\u30bb\u30b9\u6a29\u3092\u4e0e\u3048\u308b \u8a8d\u53ef\u30d7\u30ed\u30c8\u30b3\u30eb</p> <p>OpenID Connect (OIDC): OAuth 2.0\u306b \u8a8d\u8a3c\u6a5f\u80fd \u3092\u8ffd\u52a0\u3057\u305f\u30d7\u30ed\u30c8\u30b3\u30eb\uff08\u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u306e\u53d6\u5f97\u304c\u53ef\u80fd\uff09</p> \u5177\u4f53\u4f8b\u3067\u7406\u89e3\u3059\u308b <p>OAuth 2.0\u306e\u4f8b: <pre><code>\u2705 \u5199\u771f\u7ba1\u7406\u30a2\u30d7\u30ea\u304cGoogle\u30d5\u30a9\u30c8\u306b\u30a2\u30af\u30bb\u30b9\n\u2192 Google\u306e\u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u6e21\u3055\u306a\u3044\n\u2192 \u300c\u5199\u771f\u306e\u95b2\u89a7\u306e\u307f\u300d\u306e\u6a29\u9650\u3060\u3051\u4ed8\u4e0e\n\u2192 \u3044\u3064\u3067\u3082\u6a29\u9650\u3092\u53d6\u308a\u6d88\u305b\u308b\n</code></pre></p> <p>OpenID Connect\u306e\u4f8b: <pre><code>\u2705 \u300cGoogle\u3067\u30ed\u30b0\u30a4\u30f3\u300d\u30dc\u30bf\u30f3\n\u2192 \u30e6\u30fc\u30b6\u30fc\u60c5\u5831\uff08\u540d\u524d\u3001\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\uff09\u3092\u53d6\u5f97\n\u2192 \u30d1\u30b9\u30ef\u30fc\u30c9\u306f\u4e00\u5207\u5171\u6709\u3057\u306a\u3044\n</code></pre></p> Web\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u5411\u3051\u8a8d\u8a3c\u30d5\u30ed\u30fc\u6bd4\u8f03 \u30d5\u30ed\u30fc \u63a8\u5968\u5ea6 \u8aac\u660e \u9069\u7528 Authorization Code + PKCE \ud83d\udfe2 \u5fc5\u9808 \u6700\u3082\u5b89\u5168\u306a\u8a8d\u8a3c\u30d5\u30ed\u30fc\u3002\u8a8d\u53ef\u30b3\u30fc\u30c9\u6a2a\u53d6\u308a\u653b\u6483\u3092\u9632\u6b62\u3002 Web\u3001SPA\u3001Mobile Client Credentials \ud83d\udfe2 \u63a8\u5968 \u30b5\u30fc\u30d0\u30fc\u9593\u901a\u4fe1\u7528\u3002\u30e6\u30fc\u30b6\u30fc\u4e0d\u5728\u306eM2M\u8a8d\u8a3c\u3002 \u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u3001\u30d0\u30c3\u30c1\u51e6\u7406 Implicit \ud83d\udd34 \u7981\u6b62 \u30c8\u30fc\u30af\u30f3\u304cURL\u306b\u9732\u51fa\u3002\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30ea\u30b9\u30af\u304c\u9ad8\u3044\u3002 \u274c \u4f7f\u7528\u3057\u306a\u3044 Password Credentials \ud83d\udd34 \u7981\u6b62 \u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u30a2\u30d7\u30ea\u306b\u6e21\u3059\u3002OAuth 2.0\u306e\u601d\u60f3\u306b\u53cd\u3059\u308b\u3002 \u274c \u4f7f\u7528\u3057\u306a\u3044 <p>2025\u5e74\u306e\u63a8\u5968:</p> <ul> <li>\u2705 Web/SPA/Mobile: Authorization Code + PKCE \u30d5\u30ed\u30fc\u3092\u4f7f\u7528</li> <li>\u2705 \u30b5\u30fc\u30d0\u30fc\u9593\u901a\u4fe1: Client Credentials \u30d5\u30ed\u30fc\u3092\u4f7f\u7528</li> <li>\u274c Implicit / Password Credentials: \u4f7f\u7528\u7981\u6b62</li> </ul> OAuth 2.0/OIDC \u306e\u767b\u5834\u4eba\u7269 \u5f79\u5272 \u8aac\u660e \u4f8b \u30e6\u30fc\u30b6\u30fc \u30ea\u30bd\u30fc\u30b9\u306e\u6240\u6709\u8005 \u3042\u306a\u305f \u30af\u30e9\u30a4\u30a2\u30f3\u30c8 \u30e6\u30fc\u30b6\u30fc\u304c\u4f7f\u7528\u3059\u308b\u30a2\u30d7\u30ea Next.js \u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9 \u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc/IdP \u8a8d\u8a3c\u30fb\u30c8\u30fc\u30af\u30f3\u767a\u884c AWS Cognito, Auth0 \u30ea\u30bd\u30fc\u30b9\u30b5\u30fc\u30d0\u30fc \u4fdd\u8b77\u3055\u308c\u305f\u30c7\u30fc\u30bf\u63d0\u4f9b Spring Boot API \u30c8\u30fc\u30af\u30f3\u306e\u7a2e\u985e \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3 <p>\u7528\u9014: API \u30a2\u30af\u30bb\u30b9\u306e\u8a8d\u53ef</p> <pre><code>Authorization: Bearer eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9...\n</code></pre> <ul> <li>\u6709\u52b9\u671f\u9650: \u77ed\u547d(15\u5206\u301c1\u6642\u9593)</li> <li>\u5185\u5bb9: \u30b9\u30b3\u30fc\u30d7(\u6a29\u9650)\u3092\u542b\u3080</li> </ul> ID\u30c8\u30fc\u30af\u30f3 (OIDC) <p>\u7528\u9014: \u30e6\u30fc\u30b6\u30fc\u60c5\u5831\u306e\u53d6\u5f97</p> <pre><code>{\n  \"sub\": \"user-id-12345\",\n  \"email\": \"user@example.com\",\n  \"name\": \"John Doe\",\n  \"exp\": 1616239022\n}\n</code></pre> <ul> <li>\u6709\u52b9\u671f\u9650: \u77ed\u547d(15\u5206\u301c1\u6642\u9593)</li> <li>\u5185\u5bb9: \u30e6\u30fc\u30b6\u30fc\u60c5\u5831</li> </ul> \u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u30c8\u30fc\u30af\u30f3 <p>\u7528\u9014: \u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u306e\u518d\u767a\u884c</p> <ul> <li>\u6709\u52b9\u671f\u9650: \u9577\u547d(\u6570\u65e5\u301c\u6570\u30f6\u6708)</li> <li>\u4fdd\u7ba1: \u53b3\u91cd\u306b\u7ba1\u7406(HttpOnly Cookie\u63a8\u5968)</li> </ul> OAuth 2.0/OIDC \u306e\u91cd\u8981\u306a\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30d1\u30e9\u30e1\u30fc\u30bf \u30d1\u30e9\u30e1\u30fc\u30bf \u76ee\u7684 \u5fc5\u9808\u5ea6 PKCE \u8a8d\u53ef\u30b3\u30fc\u30c9\u6a2a\u53d6\u308a\u9632\u6b62 \ud83d\udd34 \u5fc5\u9808 state CSRF \u5bfe\u7b56 \ud83d\udd34 \u5fc5\u9808 nonce ID\u30c8\u30fc\u30af\u30f3\u306e\u30ea\u30d7\u30ec\u30a4\u653b\u6483\u9632\u6b62 \ud83d\udfe1 \u63a8\u5968"},{"location":"auth/basics/#_12","title":"\u5177\u4f53\u7684\u306a\u5b9f\u88c5\u65b9\u6cd5","text":"1. PKCE\uff08\u30d4\u30af\u30b7\u30fc\uff09\u306e\u5b9f\u88c5 <p>\u76ee\u7684: \u8a8d\u53ef\u30b3\u30fc\u30c9\u304c\u6a2a\u53d6\u308a\u3055\u308c\u3066\u3082\u3001\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u5f97\u3067\u304d\u306a\u3044\u3088\u3046\u306b\u3059\u308b</p> <p>\u4ed5\u7d44\u307f:</p> <pre><code>sequenceDiagram\n    participant Client as \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\n    participant AuthServer as \u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\n\n    Note over Client: 1. \u30e9\u30f3\u30c0\u30e0\u5024\u751f\u6210\n    Client-&gt;&gt;Client: code_verifier = \u30e9\u30f3\u30c0\u30e0\u6587\u5b57\u5217(43-128\u6587\u5b57)\n    Client-&gt;&gt;Client: code_challenge = SHA256(code_verifier)\n\n    Note over Client,AuthServer: 2. \u8a8d\u53ef\u30ea\u30af\u30a8\u30b9\u30c8\n    Client-&gt;&gt;AuthServer: code_challenge \u3092\u9001\u4fe1\n    AuthServer-&gt;&gt;AuthServer: code_challenge \u3092\u4fdd\u5b58\n\n    Note over Client,AuthServer: 3. \u30c8\u30fc\u30af\u30f3\u30ea\u30af\u30a8\u30b9\u30c8\n    Client-&gt;&gt;AuthServer: code + code_verifier \u3092\u9001\u4fe1\n    AuthServer-&gt;&gt;AuthServer: SHA256(code_verifier) == code_challenge?\n    alt \u4e00\u81f4\n        AuthServer-&gt;&gt;Client: \u2705 \u30c8\u30fc\u30af\u30f3\u767a\u884c\n    else \u4e0d\u4e00\u81f4\n        AuthServer-&gt;&gt;Client: \u274c \u30a8\u30e9\u30fc\n    end</code></pre> <p>\u4ed5\u7d44\u307f:</p> <ol> <li>\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u30e9\u30f3\u30c0\u30e0\u306a <code>code_verifier</code> \u3092\u751f\u6210</li> <li><code>code_verifier</code> \u3092SHA256\u3067\u30cf\u30c3\u30b7\u30e5\u5316\u3057\u3066 <code>code_challenge</code> \u3092\u4f5c\u6210</li> <li>\u8a8d\u53ef\u30ea\u30af\u30a8\u30b9\u30c8\u6642\u306b <code>code_challenge</code> \u3092\u9001\u4fe1</li> <li>\u30c8\u30fc\u30af\u30f3\u30ea\u30af\u30a8\u30b9\u30c8\u6642\u306b <code>code_verifier</code> \u3092\u9001\u4fe1</li> <li>\u30b5\u30fc\u30d0\u30fc\u304c <code>code_verifier</code> \u3092\u30cf\u30c3\u30b7\u30e5\u5316\u3057\u3066 <code>code_challenge</code> \u3068\u4e00\u81f4\u3059\u308b\u304b\u691c\u8a3c</li> </ol> <p>\u653b\u6483\u8005\u304c\u8a8d\u53ef\u30b3\u30fc\u30c9\u3092\u76d7\u3093\u3067\u3082:</p> <ul> <li><code>code_verifier</code> \u3092\u77e5\u3089\u306a\u3044</li> <li>\u2192 <code>code_challenge</code> \u306e\u691c\u8a3c\u306b\u5931\u6557</li> <li>\u2192 \u30c8\u30fc\u30af\u30f3\u3092\u53d6\u5f97\u3067\u304d\u306a\u3044 \u2705</li> </ul> 2. state \u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u5b9f\u88c5 <p>\u76ee\u7684: CSRF\u653b\u6483\u3092\u9632\u3050\uff08\u60aa\u610f\u306e\u3042\u308b\u30b5\u30a4\u30c8\u304b\u3089\u306e\u8a8d\u8a3c\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9632\u6b62\uff09</p> <p>\u4ed5\u7d44\u307f:</p> <pre><code>sequenceDiagram\n    participant Client as \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\n    participant AuthServer as \u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\n\n    Note over Client: 1. \u30e9\u30f3\u30c0\u30e0\u5024\u751f\u6210\n    Client-&gt;&gt;Client: state = \u30e9\u30f3\u30c0\u30e0\u6587\u5b57\u5217\n    Client-&gt;&gt;Client: \u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u4fdd\u5b58\n\n    Note over Client,AuthServer: 2. \u8a8d\u53ef\u30ea\u30af\u30a8\u30b9\u30c8\n    Client-&gt;&gt;AuthServer: state \u3092\u9001\u4fe1\n\n    Note over Client,AuthServer: 3. \u30b3\u30fc\u30eb\u30d0\u30c3\u30af\n    AuthServer-&gt;&gt;Client: code + state \u3092\u8fd4\u5374\n    Client-&gt;&gt;Client: \u30bb\u30c3\u30b7\u30e7\u30f3\u306estate\u3068\u4e00\u81f4\uff1f\n    alt \u4e00\u81f4\n        Client-&gt;&gt;Client: \u2705 \u51e6\u7406\u7d9a\u884c\n    else \u4e0d\u4e00\u81f4\n        Client-&gt;&gt;Client: \u274c CSRF\u653b\u6483\u306e\u53ef\u80fd\u6027\n    end</code></pre> <p>\u4ed5\u7d44\u307f:</p> <ol> <li>\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u30e9\u30f3\u30c0\u30e0\u306a <code>state</code> \u3092\u751f\u6210\u3057\u3066\u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u4fdd\u5b58</li> <li>\u8a8d\u53ef\u30ea\u30af\u30a8\u30b9\u30c8\u6642\u306b <code>state</code> \u3092\u9001\u4fe1</li> <li>\u30b3\u30fc\u30eb\u30d0\u30c3\u30af\u6642\u306b\u8fd4\u5374\u3055\u308c\u305f <code>state</code> \u304c\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u5024\u3068\u4e00\u81f4\u3059\u308b\u304b\u691c\u8a3c</li> </ol> <p>CSRF\u653b\u6483\u306e\u30b7\u30ca\u30ea\u30aa:</p> <ol> <li>\u653b\u6483\u8005\u304c\u81ea\u5206\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u3067\u8a8d\u53ef\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u958b\u59cb</li> <li>\u88ab\u5bb3\u8005\u306b\u8a8d\u53ef\u30b3\u30fc\u30c9\u3092\u542b\u3080URL\u3092\u30af\u30ea\u30c3\u30af\u3055\u305b\u308b</li> <li><code>state</code> \u304c\u306a\u3044\u3068\u3001\u88ab\u5bb3\u8005\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u653b\u6483\u8005\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u304c\u7d10\u4ed8\u3051\u3089\u308c\u308b</li> <li><code>state</code> \u304c\u3042\u308c\u3070\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u5024\u3068\u4e00\u81f4\u3057\u306a\u3044\u305f\u3081\u9632\u3052\u308b \u2705</li> </ol> 3. nonce \u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u5b9f\u88c5\uff08OIDC\uff09 <p>\u76ee\u7684: ID\u30c8\u30fc\u30af\u30f3\u306e\u30ea\u30d7\u30ec\u30a4\u653b\u6483\u3092\u9632\u3050</p> <pre><code>sequenceDiagram\n    participant Client as \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\n    participant AuthServer as \u8a8d\u53ef\u30b5\u30fc\u30d0\u30fc\n\n    Note over Client: 1. \u30e9\u30f3\u30c0\u30e0\u5024\u751f\u6210\n    Client-&gt;&gt;Client: nonce = \u30e9\u30f3\u30c0\u30e0\u6587\u5b57\u5217\n    Client-&gt;&gt;Client: \u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u4fdd\u5b58\n\n    Note over Client,AuthServer: 2. \u8a8d\u53ef\u30ea\u30af\u30a8\u30b9\u30c8\n    Client-&gt;&gt;AuthServer: nonce \u3092\u9001\u4fe1\n\n    Note over Client,AuthServer: 3. ID\u30c8\u30fc\u30af\u30f3\u53d6\u5f97\n    AuthServer-&gt;&gt;Client: ID\u30c8\u30fc\u30af\u30f3(nonce\u542b\u3080)\n    Client-&gt;&gt;Client: ID\u30c8\u30fc\u30af\u30f3\u306enonce\u3068\u4e00\u81f4\uff1f\n    alt \u4e00\u81f4\n        Client-&gt;&gt;Client: \u2705 \u30c8\u30fc\u30af\u30f3\u53d7\u7406\n    else \u4e0d\u4e00\u81f4\n        Client-&gt;&gt;Client: \u274c \u30ea\u30d7\u30ec\u30a4\u653b\u6483\u306e\u53ef\u80fd\u6027\n    end</code></pre> <p>\u4ed5\u7d44\u307f:</p> <ol> <li>\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u304c\u30e9\u30f3\u30c0\u30e0\u306a <code>nonce</code> \u3092\u751f\u6210\u3057\u3066\u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u4fdd\u5b58</li> <li>\u8a8d\u53ef\u30ea\u30af\u30a8\u30b9\u30c8\u6642\u306b <code>nonce</code> \u3092\u9001\u4fe1</li> <li>ID\u30c8\u30fc\u30af\u30f3\u5185\u306e <code>nonce</code> \u304c\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u5024\u3068\u4e00\u81f4\u3059\u308b\u304b\u691c\u8a3c</li> </ol>"},{"location":"auth/basics/#_13","title":"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u7d44\u307f\u5408\u308f\u305b","text":"<p>\u6700\u5c0f\u9650\u306e\u5b9f\u88c5\uff08\u5fc5\u9808\uff09:</p> <ul> <li>PKCE\uff08<code>code_challenge</code> + <code>code_verifier</code>\uff09</li> <li>state\uff08CSRF\u5bfe\u7b56\uff09</li> </ul> <p>\u63a8\u5968\u5b9f\u88c5\uff08OIDC\u4f7f\u7528\u6642\uff09:</p> <ul> <li>PKCE\uff08<code>code_challenge</code> + <code>code_verifier</code>\uff09</li> <li>state\uff08CSRF\u5bfe\u7b56\uff09</li> <li>nonce\uff08ID\u30c8\u30fc\u30af\u30f3\u306e\u30ea\u30d7\u30ec\u30a4\u653b\u6483\u9632\u6b62\uff09</li> </ul>"},{"location":"auth/basics/#_14","title":"\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u3046\uff08\u63a8\u5968\uff09","text":"<p>\u5b9f\u969b\u306e\u5b9f\u88c5\u3067\u306f\u3001\u8a8d\u8a3c\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u4f7f\u7528\u3059\u308b\u3053\u3068\u3092\u5f37\u304f\u63a8\u5968\u3057\u307e\u3059\u3002Auth.js (NextAuth.js)\u3001Auth0 SDK\u3001AWS Amplify\u306a\u3069\u306e\u8a8d\u8a3c\u30e9\u30a4\u30d6\u30e9\u30ea\u306f\u3001\u3053\u308c\u3089\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30d1\u30e9\u30e1\u30fc\u30bf\u3092\u81ea\u52d5\u7684\u306b\u51e6\u7406\u3057\u307e\u3059\u3002</p> <p>\u91cd\u8981: \u81ea\u524d\u5b9f\u88c5\u306f\u8907\u96d1\u3067\u30df\u30b9\u304c\u8d77\u304d\u3084\u3059\u3044\u305f\u3081\u3001\u4fe1\u983c\u3067\u304d\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u4f7f\u7528\u3092\u63a8\u5968\u3057\u307e\u3059\u3002</p>"},{"location":"auth/basics/#_15","title":"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u306e\u57fa\u672c","text":"Cookie \u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a <p>Cookie\u306b\u306f\u4ee5\u4e0b\u306e\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5c5e\u6027\u3092\u8a2d\u5b9a\u3057\u307e\u3059\uff1a</p> <ul> <li>HttpOnly: JavaScript\u304b\u3089\u30a2\u30af\u30bb\u30b9\u4e0d\u53ef\uff08XSS\u5bfe\u7b56\uff09</li> <li>Secure: HTTPS\u901a\u4fe1\u306e\u307f</li> <li>SameSite=Strict/Lax: CSRF\u5bfe\u7b56</li> <li>Max-Age/Expires: \u6709\u52b9\u671f\u9650</li> </ul> \u30c8\u30fc\u30af\u30f3\u4fdd\u7ba1\u5834\u6240 \u5834\u6240 \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3 \u63a8\u5968 LocalStorage \u274c XSS\u3067\u76d7\u307e\u308c\u308b \u7981\u6b62 HttpOnly Cookie \u2705 JavaScript\u4e0d\u53ef \u63a8\u5968 \u30e1\u30e2\u30ea(React State) \u2705 XSS\u8010\u6027\u9ad8 \u63a8\u5968"},{"location":"auth/basics/#_16","title":"\u69cb\u6210\u30d1\u30bf\u30fc\u30f3\u5225\u306e\u8a8d\u8a3c\u65b9\u5f0f","text":"\u30d1\u30bf\u30fc\u30f31: \u30e2\u30ce\u30ea\u30b7\u30c3\u30af\u69cb\u6210\uff08\u7d71\u5408\u578b\uff09 <p>\u30bb\u30c3\u30b7\u30e7\u30f3\u30d9\u30fc\u30b9\u8a8d\u8a3c\u304c\u9069\u3057\u3066\u3044\u308b</p> <p>\u4f7f\u7528\u3059\u308b\u8a8d\u8a3c\u30d5\u30ed\u30fc: Authorization Code + PKCE</p> <p>\u5b9f\u969b\u306e\u8a8d\u8a3c\u30d5\u30ed\u30fc\uff08\u5916\u90e8IdP\u4f7f\u7528\uff09:</p> <pre><code>sequenceDiagram\n    participant Browser as \ud83c\udf10 \u30d6\u30e9\u30a6\u30b6\n    participant Server as \ud83d\udda5\ufe0f \u30b5\u30fc\u30d0\u30fc(Next.js\u7b49)\n    participant IdP as \ud83d\udd10 \u8a8d\u8a3c\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc&lt;br/&gt;(Cognito/Auth0)\n    participant Redis as \ud83d\udcbe \u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30c8\u30a2\n\n    Browser-&gt;&gt;Server: 1. \u30ed\u30b0\u30a4\u30f3\u30dc\u30bf\u30f3\u62bc\u4e0b\n    Server-&gt;&gt;IdP: 2. \u8a8d\u8a3c\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\n    IdP-&gt;&gt;Browser: 3. \u30ed\u30b0\u30a4\u30f3\u753b\u9762\u8868\u793a\n    Browser-&gt;&gt;IdP: 4. ID/\u30d1\u30b9\u30ef\u30fc\u30c9\u5165\u529b\n    IdP-&gt;&gt;Server: 5. \u8a8d\u8a3c\u30b3\u30fc\u30c9\u8fd4\u5374\n    Server-&gt;&gt;IdP: 6. \u30c8\u30fc\u30af\u30f3\u53d6\u5f97\n    Server-&gt;&gt;Redis: 7. \u30bb\u30c3\u30b7\u30e7\u30f3\u4fdd\u5b58\n    Server-&gt;&gt;Browser: 8. Cookie(session_id)\u767a\u884c</code></pre> <p>\u30dd\u30a4\u30f3\u30c8:</p> <ul> <li>\u30d1\u30b9\u30ef\u30fc\u30c9\u7ba1\u7406\u306f IdP\u304c\u62c5\u5f53 \uff08\u81ea\u524d\u3067\u7ba1\u7406\u3057\u306a\u3044\uff09</li> <li>\u30b5\u30fc\u30d0\u30fc\u306f\u8a8d\u8a3c\u5f8c\u306e \u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406\u306e\u307f \u3092\u884c\u3046</li> <li>\u30e9\u30a4\u30d6\u30e9\u30ea\u4f8b: <code>next-auth</code>\u3001<code>devise</code>\uff08Rails\uff09\u3001<code>django-allauth</code></li> </ul> <p>\u69cb\u6210\u306e\u7279\u5fb4:</p> <ul> <li>\ud83d\udce6 1\u3064\u306e\u30b5\u30fc\u30d0\u30fc \u3067\u5168\u3066\u51e6\u7406\uff08\u30d5\u30ed\u30f3\u30c8+\u30d0\u30c3\u30af\u7d71\u5408\uff09</li> <li>\ud83c\udfd7\ufe0f \u30b5\u30fc\u30d0\u30fc\u304c HTML\u3092\u751f\u6210 \u3057\u3066\u8fd4\u3059\uff08SSR\uff09</li> <li>\ud83d\udd10 Cookie\u30d9\u30fc\u30b9\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406</li> <li>\u2705 \u5373\u5ea7\u306a\u30bb\u30c3\u30b7\u30e7\u30f3\u7121\u52b9\u5316\u304c\u53ef\u80fd</li> </ul> <p>\u6280\u8853\u4f8b: Ruby on Rails\u3001Django\u3001Laravel\u3001Next.js\uff08SSR\u30e2\u30fc\u30c9\uff09\u3001Spring Boot + Thymeleaf</p> <p>\u9069\u7528\u4f8b: \u793e\u5185\u30b7\u30b9\u30c6\u30e0\u3001\u7ba1\u7406\u753b\u9762\u3001\u30d6\u30ed\u30b0\u3001EC\u30b5\u30a4\u30c8\uff08SSR\uff09</p> \u30d1\u30bf\u30fc\u30f32: \u5206\u96e2\u578b\u69cb\u6210\uff08SPA + API\uff09 <p>\u30c8\u30fc\u30af\u30f3\u30d9\u30fc\u30b9\u8a8d\u8a3c\u304c\u9069\u3057\u3066\u3044\u308b</p> <p>\u4f7f\u7528\u3059\u308b\u8a8d\u8a3c\u30d5\u30ed\u30fc: Authorization Code + PKCE</p> <p>\u5b9f\u969b\u306e\u8a8d\u8a3c\u30d5\u30ed\u30fc\uff08\u5916\u90e8IdP\u4f7f\u7528\uff09:</p> <pre><code>sequenceDiagram\n    participant Browser as \ud83c\udf10 \u30d6\u30e9\u30a6\u30b6(SPA)\n    participant IdP as \ud83d\udd10 \u8a8d\u8a3c\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc&lt;br/&gt;(Cognito/Auth0)\n    participant API as \ud83d\udd0c API\u30b5\u30fc\u30d0\u30fc\n\n    Browser-&gt;&gt;IdP: 1. \u30ed\u30b0\u30a4\u30f3\u30ea\u30af\u30a8\u30b9\u30c8\n    IdP-&gt;&gt;Browser: 2. ID/\u30d1\u30b9\u30ef\u30fc\u30c9\u5165\u529b\n    IdP-&gt;&gt;Browser: 3. \u30c8\u30fc\u30af\u30f3\u767a\u884c(JWT)\n    Browser-&gt;&gt;Browser: 4. \u30c8\u30fc\u30af\u30f3\u3092\u30e1\u30e2\u30ea\u4fdd\u5b58\n    Browser-&gt;&gt;API: 5. API\u547c\u3073\u51fa\u3057 + Token\n    API-&gt;&gt;IdP: 6. \u30c8\u30fc\u30af\u30f3\u691c\u8a3c\n    API-&gt;&gt;Browser: 7. \u30c7\u30fc\u30bf\u8fd4\u5374</code></pre> <p>\u30dd\u30a4\u30f3\u30c8:</p> <ul> <li>\u30d1\u30b9\u30ef\u30fc\u30c9\u7ba1\u7406\u306f IdP\u304c\u62c5\u5f53 \uff08\u81ea\u524d\u3067\u7ba1\u7406\u3057\u306a\u3044\uff09</li> <li>\u30b5\u30fc\u30d0\u30fc\u306f \u30c8\u30fc\u30af\u30f3\u691c\u8a3c\u306e\u307f \uff08\u72b6\u614b\u3092\u6301\u305f\u306a\u3044\uff09</li> <li>\u30e9\u30a4\u30d6\u30e9\u30ea\u4f8b: <code>@auth0/auth0-react</code>\u3001<code>aws-amplify</code>\u3001<code>@supabase/auth-helpers</code></li> </ul> <p>\u69cb\u6210\u306e\u7279\u5fb4:</p> <ul> <li>\ud83d\udd00 2\u3064\u306e\u30b5\u30fc\u30d0\u30fc \u3067\u5f79\u5272\u5206\u62c5\uff08\u9759\u7684\u914d\u4fe1 + API\uff09</li> <li>\ud83d\udcc4 \u9759\u7684\u30d5\u30a1\u30a4\u30eb\u30b5\u30fc\u30d0\u30fc: HTML/CSS/JavaScript\u3092\u914d\u4fe1\uff08CDN\uff09</li> <li>\ud83d\udd0c API\u30b5\u30fc\u30d0\u30fc: \u30c7\u30fc\u30bf\u51e6\u7406\u30fbDB\u64cd\u4f5c\uff08JSON\u8fd4\u5374\uff09</li> <li>\ud83c\udfab \u30c8\u30fc\u30af\u30f3\u30d9\u30fc\u30b9\u306e\u8a8d\u8a3c\uff08Authorization Header\uff09</li> </ul> <p>\u6280\u8853\u4f8b: React + Vercel/Netlify\u3001Vue.js + Cloudflare Pages\u3001Angular\u3001\u30d0\u30c3\u30af\u30a8\u30f3\u30c9API\uff08Spring Boot\u3001FastAPI\u3001Node.js\u7b49\uff09</p> <p>\u9069\u7528\u4f8b: \u30e2\u30c0\u30f3Web\u30a2\u30d7\u30ea\u3001SaaS\u88fd\u54c1\u3001\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3001\u30e2\u30d0\u30a4\u30eb\u30a2\u30d7\u30ea\u30d0\u30c3\u30af\u30a8\u30f3\u30c9</p> \u30d1\u30bf\u30fc\u30f33: \u30cf\u30a4\u30d6\u30ea\u30c3\u30c9\u69cb\u6210\uff08BFF\u30d1\u30bf\u30fc\u30f3\uff09 <p>Auth.js (NextAuth.js) \u306f2\u3064\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30c8\u30e9\u30c6\u30b8\u30fc\u3092\u30b5\u30dd\u30fc\u30c8</p> <p>Auth.js\u306f JWT Session \u3068 Database Session \u306e2\u3064\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u6226\u7565\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002</p> <p>\u53c2\u8003\u8cc7\u6599</p> <p>\ud83d\udcd8 Auth.js - Session Strategies - \u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8</p> <p>\u4f7f\u7528\u3059\u308b\u8a8d\u8a3c\u30d5\u30ed\u30fc: Authorization Code + PKCE</p> \u91cd\u8981: \u8a8d\u8a3c\u65b9\u5f0f\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u7ba1\u7406\u306f\u5225\u306e\u6982\u5ff5 <p>\u30bb\u30c3\u30b7\u30e7\u30f3\u30d9\u30fc\u30b9\u8a8d\u8a3c \u2260 \u81ea\u524d\u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u7ba1\u7406</p> <p>\u30bb\u30c3\u30b7\u30e7\u30f3\u30d9\u30fc\u30b9\u3067\u3082\u3001\u5b9f\u969b\u306e\u8a8d\u8a3c\u306f\u5916\u90e8\u306e\u8a8d\u8a3c\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc\uff08AWS Cognito\u3001Auth0\u7b49\uff09\u306b\u59d4\u8b72\u3059\u308b\u306e\u304c \u73fe\u4ee3\u306e\u6a19\u6e96 \u3067\u3059\u3002</p> <ul> <li>\u274c \u975e\u63a8\u5968: \u81ea\u524d\u3067\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u30cf\u30c3\u30b7\u30e5\u5316\u3057\u3066DB\u306b\u4fdd\u5b58</li> <li>\u2705 \u63a8\u5968: \u5916\u90e8IdP\u3067\u8a8d\u8a3c \u2192 \u30bb\u30c3\u30b7\u30e7\u30f3ID\u3092Cookie\u3067\u7ba1\u7406</li> </ul>"},{"location":"auth/basics/#3-a-jwt-session","title":"\ud83d\udccc \u30d1\u30bf\u30fc\u30f33-A: JWT Session\uff08\u63a8\u5968\uff09","text":"<p>\u5b9f\u969b\u306e\u8a8d\u8a3c\u30d5\u30ed\u30fc\uff08\u5916\u90e8IdP\u4f7f\u7528\uff09:</p> <pre><code>sequenceDiagram\n    participant Browser as \ud83c\udf10 \u30d6\u30e9\u30a6\u30b6\n    participant BFF as \u26a1 Next.js&lt;br/&gt;(BFF)\n    participant IdP as \ud83d\udd10 \u8a8d\u8a3c\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc&lt;br/&gt;(Cognito/Auth0)\n    participant API as \ud83d\udd0c \u30d0\u30c3\u30af\u30a8\u30f3\u30c9API&lt;br/&gt;(Spring Boot\u7b49)\n    participant DB as \ud83d\uddc4\ufe0f \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\n    Note over Browser,BFF: \u521d\u56de\u30a2\u30af\u30bb\u30b9\uff08SSR\uff09\n    Browser-&gt;&gt;BFF: 1. \u30da\u30fc\u30b8\u30ea\u30af\u30a8\u30b9\u30c8\n    BFF-&gt;&gt;IdP: 2. \u8a8d\u8a3c\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\n    IdP-&gt;&gt;Browser: 3. \u30ed\u30b0\u30a4\u30f3\u753b\u9762\u8868\u793a\n    Browser-&gt;&gt;IdP: 4. ID/\u30d1\u30b9\u30ef\u30fc\u30c9\u5165\u529b\n    IdP-&gt;&gt;BFF: 5. \u8a8d\u8a3c\u30b3\u30fc\u30c9\u8fd4\u5374\n    BFF-&gt;&gt;IdP: 6. \u30c8\u30fc\u30af\u30f3\u53d6\u5f97\uff08\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3001ID\u30c8\u30fc\u30af\u30f3\u7b49\uff09\n    BFF-&gt;&gt;BFF: 7. JWT\u3092\u6697\u53f7\u5316\u3057\u3066Cookie\u306b\u4fdd\u5b58&lt;br/&gt;\uff08\u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30c8\u30a2\u4e0d\u8981\uff09\n    BFF-&gt;&gt;API: 8. \u30c7\u30fc\u30bf\u53d6\u5f97API\u547c\u3073\u51fa\u3057\n    API-&gt;&gt;DB: 9. DB\u691c\u7d22\n    DB-&gt;&gt;API: 10. \u30c7\u30fc\u30bf\u8fd4\u5374\n    API-&gt;&gt;BFF: 11. JSON\u8fd4\u5374\n    BFF-&gt;&gt;BFF: 12. HTML\u3092\u751f\u6210\uff08SSR\uff09\n    BFF-&gt;&gt;Browser: 13. \u5b8c\u6210\u3057\u305fHTML + \u6697\u53f7\u5316Cookie\u8fd4\u5374\n\n    Note over Browser,DB: \u4ee5\u964d\u306e\u30da\u30fc\u30b8\u9077\u79fb\uff08SPA\uff09\n    Browser-&gt;&gt;BFF: 14. API Route\u547c\u3073\u51fa\u3057\uff08\u6697\u53f7\u5316Cookie\u9001\u4fe1\uff09\n    BFF-&gt;&gt;BFF: 15. Cookie\u5185\u306eJWT\u3092\u5fa9\u53f7\u5316\u30fb\u691c\u8a3c\n    BFF-&gt;&gt;API: 16. \u30d0\u30c3\u30af\u30a8\u30f3\u30c9API\u3078\u4e2d\u7d99\n    API-&gt;&gt;DB: 17. DB\u691c\u7d22\n    DB-&gt;&gt;API: 18. \u30c7\u30fc\u30bf\u8fd4\u5374\n    API-&gt;&gt;BFF: 19. JSON\u8fd4\u5374\n    BFF-&gt;&gt;Browser: 20. JSON\u8fd4\u5374\n    Browser-&gt;&gt;Browser: 21. JavaScript\u3067\u753b\u9762\u66f4\u65b0</code></pre> <p>\u30dd\u30a4\u30f3\u30c8:</p> <ul> <li>\u30d1\u30b9\u30ef\u30fc\u30c9\u7ba1\u7406\u306f IdP\u304c\u62c5\u5f53 \uff08\u81ea\u524d\u3067\u7ba1\u7406\u3057\u306a\u3044\uff09</li> <li>BFF\u5c64\u3067 \u6697\u53f7\u5316\u3055\u308c\u305fJWT\u3092HttpOnly Cookie\u3067\u7ba1\u7406 \uff08\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u4e0d\u8981\uff09</li> <li>JWT\u306f\u6697\u53f7\u5316\uff08JWE\uff09\u3055\u308c\u3001\u79d8\u5bc6\u9375\u3067\u4fdd\u8b77\u3055\u308c\u308b</li> <li>Auth.js (NextAuth.js) \u304c\u81ea\u52d5\u7684\u306bJWT\u306e\u6697\u53f7\u5316\u30fb\u5fa9\u53f7\u5316\u30fb\u691c\u8a3c\u3092\u5b9f\u884c</li> <li>\u30d6\u30e9\u30a6\u30b6\u306b\u306f\u6697\u53f7\u5316\u3055\u308c\u305fCookie\u306e\u307f\u9001\u4fe1\uff08\u30bb\u30ad\u30e5\u30a2\uff09</li> <li>\u30d0\u30c3\u30af\u30a8\u30f3\u30c9API\u3078\u306e\u4e2d\u7d99 \u6642\u306b\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u4f7f\u7528\u53ef\u80fd</li> </ul> <p>JWT Session\u306e\u7279\u5fb4:</p> <ul> <li>\u2705 \u30b9\u30c6\u30fc\u30c8\u30ec\u30b9: \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u4e0d\u8981\u3001\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u304c\u5bb9\u6613</li> <li>\u2705 \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9: \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3078\u306e\u554f\u3044\u5408\u308f\u305b\u4e0d\u8981\u3067\u9ad8\u901f</li> <li>\u2705 \u30b3\u30b9\u30c8\u524a\u6e1b: \u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u30a4\u30f3\u30d5\u30e9\u4e0d\u8981</li> <li>\u26a0\ufe0f \u5373\u5ea7\u306e\u7121\u52b9\u5316\u304c\u56f0\u96e3: \u30c8\u30fc\u30af\u30f3\u6709\u52b9\u671f\u9650\u307e\u3067\u6709\u52b9\uff08\u77ed\u3044\u6709\u52b9\u671f\u9650\u3067\u5bfe\u5fdc\uff09</li> <li>\u26a0\ufe0f \u30b5\u30a4\u30ba\u5236\u9650: Cookie\u5236\u9650\uff08\u7d044KB\uff09\u3001Auth.js\u306f\u30c1\u30e3\u30f3\u30ad\u30f3\u30b0\u5bfe\u5fdc</li> </ul>"},{"location":"auth/basics/#3-b-database-session","title":"\ud83d\udccc \u30d1\u30bf\u30fc\u30f33-B: Database Session","text":"<p>\u5b9f\u969b\u306e\u8a8d\u8a3c\u30d5\u30ed\u30fc\uff08\u5916\u90e8IdP + \u30bb\u30c3\u30b7\u30e7\u30f3DB\u4f7f\u7528\uff09:</p> <pre><code>sequenceDiagram\n    participant Browser as \ud83c\udf10 \u30d6\u30e9\u30a6\u30b6\n    participant BFF as \u26a1 Next.js&lt;br/&gt;(BFF)\n    participant SessionDB as \ud83d\udcbe \u30bb\u30c3\u30b7\u30e7\u30f3DB&lt;br/&gt;(Redis/PostgreSQL)\n    participant IdP as \ud83d\udd10 \u8a8d\u8a3c\u30d7\u30ed\u30d0\u30a4\u30c0\u30fc&lt;br/&gt;(Cognito/Auth0)\n    participant API as \ud83d\udd0c \u30d0\u30c3\u30af\u30a8\u30f3\u30c9API&lt;br/&gt;(Spring Boot\u7b49)\n    participant DB as \ud83d\uddc4\ufe0f \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\n    Note over Browser,BFF: \u521d\u56de\u30a2\u30af\u30bb\u30b9\uff08SSR\uff09\n    Browser-&gt;&gt;BFF: 1. \u30da\u30fc\u30b8\u30ea\u30af\u30a8\u30b9\u30c8\n    BFF-&gt;&gt;IdP: 2. \u8a8d\u8a3c\u30ea\u30c0\u30a4\u30ec\u30af\u30c8\n    IdP-&gt;&gt;Browser: 3. \u30ed\u30b0\u30a4\u30f3\u753b\u9762\u8868\u793a\n    Browser-&gt;&gt;IdP: 4. ID/\u30d1\u30b9\u30ef\u30fc\u30c9\u5165\u529b\n    IdP-&gt;&gt;BFF: 5. \u8a8d\u8a3c\u30b3\u30fc\u30c9\u8fd4\u5374\n    BFF-&gt;&gt;IdP: 6. \u30c8\u30fc\u30af\u30f3\u53d6\u5f97\uff08\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3001ID\u30c8\u30fc\u30af\u30f3\u7b49\uff09\n    BFF-&gt;&gt;SessionDB: 7. \u30bb\u30c3\u30b7\u30e7\u30f3\u60c5\u5831\u3092\u4fdd\u5b58&lt;br/&gt;\uff08\u30c8\u30fc\u30af\u30f3\u3001\u30e6\u30fc\u30b6\u30fc\u60c5\u5831\uff09\n    BFF-&gt;&gt;BFF: 8. \u30bb\u30c3\u30b7\u30e7\u30f3ID\u3092\u751f\u6210\n    BFF-&gt;&gt;API: 9. \u30c7\u30fc\u30bf\u53d6\u5f97API\u547c\u3073\u51fa\u3057\n    API-&gt;&gt;DB: 10. DB\u691c\u7d22\n    DB-&gt;&gt;API: 11. \u30c7\u30fc\u30bf\u8fd4\u5374\n    API-&gt;&gt;BFF: 12. JSON\u8fd4\u5374\n    BFF-&gt;&gt;BFF: 13. HTML\u3092\u751f\u6210\uff08SSR\uff09\n    BFF-&gt;&gt;Browser: 14. \u5b8c\u6210\u3057\u305fHTML + Cookie(session_id)\u8fd4\u5374\n\n    Note over Browser,DB: \u4ee5\u964d\u306e\u30da\u30fc\u30b8\u9077\u79fb\uff08SPA\uff09\n    Browser-&gt;&gt;BFF: 15. API Route\u547c\u3073\u51fa\u3057\uff08Cookie: session_id\u9001\u4fe1\uff09\n    BFF-&gt;&gt;SessionDB: 16. \u30bb\u30c3\u30b7\u30e7\u30f3ID\u3067\u30bb\u30c3\u30b7\u30e7\u30f3\u60c5\u5831\u3092\u53d6\u5f97\n    SessionDB-&gt;&gt;BFF: 17. \u30bb\u30c3\u30b7\u30e7\u30f3\u60c5\u5831\u8fd4\u5374\n    BFF-&gt;&gt;API: 18. \u30d0\u30c3\u30af\u30a8\u30f3\u30c9API\u3078\u4e2d\u7d99\n    API-&gt;&gt;DB: 19. DB\u691c\u7d22\n    DB-&gt;&gt;API: 20. \u30c7\u30fc\u30bf\u8fd4\u5374\n    API-&gt;&gt;BFF: 21. JSON\u8fd4\u5374\n    BFF-&gt;&gt;Browser: 22. JSON\u8fd4\u5374\n    Browser-&gt;&gt;Browser: 23. JavaScript\u3067\u753b\u9762\u66f4\u65b0</code></pre> <p>\u30dd\u30a4\u30f3\u30c8:</p> <ul> <li>\u30d1\u30b9\u30ef\u30fc\u30c9\u7ba1\u7406\u306f IdP\u304c\u62c5\u5f53 \uff08\u81ea\u524d\u3067\u7ba1\u7406\u3057\u306a\u3044\uff09</li> <li>BFF\u5c64\u3067 \u30bb\u30c3\u30b7\u30e7\u30f3ID\u3092HttpOnly Cookie\u3067\u7ba1\u7406 \u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u60c5\u5831\u306fDB\u306b\u4fdd\u5b58</li> <li>Cookie\u306b\u306f\u30bb\u30c3\u30b7\u30e7\u30f3ID\u306e\u307f\u4fdd\u5b58\u3001\u30e6\u30fc\u30b6\u30fc\u30c7\u30fc\u30bf\u306f\u30b5\u30fc\u30d0\u30fc\u5074\u3067\u7ba1\u7406</li> <li>\u5373\u5ea7\u306b\u30bb\u30c3\u30b7\u30e7\u30f3\u7121\u52b9\u5316\u304c\u53ef\u80fd \uff08DB\u304b\u3089\u524a\u9664\u3059\u308b\u3060\u3051\uff09</li> <li>Auth.js (NextAuth.js) \u304c\u81ea\u52d5\u7684\u306b\u30bb\u30c3\u30b7\u30e7\u30f3\u306eCRUD\u64cd\u4f5c\u3092\u5b9f\u884c</li> <li>\u30d0\u30c3\u30af\u30a8\u30f3\u30c9API\u3078\u306e\u4e2d\u7d99 \u6642\u306b\u30bb\u30c3\u30b7\u30e7\u30f3\u60c5\u5831\u304b\u3089\u30c8\u30fc\u30af\u30f3\u3092\u53d6\u5f97\u53ef\u80fd</li> </ul> <p>Database Session\u306e\u7279\u5fb4:</p> <ul> <li>\u2705 \u5373\u5ea7\u306e\u7121\u52b9\u5316: \"\u3059\u3079\u3066\u306e\u30c7\u30d0\u30a4\u30b9\u3067\u30ed\u30b0\u30a2\u30a6\u30c8\"\u306a\u3069\u304c\u5b9f\u88c5\u53ef\u80fd</li> <li>\u2705 \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3: \u30b5\u30fc\u30d0\u30fc\u5074\u3067\u30bb\u30c3\u30b7\u30e7\u30f3\u5b8c\u5168\u7ba1\u7406</li> <li>\u2705 \u540c\u6642\u30ed\u30b0\u30a4\u30f3\u5236\u9650: \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3067\u7ba1\u7406\u53ef\u80fd</li> <li>\u26a0\ufe0f \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9: \u30ea\u30af\u30a8\u30b9\u30c8\u3054\u3068\u306b\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u554f\u3044\u5408\u308f\u305b\u304c\u5fc5\u8981</li> <li>\u26a0\ufe0f \u30a4\u30f3\u30d5\u30e9\u30b3\u30b9\u30c8: \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30a2\u30c0\u30d7\u30bf\u30fc\u30fb\u30b5\u30fc\u30d3\u30b9\u306e\u7ba1\u7406\u304c\u5fc5\u8981</li> <li>\u26a0\ufe0f \u30b9\u30b1\u30fc\u30ea\u30f3\u30b0: \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u63a5\u7d9a\u3092\u8003\u616e\u3059\u308b\u5fc5\u8981\u3042\u308a</li> </ul>"},{"location":"auth/basics/#2","title":"\ud83d\udcca 2\u3064\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u6226\u7565\u306e\u6bd4\u8f03","text":"\u9805\u76ee JWT Session Database Session \u30bb\u30c3\u30b7\u30e7\u30f3\u4fdd\u5b58\u5148 HttpOnly Cookie\uff08\u6697\u53f7\u5316JWT/JWE\uff09 \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\uff08\u30bb\u30c3\u30b7\u30e7\u30f3ID\u306e\u307fCookie\uff09 \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u8981\u4ef6 \u2705 \u4e0d\u8981\uff08\u30b9\u30c6\u30fc\u30c8\u30ec\u30b9\uff09 \u274c \u5fc5\u9808 \u5373\u5ea7\u306e\u7121\u52b9\u5316 \u274c \u56f0\u96e3\uff08\u6709\u52b9\u671f\u9650\u307e\u3067\u6709\u52b9\uff09 \u2705 \u53ef\u80fd\uff08DB\u304b\u3089\u524a\u9664\uff09 \u30d1\u30d5\u30a9\u30fc\u30de\u30f3\u30b9 \u2705 \u9ad8\u901f\uff08DB\u554f\u3044\u5408\u308f\u305b\u4e0d\u8981\uff09 \u26a0\ufe0f DB\u554f\u3044\u5408\u308f\u305b\u304c\u5fc5\u8981 \u6c34\u5e73\u30b9\u30b1\u30fc\u30ea\u30f3\u30b0 \u2705 \u5bb9\u6613\uff08\u30b9\u30c6\u30fc\u30c8\u30ec\u30b9\uff09 \u26a0\ufe0f DB\u63a5\u7d9a\u3092\u8003\u616e \u5b9f\u88c5\u30b3\u30b9\u30c8 \u2705 \u4f4e\u3044 \u26a0\ufe0f \u9ad8\u3044\uff08DB\u8a2d\u5b9a\u30fb\u7ba1\u7406\u5fc5\u8981\uff09 \u904b\u7528\u30b3\u30b9\u30c8 \u2705 \u4f4e\u3044 \u26a0\ufe0f \u9ad8\u3044\uff08DB\u7ba1\u7406\u5fc5\u8981\uff09 \u9069\u7528\u4f8b \u4e00\u822c\u7684\u306aWeb\u30a2\u30d7\u30ea \u5373\u5ea7\u306e\u7121\u52b9\u5316\u304c\u5fc5\u9808 <p>\u63a8\u5968\u306e\u9078\u3073\u65b9:</p> <ul> <li>\u2705 JWT Session: \u307b\u3068\u3093\u3069\u306e\u30b1\u30fc\u30b9\uff08Auth.js\u306e\u30c7\u30d5\u30a9\u30eb\u30c8\uff09</li> <li>\u26a0\ufe0f Database Session: \u5373\u5ea7\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u7121\u52b9\u5316\u30fb\u540c\u6642\u30ed\u30b0\u30a4\u30f3\u5236\u9650\u304c\u5fc5\u9808\u306e\u5834\u5408\u306e\u307f</li> </ul> <p>BFF\u30d1\u30bf\u30fc\u30f3\u306e\u5171\u901a\u7279\u5fb4:</p> <ul> <li>\u521d\u56de\u8868\u793a\u306fSSR: \u9ad8\u901f\u30fbSEO\u5bfe\u7b56</li> <li>\u4ee5\u964d\u306fSPA\u52d5\u4f5c: \u90e8\u5206\u66f4\u65b0\u30fb\u9ad8\u901f\u9077\u79fb</li> <li>BFF\u5c64\u3067\u8a8d\u8a3c\u7ba1\u7406: \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u3067\u8a8d\u8a3c\u72b6\u614b\u3092\u7ba1\u7406</li> <li>\u30d0\u30c3\u30af\u30a8\u30f3\u30c9API\u3068\u306e\u901a\u4fe1: API Routes\u3067\u4e2d\u7d99\u3001\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u8ee2\u9001</li> </ul> <p>\u69cb\u6210\u306e\u7279\u5fb4:</p> <ul> <li>\ud83c\udfaf Next.js\u304cBFF\u5c64\u3068\u3057\u3066\u6a5f\u80fd\uff08\u8a8d\u8a3c\u7ba1\u7406\uff09</li> <li>\ud83d\udd0c \u30d0\u30c3\u30af\u30a8\u30f3\u30c9API\u306f\u5225\u30b5\u30fc\u30d0\u30fc\uff08\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u5bfe\u5fdc\uff09</li> <li>\u26a1 SSR\u3068SPA\u306e\u826f\u3044\u3068\u3053\u53d6\u308a</li> <li>\ud83d\udd10 BFF\u3067\u8a8d\u8a3c\u7ba1\u7406 + \u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u3078\u306eAPI\u547c\u3073\u51fa\u3057</li> </ul> <p>\u6280\u8853\u4f8b: Next.js + Auth.js (NextAuth.js)\u3001Nuxt.js + Auth.js\u3001\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\uff08Spring Boot\u3001FastAPI\u3001Go\u7b49\uff09</p> <p>\u63a8\u5968\u30e9\u30a4\u30d6\u30e9\u30ea:</p> <ul> <li>\u2705 <code>next-auth</code> (Auth.js): Next.js\u5411\u3051\u306e\u8a8d\u8a3c\u30e9\u30a4\u30d6\u30e9\u30ea\uff08JWT/Database\u4e21\u5bfe\u5fdc\uff09</li> <li><code>@auth/prisma-adapter</code>: Prisma ORM \u3092\u4f7f\u3063\u305fDB\u9023\u643a</li> <li><code>@supabase/auth-helpers-nextjs</code>: Supabase\u8a8d\u8a3c\u3092Next.js\u3067\u4f7f\u7528</li> </ul> <p>\u9069\u7528\u4f8b: EC\u30b5\u30a4\u30c8\u3001\u30dd\u30fc\u30bf\u30eb\u30b5\u30a4\u30c8\u3001\u30a8\u30f3\u30bf\u30fc\u30d7\u30e9\u30a4\u30baWeb\u30a2\u30d7\u30ea</p> \u306a\u305c JWT Session \u304c\u63a8\u5968\u3055\u308c\u308b\u306e\u304b\uff1f <p>Database Session\u65b9\u5f0f:</p> <pre><code>graph LR\n    Browser[\u30d6\u30e9\u30a6\u30b6] --&gt;|Cookie: session_id| NextJS[Next.js]\n    NextJS --&gt;|\u30bb\u30c3\u30b7\u30e7\u30f3\u53d6\u5f97| DB[(\u30bb\u30c3\u30b7\u30e7\u30f3DB&lt;br/&gt;PostgreSQL/MySQL\u7b49)]\n    NextJS --&gt;|API\u547c\u3073\u51fa\u3057| Backend[\u30d0\u30c3\u30af\u30a8\u30f3\u30c9API]</code></pre> <ul> <li>\u274c \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u5fc5\u9808\uff08PostgreSQL\u3001MySQL\u7b49\uff09</li> <li>\u274c \u30ea\u30af\u30a8\u30b9\u30c8\u3054\u3068\u306bDB\u554f\u3044\u5408\u308f\u305b\u304c\u5fc5\u8981\uff08\u9045\u5ef6\uff09</li> <li>\u274c \u30a4\u30f3\u30d5\u30e9\u304c\u8907\u96d1\u5316</li> <li>\u274c \u30bb\u30c3\u30b7\u30e7\u30f3DB\u306e\u7ba1\u7406\u30b3\u30b9\u30c8\u304c\u304b\u304b\u308b</li> <li>\u274c \u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u6642\u306bDB\u63a5\u7d9a\u3092\u8003\u616e</li> <li>\u2705 \u5373\u5ea7\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u7121\u52b9\u5316\u304c\u53ef\u80fd</li> </ul> <p>JWT Session\u65b9\u5f0f:</p> <pre><code>graph LR\n    Browser[\u30d6\u30e9\u30a6\u30b6] --&gt;|\"\u6697\u53f7\u5316Cookie&lt;br/&gt;(JWE)\"| NextJS[Next.js]\n    NextJS --&gt;|\"JWT\u5fa9\u53f7\u5316&lt;br/&gt;\u691c\u8a3c\"| NextJS\n    NextJS --&gt;|API\u547c\u3073\u51fa\u3057| Backend[\u30d0\u30c3\u30af\u30a8\u30f3\u30c9API]</code></pre> <ul> <li>\u2705 \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u4e0d\u8981\uff08\u30b9\u30c6\u30fc\u30c8\u30ec\u30b9\uff09</li> <li>\u2705 \u30b7\u30f3\u30d7\u30eb\u306a\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3</li> <li>\u2705 \u9ad8\u901f\u306a\u30ec\u30b9\u30dd\u30f3\u30b9\uff08DB\u554f\u3044\u5408\u308f\u305b\u4e0d\u8981\uff09</li> <li>\u2705 \u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u304c\u5bb9\u6613\uff08\u30b9\u30c6\u30fc\u30c8\u30ec\u30b9\uff09</li> <li>\u2705 \u4f4e\u30b3\u30b9\u30c8\uff08DB\u4e0d\u8981\u3001\u904b\u7528\u8ca0\u8377\u304c\u4f4e\u3044\uff09</li> <li>\u2705 \u81ea\u52d5\u30bb\u30c3\u30b7\u30e7\u30f3\u66f4\u65b0\u3068\u30bf\u30d6\u9593\u540c\u671f\u306b\u5bfe\u5fdc</li> <li>\u2705 Auth.js \u304cJWE\u6697\u53f7\u5316\u30fb\u5fa9\u53f7\u5316\u3092\u81ea\u52d5\u51e6\u7406</li> <li>\u2705 HttpOnly Cookie\u3067\u5b89\u5168\u306b\u3084\u308a\u53d6\u308a</li> <li>\u274c \u6709\u52b9\u671f\u9650\u524d\u306e\u7121\u52b9\u5316\u304c\u56f0\u96e3</li> </ul> <p>\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u9762:</p> <ul> <li>JWT\u306f ** Auth.js \u306e\u79d8\u5bc6\u9375\u3067JWE\u6697\u53f7\u5316 ** \u3055\u308c\u3066\u3044\u308b\u305f\u3081\u3001\u30d6\u30e9\u30a6\u30b6\u3067\u8aad\u3081\u306a\u3044</li> <li>Cookie\u5c5e\u6027: <code>HttpOnly</code>, <code>Secure</code>, <code>SameSite=Lax/Strict</code> \u3067\u4fdd\u8b77</li> <li>\u30c8\u30fc\u30af\u30f3\u306e\u6709\u52b9\u671f\u9650\u7ba1\u7406\u3082\u81ea\u52d5</li> </ul> <p>\u7d50\u8ad6: BFF\u30d1\u30bf\u30fc\u30f3\u3067\u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30c8\u30a2\u3092\u4f7f\u3046\u7406\u7531\u306f\u307b\u3068\u3093\u3069\u306a\u3044</p> <p>Auth.js \u306e ** JWT Session ** \u3092\u4f7f\u3048\u3070\u3001\u30bb\u30c3\u30b7\u30e7\u30f3\u30b9\u30c8\u30a2\u306a\u3057\u3067\u30bb\u30ad\u30e5\u30a2\u306a\u8a8d\u8a3c\u304c\u5b9f\u73fe\u3067\u304d\u307e\u3059\u3002\u3053\u308c\u304c ** \u73fe\u4ee3\u306eNext.js\u8a8d\u8a3c\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9 ** \u3067\u3059\u3002\u305f\u3060\u3057\u3001\u5373\u5ea7\u306e\u30bb\u30c3\u30b7\u30e7\u30f3\u7121\u52b9\u5316\u3084\u540c\u6642\u30ed\u30b0\u30a4\u30f3\u5236\u9650\u304c\u5fc5\u8981\u306a\u5834\u5408\u306f Database Session \u3092\u691c\u8a0e\u3057\u3066\u304f\u3060\u3055\u3044\u3002</p> BFF\u30d1\u30bf\u30fc\u30f3\u3067Cookie\u3092\u4f7f\u3046\u30e1\u30ea\u30c3\u30c8\u30fb\u30c7\u30e1\u30ea\u30c3\u30c8 <p>\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9 \u2194 BFF\u9593\u306e\u8a8d\u8a3c\u60c5\u5831\u3084\u308a\u53d6\u308a\u65b9\u6cd5\u306e\u6bd4\u8f03</p>"},{"location":"auth/basics/#cookie","title":"\ud83c\udf6a Cookie\u65b9\u5f0f\uff08\u63a8\u5968\uff09","text":"<p>\u30e1\u30ea\u30c3\u30c8:</p> <ul> <li>\u2705 \u81ea\u52d5\u9001\u4fe1: \u30d6\u30e9\u30a6\u30b6\u304c\u81ea\u52d5\u7684\u306bCookie\u3092\u9001\u4fe1\uff08\u30b3\u30fc\u30c9\u4e0d\u8981\uff09</li> <li>\u2705 HttpOnly\u5c5e\u6027: JavaScript\u304b\u3089\u30a2\u30af\u30bb\u30b9\u4e0d\u53ef \u2192 XSS\u653b\u6483\u3092\u9632\u5fa1</li> <li>\u2705 Secure\u5c5e\u6027: HTTPS\u901a\u4fe1\u306e\u307f\u3067\u9001\u4fe1 \u2192 \u76d7\u8074\u9632\u6b62</li> <li>\u2705 SameSite\u5c5e\u6027: CSRF\u653b\u6483\u3092\u9632\u5fa1\uff08SameSite=Strict/Lax\uff09</li> <li>\u2705 \u6709\u52b9\u671f\u9650\u7ba1\u7406: Cookie\u306e<code>Expires</code>/<code>Max-Age</code>\u3067\u81ea\u52d5\u524a\u9664</li> <li>\u2705 \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u6a19\u6e96: Auth.js (NextAuth.js) \u304c\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u5bfe\u5fdc</li> <li>\u2705 SSR\u5bfe\u5fdc: \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u3067\u3082\u8a8d\u8a3c\u72b6\u614b\u3092\u78ba\u8a8d\u53ef\u80fd</li> </ul> <p>\u4ed5\u7d44\u307f:</p> <ul> <li>Auth.js (NextAuth.js) \u304c\u81ea\u52d5\u7684\u306bCookie\u3092\u8a2d\u5b9a\uff08HttpOnly\u3001Secure\u3001SameSite\u5c5e\u6027\u4ed8\u304d\uff09</li> <li>\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u5074\u306f\u4f55\u3082\u3059\u308b\u5fc5\u8981\u306a\u3057\uff08\u81ea\u52d5\u9001\u4fe1\uff09</li> <li>API Route\u5074\u306f\u81ea\u52d5\u7684\u306bCookie\u304b\u3089\u8a8d\u8a3c\u60c5\u5831\u3092\u53d6\u5f97</li> </ul> <p>\u30c7\u30e1\u30ea\u30c3\u30c8:</p> <ul> <li>\u26a0\ufe0f \u30c9\u30e1\u30a4\u30f3\u5236\u9650: Same-Origin Policy\u3001\u30b5\u30d6\u30c9\u30e1\u30a4\u30f3\u8a2d\u5b9a\u304c\u5fc5\u8981</li> <li>\u26a0\ufe0f \u30b5\u30a4\u30ba\u5236\u9650: 4KB\u5236\u9650\uff08\u901a\u5e38\u306f\u5341\u5206\uff09</li> <li>\u26a0\ufe0f CSRF\u5bfe\u7b56\u5fc5\u8981: SameSite\u5c5e\u6027\u3067\u5bfe\u5fdc\u53ef\u80fd</li> </ul>"},{"location":"auth/basics/#authorization-header","title":"\ud83d\udd17 Authorization Header\u65b9\u5f0f","text":"<p>\u30e1\u30ea\u30c3\u30c8:</p> <ul> <li>\u2705 \u30c9\u30e1\u30a4\u30f3\u5236\u9650\u306a\u3057: CORS\u3067\u7570\u306a\u308b\u30c9\u30e1\u30a4\u30f3\u9593\u3067\u3082\u9001\u4fe1\u53ef\u80fd</li> <li>\u2705 \u30b5\u30a4\u30ba\u5236\u9650\u7de9\u548c: \u30ea\u30af\u30a8\u30b9\u30c8\u30d8\u30c3\u30c0\u30fc\u306b\u5236\u9650\u306a\u3057</li> <li>\u2705 \u660e\u793a\u7684\u5236\u5fa1: \u958b\u767a\u8005\u304c\u9001\u4fe1\u30bf\u30a4\u30df\u30f3\u30b0\u3092\u5b8c\u5168\u5236\u5fa1</li> </ul> <p>\u30c7\u30e1\u30ea\u30c3\u30c8:</p> <ul> <li>\u274c XSS\u8106\u5f31: LocalStorage\u306b\u4fdd\u5b58\u3059\u308b\u3068\u76d7\u307e\u308c\u308b\u30ea\u30b9\u30af</li> <li>\u274c \u624b\u52d5\u5b9f\u88c5: \u5168API\u30b3\u30fc\u30eb\u3067\u624b\u52d5\u8a2d\u5b9a\u304c\u5fc5\u8981</li> <li>\u274c SSR\u56f0\u96e3: \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u3067\u30c8\u30fc\u30af\u30f3\u53d6\u5f97\u304c\u56f0\u96e3</li> <li>\u274c \u81ea\u52d5\u9001\u4fe1\u306a\u3057: fetch/axios\u3067\u6bce\u56de\u30d8\u30c3\u30c0\u30fc\u8a2d\u5b9a\u304c\u5fc5\u8981</li> </ul>"},{"location":"auth/basics/#_17","title":"\ud83d\udcca \u6bd4\u8f03\u8868","text":"\u9805\u76ee Cookie Authorization Header \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3 \u2705 \u9ad8\uff08HttpOnly\uff09 \u274c \u4f4e\uff08XSS\u8106\u5f31\uff09 \u5b9f\u88c5\u30b3\u30b9\u30c8 \u2705 \u4f4e\uff08\u81ea\u52d5\uff09 \u274c \u9ad8\uff08\u624b\u52d5\uff09 SSR\u5bfe\u5fdc \u2705 \u7c21\u5358 \u274c \u56f0\u96e3 \u30c9\u30e1\u30a4\u30f3\u9593\u901a\u4fe1 \u274c \u5236\u9650\u3042\u308a \u2705 \u5236\u9650\u306a\u3057 \u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u5bfe\u5fdc \u2705 \u6a19\u6e96 \u26a0\ufe0f \u30ab\u30b9\u30bf\u30e0\u5b9f\u88c5"},{"location":"auth/basics/#bff","title":"\ud83c\udfaf BFF\u30d1\u30bf\u30fc\u30f3\u3067\u306e\u63a8\u5968\u69cb\u6210","text":"<pre><code>graph LR\n    Browser[\ud83c\udf10 \u30d6\u30e9\u30a6\u30b6]\n    BFF[\u26a1 Next.js BFF]\n    API[\ud83d\udd0c \u30d0\u30c3\u30af\u30a8\u30f3\u30c9API]\n\n    Browser --&gt;|\"\ud83c\udf6a Cookie&lt;br/&gt;\uff08\u6697\u53f7\u5316JWT\uff09\"| BFF\n    BFF --&gt;|\"\ud83d\udd11 Bearer Token&lt;br/&gt;\uff08\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\uff09\"| API</code></pre> <p>\u63a8\u5968\u30d1\u30bf\u30fc\u30f3:</p> <ol> <li>\u30d6\u30e9\u30a6\u30b6 \u2194 BFF: Cookie\u3067\u6697\u53f7\u5316JWT\uff08Auth.js \u6a19\u6e96\uff09</li> <li>BFF \u2194 \u30d0\u30c3\u30af\u30a8\u30f3\u30c9API: Authorization Header\u3067\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3</li> </ol> <p>\u7406\u7531:</p> <ul> <li>\u30d6\u30e9\u30a6\u30b6\u5074\u306f**\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u6700\u512a\u5148** \u2192 Cookie\uff08HttpOnly\uff09</li> <li>BFF\u5074\u306f**\u67d4\u8edf\u6027\u91cd\u8996** \u2192 Header\uff08\u7570\u306a\u308b\u30c9\u30e1\u30a4\u30f3OK\uff09</li> </ul> <p>BFF\u5c64\u306e\u5f79\u5272:</p> <ul> <li>Cookie\u304b\u3089\u8a8d\u8a3c\u60c5\u5831\u3092\u53d6\u5f97\uff08Auth.js \u304c\u81ea\u52d5\u51e6\u7406\uff09</li> <li>\u30d0\u30c3\u30af\u30a8\u30f3\u30c9API\u306b\u30a2\u30af\u30bb\u30b9\u30c8\u30fc\u30af\u30f3\u3092\u8ee2\u9001</li> <li>API\u30ec\u30b9\u30dd\u30f3\u30b9\u3092\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u306b\u8fd4\u5374</li> </ul> <p>\u7d50\u8ad6: BFF\u30d1\u30bf\u30fc\u30f3\u3067\u306fCookie\u304c\u5727\u5012\u7684\u306b\u63a8\u5968</p> <p>Auth.js (NextAuth.js) \u306e\u6a19\u6e96\u5b9f\u88c5\u306b\u5f93\u3044\u3001\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30fbBFF\u9593\u306fCookie\u3092\u4f7f\u7528\u3059\u308b\u306e\u304c\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u3067\u3059\u3002\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u3001\u5b9f\u88c5\u30b3\u30b9\u30c8\u3001SSR\u5bfe\u5fdc\u3059\u3079\u3066\u306e\u9762\u3067\u512a\u308c\u3066\u3044\u307e\u3059\u3002</p>"},{"location":"auth/basics/#_18","title":"\u7528\u8a9e\u96c6","text":"\u7528\u8a9e\u4e00\u89a7 \u7528\u8a9e \u8aac\u660e \u30b9\u30b3\u30fc\u30d7 \u30a2\u30af\u30bb\u30b9\u6a29\u9650\u306e\u7bc4\u56f2(\u4f8b: <code>read:profile</code>) \u8a8d\u53ef\u30b3\u30fc\u30c9 \u30c8\u30fc\u30af\u30f3\u53d6\u5f97\u306e\u305f\u3081\u306e\u4e00\u6642\u7684\u306a\u30b3\u30fc\u30c9 PKCE \u8a8d\u53ef\u30b3\u30fc\u30c9\u6a2a\u53d6\u308a\u653b\u6483\u3092\u9632\u3050\u4ed5\u7d44\u307f CSRF \u30af\u30ed\u30b9\u30b5\u30a4\u30c8\u30ea\u30af\u30a8\u30b9\u30c8\u30d5\u30a9\u30fc\u30b8\u30a7\u30ea XSS \u30af\u30ed\u30b9\u30b5\u30a4\u30c8\u30b9\u30af\u30ea\u30d7\u30c6\u30a3\u30f3\u30b0"},{"location":"auth/basics/#_19","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>\u57fa\u790e\u3092\u7406\u89e3\u3057\u305f\u3089\u3001\u5b9f\u88c5\u306b\u9032\u307f\u307e\u3057\u3087\u3046:</p> <ul> <li>\u5b9f\u88c5\u30ac\u30a4\u30c9 - Next.js + Spring Boot + Cognito \u3067\u306e\u5177\u4f53\u7684\u306a\u5b9f\u88c5\u65b9\u6cd5</li> </ul> <p>\u6700\u7d42\u66f4\u65b0: 2025\u5e7410\u6708 \u5bfe\u8c61\u8aad\u8005: \u8a8d\u8a3c\u6a5f\u80fd\u3092\u5b9f\u88c5\u3059\u308b\u958b\u767a\u8005(\u521d\u7d1a\u301c\u4e2d\u7d1a)</p>"},{"location":"auth/implementation/","title":"Next.js + Spring Boot + Cognito \u5b9f\u88c5\u30ac\u30a4\u30c9","text":"<p>\ud83d\ude80 \u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u76ee\u7684 Next.js\u3001Spring Boot\u3001AWS Cognito\u3092\u4f7f\u3063\u305f\u8a8d\u8a3c\u6a5f\u80fd\u306e\u5b9f\u88c5\u65b9\u6cd5\u3092\u3001\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5bfe\u7b56\u3068\u5171\u306b\u89e3\u8aac\u3057\u307e\u3059\u3002BFF\u30d1\u30bf\u30fc\u30f3\u3092\u63a1\u7528\u3057\u30012025\u5e74\u306e\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u306b\u6e96\u62e0\u3057\u305f\u5b9f\u88c5\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002</p>"},{"location":"auth/implementation/#_1","title":"\ud83d\udcda \u95a2\u9023\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8","text":"<ul> <li>\u524d\u63d0\u77e5\u8b58: \u57fa\u790e\u77e5\u8b58 - \u8a8d\u8a3c\u30fb\u8a8d\u53ef\u306e\u57fa\u672c\u6982\u5ff5</li> </ul>"},{"location":"auth/implementation/#_2","title":"\u30b7\u30b9\u30c6\u30e0\u69cb\u6210","text":"\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3(BFF\u30d1\u30bf\u30fc\u30f3) <pre><code>graph TB\n    Browser[\ud83c\udf10 \u30d6\u30e9\u30a6\u30b6]\n    Next[\u26a1 Next.js BFF&lt;br/&gt;\u30c8\u30fc\u30af\u30f3\u7ba1\u7406&lt;br/&gt;API\u30d7\u30ed\u30ad\u30b7]\n    Cognito[\ud83d\udd10 AWS Cognito&lt;br/&gt;\u8a8d\u8a3c\u30fb\u30c8\u30fc\u30af\u30f3\u767a\u884c]\n    Spring[\u2615 Spring Boot API&lt;br/&gt;\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af]\n\n    Browser &lt;--&gt;|\"Cookie&lt;br/&gt;HttpOnly/Secure\"| Next\n    Next &lt;--&gt;|\"OAuth 2.0&lt;br/&gt;Code+PKCE\"| Cognito\n    Next --&gt;|Bearer Token| Spring</code></pre> <p>\u5404\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8\u306e\u5f79\u5272:</p> \u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8 \u8cac\u52d9 Next.js BFF \u8a8d\u8a3c\u30d5\u30ed\u30fc\u7ba1\u7406\u3001\u30c8\u30fc\u30af\u30f3\u7ba1\u7406\u3001API\u30d7\u30ed\u30ad\u30b7 AWS Cognito \u8a8d\u8a3c\u30fb\u8a8d\u53ef\u3001\u30c8\u30fc\u30af\u30f3\u767a\u884c\u3001MFA Spring Boot \u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u3001\u30c8\u30fc\u30af\u30f3\u691c\u8a3c <p>BFF\u30d1\u30bf\u30fc\u30f3\u306e\u5229\u70b9:</p> <ul> <li>\u2705 \u30c8\u30fc\u30af\u30f3\u304c\u30d6\u30e9\u30a6\u30b6\u306b\u9732\u51fa\u3057\u306a\u3044(XSS\u5bfe\u7b56)</li> <li>\u2705 \u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3Cookie\u5ec3\u6b62\u306b\u5bfe\u5fdc</li> <li>\u2705 CORS\u8a2d\u5b9a\u304c\u30b7\u30f3\u30d7\u30eb</li> <li>\u2705 \u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u30c8\u30fc\u30af\u30f3\u3092\u5b89\u5168\u306b\u7ba1\u7406</li> </ul>"},{"location":"auth/implementation/#_3","title":"\u8a8d\u8a3c\u30d5\u30ed\u30fc","text":"\u521d\u56de\u30ed\u30b0\u30a4\u30f3 <pre><code>sequenceDiagram\n    participant Browser\n    participant Next as Next.js BFF\n    participant Cognito\n    participant Spring as Spring Boot\n\n    Browser-&gt;&gt;Next: 1. \u30ed\u30b0\u30a4\u30f3\u30af\u30ea\u30c3\u30af\n    Note over Next: PKCE\u751f\u6210\n    Next-&gt;&gt;Cognito: 2. \u8a8d\u53ef\u30ea\u30af\u30a8\u30b9\u30c8&lt;br/&gt;(code_challenge, state)\n    Cognito-&gt;&gt;Browser: 3. \u30ed\u30b0\u30a4\u30f3\u753b\u9762\n    Browser-&gt;&gt;Cognito: 4. \u8a8d\u8a3c\u60c5\u5831\u5165\u529b\n    Cognito-&gt;&gt;Next: 5. \u8a8d\u53ef\u30b3\u30fc\u30c9\n    Next-&gt;&gt;Cognito: 6. \u30c8\u30fc\u30af\u30f3\u8981\u6c42&lt;br/&gt;(code, code_verifier)\n    Cognito-&gt;&gt;Next: 7. \u30c8\u30fc\u30af\u30f3\u767a\u884c\n    Note over Next: \u30b5\u30fc\u30d0\u30fc\u30bb\u30c3\u30b7\u30e7\u30f3\u306b\u4fdd\u5b58\n    Next-&gt;&gt;Browser: 8. HttpOnly Cookie\u8a2d\u5b9a\n    Browser-&gt;&gt;Next: 9. API\u30ea\u30af\u30a8\u30b9\u30c8\n    Next-&gt;&gt;Spring: 10. Bearer Token\n    Spring-&gt;&gt;Next: 11. \u30c7\u30fc\u30bf\n    Next-&gt;&gt;Browser: 12. \u30ec\u30b9\u30dd\u30f3\u30b9</code></pre>"},{"location":"auth/implementation/#aws-cognito","title":"AWS Cognito \u8a2d\u5b9a","text":"\u30e6\u30fc\u30b6\u30fc\u30d7\u30fc\u30eb\u4f5c\u6210 <pre><code># \u8a8d\u8a3c\u30d5\u30ed\u30fc\n- Email/Password\n- MFA: Optional(TOTP\u63a8\u5968)\n- \u30d1\u30b9\u30ef\u30fc\u30c9\u30dd\u30ea\u30b7\u30fc: \u5f37\u529b(12\u6587\u5b57\u4ee5\u4e0a\u3001\u5927\u5c0f\u82f1\u6570\u8a18\u53f7)\n</code></pre>"},{"location":"auth/implementation/#_4","title":"\u30a2\u30d7\u30ea\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a2d\u5b9a","text":"<pre><code># Terraform\u4f8b\nresource \"aws_cognito_user_pool_client\" \"app\" {\n  name         = \"nextjs-app\"\n  user_pool_id = aws_cognito_user_pool.main.id\n\n  # Authorization Code + PKCE\n  allowed_oauth_flows = [\"code\"]\n  allowed_oauth_flows_user_pool_client = true\n\n  # \u30b9\u30b3\u30fc\u30d7\n  allowed_oauth_scopes = [\n    \"openid\",\n    \"email\",\n    \"profile\"\n  ]\n\n  # \u30b3\u30fc\u30eb\u30d0\u30c3\u30afURL\n  callback_urls = [\n    \"http://localhost:3000/api/auth/callback/cognito\",\n    \"https://yourapp.com/api/auth/callback/cognito\"\n  ]\n\n  # \u30c8\u30fc\u30af\u30f3\u6709\u52b9\u671f\u9650\n  access_token_validity  = 1   # 1\u6642\u9593\n  id_token_validity      = 1   # 1\u6642\u9593\n  refresh_token_validity = 30  # 30\u65e5\n\n  # \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\n  prevent_user_existence_errors = \"ENABLED\"\n  enable_token_revocation       = true\n}\n</code></pre>"},{"location":"auth/implementation/#nextjs","title":"Next.js \u5b9f\u88c5","text":"1. NextAuth \u8a2d\u5b9a <pre><code>npm install next-auth\n</code></pre> <pre><code>// app/api/auth/[...nextauth]/route.ts\nimport NextAuth from \"next-auth\";\nimport CognitoProvider from \"next-auth/providers/cognito\";\n\nexport const authOptions = {\n  providers: [\n    CognitoProvider({\n      clientId: process.env.COGNITO_CLIENT_ID!,\n      clientSecret: process.env.COGNITO_CLIENT_SECRET!,\n      issuer: process.env.COGNITO_ISSUER!,\n      checks: [\"pkce\", \"state\"], // PKCE + state \u81ea\u52d5\u8a2d\u5b9a\n    })\n  ],\n\n  session: {\n    strategy: \"jwt\",\n    maxAge: 30 * 24 * 60 * 60, // 30\u65e5\n  },\n\n  callbacks: {\n    async jwt({ token, account }) {\n      if (account) {\n        token.accessToken = account.access_token;\n        token.idToken = account.id_token;\n        token.refreshToken = account.refresh_token;\n        token.expiresAt = account.expires_at;\n      }\n\n      // \u30c8\u30fc\u30af\u30f3\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\n      if (Date.now() &lt; token.expiresAt * 1000) {\n        return token;\n      }\n\n      return refreshAccessToken(token);\n    },\n\n    async session({ session, token }) {\n      session.accessToken = token.accessToken;\n      session.error = token.error;\n      return session;\n    }\n  },\n};\n\nasync function refreshAccessToken(token: any) {\n  try {\n    const response = await fetch(\n      `${process.env.COGNITO_ISSUER}/oauth2/token`,\n      {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n        body: new URLSearchParams({\n          grant_type: \"refresh_token\",\n          client_id: process.env.COGNITO_CLIENT_ID!,\n          refresh_token: token.refreshToken,\n        }),\n      }\n    );\n\n    const tokens = await response.json();\n\n    return {\n      ...token,\n      accessToken: tokens.access_token,\n      idToken: tokens.id_token,\n      expiresAt: Date.now() / 1000 + tokens.expires_in,\n    };\n  } catch (error) {\n    return { ...token, error: \"RefreshAccessTokenError\" };\n  }\n}\n\nconst handler = NextAuth(authOptions);\nexport { handler as GET, handler as POST };\n</code></pre> 2. API \u30d7\u30ed\u30ad\u30b7(BFF) <pre><code>// app/api/users/profile/route.ts\nimport { getServerSession } from \"next-auth\";\nimport { authOptions } from \"@/app/api/auth/[...nextauth]/route\";\nimport { NextResponse } from \"next/server\";\n\nexport async function GET() {\n  const session = await getServerSession(authOptions);\n\n  if (!session?.idToken) {\n    return NextResponse.json({ error: \"Unauthorized\" }, { status: 401 });\n  }\n\n  try {\n    const response = await fetch(\n      `${process.env.API_BASE_URL}/users/profile`,\n      {\n        headers: {\n          Authorization: `Bearer ${session.idToken}`,\n        },\n      }\n    );\n\n    const data = await response.json();\n    return NextResponse.json(data);\n  } catch (error) {\n    return NextResponse.json(\n      { error: \"API request failed\" },\n      { status: 500 }\n    );\n  }\n}\n</code></pre> 3. \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u5074 <pre><code>// app/page.tsx\n\"use client\";\n\nimport { useSession, signIn, signOut } from \"next-auth/react\";\n\nexport default function Home() {\n  const { data: session, status } = useSession();\n\n  if (status === \"loading\") return &lt;div&gt;Loading...&lt;/div&gt;;\n\n  if (!session) {\n    return &lt;button onClick={() =&gt; signIn(\"cognito\")}&gt;\u30ed\u30b0\u30a4\u30f3&lt;/button&gt;;\n  }\n\n  return (\n    &lt;div&gt;\n      &lt;p&gt;\u3088\u3046\u3053\u305d\u3001{session.user?.email}\u3055\u3093&lt;/p&gt;\n      &lt;button onClick={() =&gt; signOut()}&gt;\u30ed\u30b0\u30a2\u30a6\u30c8&lt;/button&gt;\n    &lt;/div&gt;\n  );\n}\n</code></pre>"},{"location":"auth/implementation/#spring-boot","title":"Spring Boot \u5b9f\u88c5","text":"1. \u4f9d\u5b58\u95a2\u4fc2 <pre><code>&lt;!-- pom.xml --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-oauth2-resource-server&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre> 2. \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a <pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n\n    @Value(\"${spring.security.oauth2.resourceserver.jwt.issuer-uri}\")\n    private String issuerUri;\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        http\n            .cors(cors -&gt; cors.configurationSource(corsConfigurationSource()))\n            .csrf(csrf -&gt; csrf.disable())\n            .authorizeHttpRequests(auth -&gt; auth\n                .requestMatchers(\"/api/public/**\").permitAll()\n                .requestMatchers(\"/api/**\").authenticated()\n            )\n            .oauth2ResourceServer(oauth2 -&gt; oauth2\n                .jwt(jwt -&gt; jwt.decoder(jwtDecoder()))\n            );\n\n        return http.build();\n    }\n\n    @Bean\n    public JwtDecoder jwtDecoder() {\n        return JwtDecoders.fromIssuerLocation(issuerUri);\n    }\n\n    @Bean\n    public CorsConfigurationSource corsConfigurationSource() {\n        CorsConfiguration config = new CorsConfiguration();\n        config.setAllowedOrigins(List.of(\"http://localhost:3000\"));\n        config.setAllowedMethods(List.of(\"GET\", \"POST\", \"PUT\", \"DELETE\"));\n        config.setAllowedHeaders(List.of(\"*\"));\n        config.setAllowCredentials(true);\n\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(\"/**\", config);\n        return source;\n    }\n}\n</code></pre> 3. API\u5b9f\u88c5 <pre><code>@RestController\n@RequestMapping(\"/api/users\")\npublic class UserController {\n\n    @GetMapping(\"/profile\")\n    public ResponseEntity&lt;UserProfile&gt; getProfile(\n        @AuthenticationPrincipal Jwt jwt\n    ) {\n        String userId = jwt.getSubject();\n        String email = jwt.getClaimAsString(\"email\");\n\n        UserProfile profile = new UserProfile(userId, email);\n        return ResponseEntity.ok(profile);\n    }\n}\n</code></pre> 4. \u8a2d\u5b9a\u30d5\u30a1\u30a4\u30eb <pre><code># application.yml\nspring:\n  security:\n    oauth2:\n      resourceserver:\n        jwt:\n          issuer-uri: https://cognito-idp.ap-northeast-1.amazonaws.com/ap-northeast-1_xxxxx\n          jwk-set-uri: https://cognito-idp.ap-northeast-1.amazonaws.com/ap-northeast-1_xxxxx/.well-known/jwks.json\n</code></pre>"},{"location":"auth/implementation/#_5","title":"\u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5bfe\u7b56","text":"Cookie \u8a2d\u5b9a <pre><code>// Next.js\nSet-Cookie: session_id=xxx;\n  HttpOnly;         // XSS\u5bfe\u7b56\n  Secure;           // HTTPS\u5fc5\u9808\n  SameSite=Strict;  // CSRF\u5bfe\u7b56\n  Path=/;\n  Max-Age=2592000   // 30\u65e5\n</code></pre> CSP \u8a2d\u5b9a <pre><code>// next.config.js\nconst securityHeaders = [\n  {\n    key: 'Content-Security-Policy',\n    value: \"default-src 'self'; script-src 'self' 'unsafe-inline';\"\n  },\n  {\n    key: 'X-Frame-Options',\n    value: 'DENY'\n  },\n  {\n    key: 'X-Content-Type-Options',\n    value: 'nosniff'\n  }\n];\n</code></pre> \u30c8\u30fc\u30af\u30f3\u4fdd\u7ba1\u5834\u6240 \u5834\u6240 \u7528\u9014 \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3 Next.js \u30b5\u30fc\u30d0\u30fc \u5168\u30c8\u30fc\u30af\u30f3 \u2705 \u6700\u3082\u5b89\u5168 HttpOnly Cookie \u30bb\u30c3\u30b7\u30e7\u30f3ID \u2705 \u5b89\u5168 LocalStorage \u306a\u3057 \u274c \u4f7f\u7528\u7981\u6b62 \u8105\u5a01\u3068\u5bfe\u7b56 \u8105\u5a01 \u5bfe\u7b56 \u5b9f\u88c5 XSS HttpOnly Cookie\u3001CSP \ud83d\udd34 \u5fc5\u9808 CSRF SameSite=Strict\u3001state \ud83d\udd34 \u5fc5\u9808 \u30c8\u30fc\u30af\u30f3\u7a83\u53d6 \u77ed\u5bff\u547d(1\u6642\u9593)\u3001HTTPS \ud83d\udd34 \u5fc5\u9808 \u30d5\u30a3\u30c3\u30b7\u30f3\u30b0 WebAuthn/\u30d1\u30b9\u30ad\u30fc \ud83d\udfe1 \u63a8\u5968"},{"location":"auth/implementation/#_6","title":"\u30c1\u30a7\u30c3\u30af\u30ea\u30b9\u30c8","text":"AWS Cognito <ul> <li> \u30e6\u30fc\u30b6\u30fc\u30d7\u30fc\u30eb\u4f5c\u6210</li> <li> \u30a2\u30d7\u30ea\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u8a2d\u5b9a(Authorization Code + PKCE)</li> <li> \u30c8\u30fc\u30af\u30f3\u6709\u52b9\u671f\u9650\u8a2d\u5b9a(1\u6642\u9593/30\u65e5)</li> <li> \u30b3\u30fc\u30eb\u30d0\u30c3\u30afURL\u767b\u9332</li> <li> MFA\u6709\u52b9\u5316(\u63a8\u5968)</li> </ul> Next.js <ul> <li> NextAuth \u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u30fb\u8a2d\u5b9a</li> <li> \u74b0\u5883\u5909\u6570\u8a2d\u5b9a</li> <li> API \u30d7\u30ed\u30ad\u30b7\u5b9f\u88c5</li> <li> Cookie \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u8a2d\u5b9a</li> <li> CSP \u30d8\u30c3\u30c0\u30fc\u8a2d\u5b9a</li> </ul> Spring Boot <ul> <li> OAuth2 Resource Server \u8a2d\u5b9a</li> <li> JWT Decoder \u8a2d\u5b9a</li> <li> CORS \u8a2d\u5b9a</li> <li> API \u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u5b9f\u88c5</li> </ul> \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3 <ul> <li> HTTPS \u6709\u52b9\u5316</li> <li> HttpOnly Cookie \u4f7f\u7528</li> <li> SameSite=Strict \u8a2d\u5b9a</li> <li> CSP \u8a2d\u5b9a</li> <li> \u30c8\u30fc\u30af\u30f3\u6709\u52b9\u671f\u9650\u78ba\u8a8d</li> </ul>"},{"location":"auth/implementation/#_7","title":"\u30c8\u30e9\u30d6\u30eb\u30b7\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0","text":"401 Unauthorized <pre><code># \u30c8\u30fc\u30af\u30f3\u691c\u8a3c\u5931\u6557\n- issuer-uri \u304c\u6b63\u3057\u3044\u304b\u78ba\u8a8d\n- \u30c8\u30fc\u30af\u30f3\u306e\u6709\u52b9\u671f\u9650\u3092\u78ba\u8a8d\n- JWKS URI \u306b\u30a2\u30af\u30bb\u30b9\u53ef\u80fd\u304b\u78ba\u8a8d\n</code></pre> CORS \u30a8\u30e9\u30fc <pre><code># Next.js \u3068 Spring Boot \u306e\u8a2d\u5b9a\u78ba\u8a8d\n- Spring Boot: allowedOrigins \u306b Next.js URL\n- allowCredentials: true\n</code></pre> \u30c8\u30fc\u30af\u30f3\u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u5931\u6557 <pre><code># \u30ea\u30d5\u30ec\u30c3\u30b7\u30e5\u30c8\u30fc\u30af\u30f3\u306e\u78ba\u8a8d\n- \u6709\u52b9\u671f\u9650\u5185\u304b\n- Cognito \u3067\u30ed\u30fc\u30c6\u30fc\u30b7\u30e7\u30f3\u8a2d\u5b9a\u78ba\u8a8d\n</code></pre>"},{"location":"auth/implementation/#_8","title":"\ud83d\udcda \u53c2\u8003\u8cc7\u6599","text":""},{"location":"auth/implementation/#aws","title":"AWS\u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8","text":"AWS Black Belt \u30aa\u30f3\u30e9\u30a4\u30f3\u30bb\u30df\u30ca\u30fc - Amazon Cognito <p>AWS\u304c\u63d0\u4f9b\u3059\u308b\u516c\u5f0f\u306e\u6280\u8853\u8cc7\u6599\u3067\u3059\u3002Cognito\u306e\u57fa\u790e\u304b\u3089\u5fdc\u7528\u307e\u3067\u7db2\u7f85\u7684\u306b\u89e3\u8aac\u3055\u308c\u3066\u3044\u307e\u3059\u3002</p> <p>\ud83c\udfaf Amazon Cognito (2020\u5e74\u7248)</p> <ul> <li>\u5185\u5bb9: Cognito\u306e\u57fa\u672c\u6982\u5ff5\u3001\u30e6\u30fc\u30b6\u30fc\u30d7\u30fc\u30eb\u3001ID\u30d7\u30fc\u30eb\u3001\u8a8d\u8a3c\u30d5\u30ed\u30fc\u306e\u8a73\u7d30</li> <li>\u5bfe\u8c61: Cognito\u521d\u5b66\u8005\u301c\u4e2d\u7d1a\u8005</li> <li>\u8cc7\u6599: Amazon Cognito (PDF)</li> <li>\u304a\u3059\u3059\u3081\u30dd\u30a4\u30f3\u30c8:<ul> <li>\u2705 \u30e6\u30fc\u30b6\u30fc\u30d7\u30fc\u30eb\u3068ID\u30d7\u30fc\u30eb\u306e\u9055\u3044\u304c\u7406\u89e3\u3067\u304d\u308b</li> <li>\u2705 OAuth 2.0 / OIDC \u306e\u30d5\u30ed\u30fc\u56f3\u304c\u8c4a\u5bcc</li> <li>\u2705 \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9\u304c\u7db2\u7f85\u3055\u308c\u3066\u3044\u308b</li> </ul> </li> </ul> <p>\ud83c\udd95 Amazon Cognito - \u8a8d\u8a3c\u8a8d\u53ef\u3068CIAM\u306e\u69cb\u7bc9\u65b9\u6cd5 (2025\u5e74\u7248)</p> <ul> <li>\u5185\u5bb9: \u6700\u65b0\u306eCognito\u6a5f\u80fd\u3001\u8a8d\u8a3c\u8a8d\u53ef\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u3001CIAM (Customer Identity and Access Management) \u306e\u5b9f\u88c5\u30d1\u30bf\u30fc\u30f3</li> <li>\u5bfe\u8c61: \u4e2d\u7d1a\u8005\u301c\u4e0a\u7d1a\u8005\u3001\u30a8\u30f3\u30bf\u30fc\u30d7\u30e9\u30a4\u30ba\u5411\u3051</li> <li>\u8cc7\u6599: Amazon Cognito - How To Build AuthNZ CIAM (PDF)</li> <li>\u304a\u3059\u3059\u3081\u30dd\u30a4\u30f3\u30c8:<ul> <li>\u2705 2025\u5e74\u6700\u65b0\u7248 - \u6700\u65b0\u6a5f\u80fd\u3068\u30d9\u30b9\u30c8\u30d7\u30e9\u30af\u30c6\u30a3\u30b9</li> <li>\u2705 SAML / OIDC \u30d5\u30a7\u30c7\u30ec\u30fc\u30b7\u30e7\u30f3\u306e\u8a73\u7d30\u8a2d\u8a08</li> <li>\u2705 \u30de\u30eb\u30c1\u30c6\u30ca\u30f3\u30c8\u5bfe\u5fdc\u3001B2B / B2C / B2E \u30d1\u30bf\u30fc\u30f3</li> <li>\u2705 Lambda \u30c8\u30ea\u30ac\u30fc\u3092\u4f7f\u3063\u305f\u9ad8\u5ea6\u306a\u30ab\u30b9\u30bf\u30de\u30a4\u30ba</li> <li>\u2705 \u30bb\u30ad\u30e5\u30ea\u30c6\u30a3\u5f37\u5316\uff08MFA\u3001WAF\u9023\u643a\u3001\u7570\u5e38\u691c\u77e5\uff09</li> </ul> </li> </ul> <p>\ud83d\udccc \u5b66\u7fd2\u9806\u5e8f\u306e\u63a8\u5968:</p> <pre><code>1. 2020\u5e74\u7248\u3067Cognito\u306e\u57fa\u790e\u3092\u5b66\u3076\n   \u2193\n2. \u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\uff08\u5b9f\u88c5\u30ac\u30a4\u30c9\uff09\u3067\u5b9f\u88c5\u3092\u8a66\u3059\n   \u2193\n3. 2025\u5e74\u7248\u3067\u6700\u65b0\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u30d1\u30bf\u30fc\u30f3\u3092\u5b66\u3076\n</code></pre>"},{"location":"auth/implementation/#_9","title":"\u305d\u306e\u4ed6\u306e\u53c2\u8003\u8cc7\u6599","text":"\u88dc\u8db3\u30ea\u30bd\u30fc\u30b9 <ul> <li>AWS Cognito \u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8: https://docs.aws.amazon.com/cognito/</li> <li>NextAuth.js \u516c\u5f0f\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8: https://next-auth.js.org/</li> <li>Spring Security OAuth 2.0: https://spring.io/guides/tutorials/spring-boot-oauth2/</li> </ul>"},{"location":"auth/implementation/#_10","title":"\u6b21\u306e\u30b9\u30c6\u30c3\u30d7","text":"<p>\u3053\u306e\u5b9f\u88c5\u30ac\u30a4\u30c9\u3067\u3001Next.js + Spring Boot + Cognito \u3092\u4f7f\u3063\u305f\u8a8d\u8a3c\u6a5f\u80fd\u306e\u5b9f\u88c5\u65b9\u6cd5\u3092\u5b66\u3073\u307e\u3057\u305f\u3002\u3055\u3089\u306b\u7406\u89e3\u3092\u6df1\u3081\u308b\u306b\u306f\u3001\u57fa\u790e\u77e5\u8b58 \u306b\u623b\u3063\u3066\u6982\u5ff5\u3092\u518d\u78ba\u8a8d\u3059\u308b\u304b\u3001\u4e0a\u8a18\u306eAWS Black Belt\u8cc7\u6599\u3067\u6700\u65b0\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u30d1\u30bf\u30fc\u30f3\u3092\u5b66\u7fd2\u3059\u308b\u3053\u3068\u3092\u304a\u52e7\u3081\u3057\u307e\u3059\u3002</p> <p>\u6700\u7d42\u66f4\u65b0: 2025\u5e7410\u6708 \u5bfe\u8c61\u8aad\u8005: \u8a8d\u8a3c\u6a5f\u80fd\u3092\u5b9f\u88c5\u3059\u308b\u958b\u767a\u8005(\u4e2d\u7d1a)</p>"},{"location":"web-basics/","title":"Web\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u57fa\u790e","text":"<p>\ud83c\udfaf \u3053\u306e\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u306e\u76ee\u7684 Web\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u4ed5\u7d44\u307f\u3092\u3001\u30d6\u30e9\u30a6\u30b6\u3068\u30b5\u30fc\u30d0\u30fc\u306e\u901a\u4fe1\u304b\u3089\u7406\u89e3\u3057\u307e\u3059\u3002\u300c\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u300d\u300c\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b5\u30a4\u30c9\u300d\u3068\u3044\u3063\u305f\u7528\u8a9e\u306e\u610f\u5473\u3068\u3001\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u9055\u3044\u3092\u5b66\u3079\u307e\u3059\u3002</p>"},{"location":"web-basics/#_1","title":"\u30d6\u30e9\u30a6\u30b6\u3068\u30b5\u30fc\u30d0\u30fc\u306e\u57fa\u672c\u7684\u306a\u901a\u4fe1","text":""},{"location":"web-basics/#web_1","title":"Web\u30da\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u308b\u4ed5\u7d44\u307f","text":"1. \u30a2\u30c9\u30ec\u30b9\u30d0\u30fc\u306bURL\u3092\u5165\u529b <p>\u30d6\u30e9\u30a6\u30b6\u306e\u30a2\u30c9\u30ec\u30b9\u30d0\u30fc\u306b <code>https://example.com</code> \u3068\u5165\u529b\u3057\u3066Enter\u3092\u62bc\u3059\u3068\u3001\u4ee5\u4e0b\u306e\u6d41\u308c\u3067Web\u30da\u30fc\u30b8\u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002</p> <pre><code>sequenceDiagram\n    participant Browser as \ud83c\udf10 \u30d6\u30e9\u30a6\u30b6\n    participant Server as \ud83d\udda5\ufe0f Web\u30b5\u30fc\u30d0\u30fc\n\n    Browser-&gt;&gt;Server: 1. HTTP\u30ea\u30af\u30a8\u30b9\u30c8&lt;br/&gt;GET https://example.com\n    Server-&gt;&gt;Browser: 2. \u30ec\u30b9\u30dd\u30f3\u30b9&lt;br/&gt;HTML + CSS + JavaScript\n    Browser-&gt;&gt;Browser: 3. HTML\u89e3\u6790\u30fb\u753b\u9762\u63cf\u753b\n    Browser-&gt;&gt;Browser: 4. CSS\u9069\u7528\uff08\u30b9\u30bf\u30a4\u30eb\uff09\n    Browser-&gt;&gt;Browser: 5. JavaScript\u5b9f\u884c\uff08\u52d5\u4f5c\uff09</code></pre> <p>\u30b5\u30fc\u30d0\u30fc\u304c\u8fd4\u3059\u3082\u306e:</p> <ul> <li>HTML: \u30da\u30fc\u30b8\u306e\u69cb\u9020\uff08\u898b\u51fa\u3057\u3001\u6bb5\u843d\u3001\u30dc\u30bf\u30f3\u7b49\uff09</li> <li>CSS: \u30da\u30fc\u30b8\u306e\u898b\u305f\u76ee\uff08\u8272\u3001\u30ec\u30a4\u30a2\u30a6\u30c8\u3001\u30d5\u30a9\u30f3\u30c8\u7b49\uff09</li> <li>JavaScript: \u30da\u30fc\u30b8\u306e\u52d5\u4f5c\uff08\u30af\u30ea\u30c3\u30af\u6642\u306e\u51e6\u7406\u3001\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u7b49\uff09</li> </ul> <p>\u30d6\u30e9\u30a6\u30b6\u304c\u3084\u308b\u3053\u3068:</p> <ul> <li>HTML\u3092\u89e3\u6790\u3057\u3066\u30da\u30fc\u30b8\u69cb\u9020\u3092\u7406\u89e3</li> <li>CSS\u3092\u9069\u7528\u3057\u3066\u30c7\u30b6\u30a4\u30f3\u3092\u9069\u7528</li> <li>JavaScript\u3092\u5b9f\u884c\u3057\u3066\u52d5\u7684\u306a\u52d5\u4f5c\u3092\u8ffd\u52a0</li> </ul> 2. \u691c\u7d22\u30dc\u30bf\u30f3\u3092\u62bc\u3059 <p>Web\u30da\u30fc\u30b8\u3067\u691c\u7d22\u30dc\u30bf\u30f3\u3092\u62bc\u3059\u3068\u3001\u30b5\u30fc\u30d0\u30fc\u306b\u30ea\u30af\u30a8\u30b9\u30c8\u304c\u9001\u3089\u308c\u3001\u7d50\u679c\u304c\u8fd4\u3063\u3066\u304d\u307e\u3059\u3002</p> <pre><code>sequenceDiagram\n    participant User as \ud83d\udc64 \u30e6\u30fc\u30b6\u30fc\n    participant Browser as \ud83c\udf10 \u30d6\u30e9\u30a6\u30b6\n    participant Server as \ud83d\udda5\ufe0f Web\u30b5\u30fc\u30d0\u30fc\n\n    User-&gt;&gt;Browser: 1. \u691c\u7d22\u30ef\u30fc\u30c9\u5165\u529b&lt;br/&gt;\u300c\u732b\u300d\n    User-&gt;&gt;Browser: 2. \u691c\u7d22\u30dc\u30bf\u30f3\u62bc\u4e0b\n    Browser-&gt;&gt;Server: 3. HTTP\u30ea\u30af\u30a8\u30b9\u30c8&lt;br/&gt;GET /search?q=\u732b\n    Server-&gt;&gt;Server: 4. \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u691c\u7d22\n    Server-&gt;&gt;Browser: 5. \u30ec\u30b9\u30dd\u30f3\u30b9&lt;br/&gt;\u691c\u7d22\u7d50\u679c\u30c7\u30fc\u30bf\n    Browser-&gt;&gt;Browser: 6. \u753b\u9762\u306b\u691c\u7d22\u7d50\u679c\u3092\u8868\u793a</code></pre> <p>\u30ea\u30af\u30a8\u30b9\u30c8\u306e\u7a2e\u985e:</p> \u30e1\u30bd\u30c3\u30c9 \u7528\u9014 \u4f8b GET \u30c7\u30fc\u30bf\u53d6\u5f97 \u691c\u7d22\u3001\u30da\u30fc\u30b8\u8868\u793a POST \u30c7\u30fc\u30bf\u9001\u4fe1 \u30ed\u30b0\u30a4\u30f3\u3001\u6295\u7a3f PUT \u30c7\u30fc\u30bf\u66f4\u65b0 \u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u7de8\u96c6 DELETE \u30c7\u30fc\u30bf\u524a\u9664 \u6295\u7a3f\u524a\u9664"},{"location":"web-basics/#_2","title":"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b5\u30a4\u30c9\u3068\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9","text":"\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b5\u30a4\u30c9\uff08\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\uff09 <p>\u30d6\u30e9\u30a6\u30b6\u4e0a\u3067\u5b9f\u884c\u3055\u308c\u308b\u51e6\u7406</p> <pre><code>graph LR\n    Browser[\ud83c\udf10 \u30d6\u30e9\u30a6\u30b6&lt;br/&gt;\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b5\u30a4\u30c9] --&gt;|\u5b9f\u884c| HTML[\ud83d\udcc4 HTML&lt;br/&gt;\u69cb\u9020]\n    Browser --&gt;|\u9069\u7528| CSS[\ud83c\udfa8 CSS&lt;br/&gt;\u898b\u305f\u76ee]\n    Browser --&gt;|\u5b9f\u884c| JS[\u2699\ufe0f JavaScript&lt;br/&gt;\u52d5\u4f5c]</code></pre> <p>\u4e3b\u306a\u5f79\u5272:</p> <ul> <li>\u2705 \u30e6\u30fc\u30b6\u30fc\u306b\u753b\u9762\u3092\u8868\u793a</li> <li>\u2705 \u30e6\u30fc\u30b6\u30fc\u306e\u64cd\u4f5c\u3092\u53d7\u3051\u4ed8\u3051\u308b</li> <li>\u2705 \u52d5\u7684\u306a\u753b\u9762\u66f4\u65b0\uff08\u30dc\u30bf\u30f3\u30af\u30ea\u30c3\u30af\u3001\u30a2\u30cb\u30e1\u30fc\u30b7\u30e7\u30f3\u7b49\uff09</li> <li>\u2705 \u30b5\u30fc\u30d0\u30fc\u3078\u306e\u30ea\u30af\u30a8\u30b9\u30c8\u9001\u4fe1</li> </ul> <p>\u5b9f\u884c\u5834\u6240: \u30e6\u30fc\u30b6\u30fc\u306ePC\u30fb\u30b9\u30de\u30db\u4e0a\u306e\u30d6\u30e9\u30a6\u30b6</p> <p>\u6280\u8853\u4f8b:</p> <ul> <li>HTML, CSS, JavaScript</li> <li>React, Vue.js, Angular\uff08\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\uff09</li> </ul> \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\uff08\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\uff09 <p>\u30b5\u30fc\u30d0\u30fc\u4e0a\u3067\u5b9f\u884c\u3055\u308c\u308b\u51e6\u7406</p> <pre><code>graph LR\n    Server[\ud83d\udda5\ufe0f Web\u30b5\u30fc\u30d0\u30fc&lt;br/&gt;\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9] --&gt;|\u51e6\u7406| Logic[\u2699\ufe0f \u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af&lt;br/&gt;\u691c\u7d22\u30fb\u8a08\u7b97]\n    Server --&gt;|\u30a2\u30af\u30bb\u30b9| DB[(\ud83d\uddc4\ufe0f \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9&lt;br/&gt;\u30c7\u30fc\u30bf\u4fdd\u5b58)]\n    Server --&gt;|\u751f\u6210| Response[\ud83d\udce6 \u30ec\u30b9\u30dd\u30f3\u30b9&lt;br/&gt;HTML/JSON]</code></pre> <p>\u4e3b\u306a\u5f79\u5272:</p> <ul> <li>\u2705 \u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u5b9f\u884c\uff08\u691c\u7d22\u3001\u8a08\u7b97\u3001\u5224\u5b9a\u7b49\uff09</li> <li>\u2705 \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u30a2\u30af\u30bb\u30b9</li> <li>\u2705 \u8a8d\u8a3c\u30fb\u8a8d\u53ef\u51e6\u7406</li> <li>\u2705 HTML\u3084\u30c7\u30fc\u30bf\uff08JSON\uff09\u3092\u751f\u6210\u3057\u3066\u30d6\u30e9\u30a6\u30b6\u306b\u8fd4\u3059</li> </ul> <p>\u5b9f\u884c\u5834\u6240: \u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u4e0a\u306e\u30b5\u30fc\u30d0\u30fc</p> <p>\u6280\u8853\u4f8b:</p> <ul> <li>Node.js, Python, Java, Ruby, PHP\u7b49</li> <li>\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af: Express, Django, Spring Boot, Rails\u7b49</li> </ul>"},{"location":"web-basics/#web_2","title":"Web\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306e\u9032\u5316","text":"\u6642\u4ee3\u80cc\u666f\u3068\u6280\u8853\u306e\u5909\u9077 <p>Web\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u306f\u3001\u6280\u8853\u7684\u306a\u8ab2\u984c\u3068\u6642\u4ee3\u306e\u30cb\u30fc\u30ba\u306b\u5fdc\u3058\u3066\u9032\u5316\u3057\u3066\u304d\u307e\u3057\u305f\u3002</p> \u7b2c1\u4e16\u4ee3: \u30e2\u30ce\u30ea\u30b7\u30c3\u30af\u5168\u76db\u671f\uff082000\u5e74\u4ee3\u524d\u534a\u301c\uff09 <p>\u6642\u4ee3\u80cc\u666f:</p> <ul> <li>\ud83d\udcbb Web 2.0\u306e\u5230\u6765\uff08\u30d6\u30ed\u30b0\u3001SNS\u306e\u666e\u53ca\uff09</li> <li>\ud83d\ude80 \u30b9\u30bf\u30fc\u30c8\u30a2\u30c3\u30d7\u30d6\u30fc\u30e0\uff08\u7d20\u65e9\u304f\u30b5\u30fc\u30d3\u30b9\u3092\u7acb\u3061\u4e0a\u3052\u308b\u5fc5\u8981\uff09</li> <li>\ud83d\udc68\u200d\ud83d\udcbb \u5c0f\u898f\u6a21\u30c1\u30fc\u30e0\u3067\u306e\u958b\u767a\u304c\u4e3b\u6d41</li> </ul> <p>\u4e3b\u6d41\u306e\u69cb\u6210:</p> <pre><code>\u30d6\u30e9\u30a6\u30b6 \u2190\u2192 \u30e2\u30ce\u30ea\u30b7\u30c3\u30af\u30b5\u30fc\u30d0\u30fc\uff08Rails/Django/PHP\uff09 \u2190\u2192 DB\n</code></pre> <p>\u63a1\u7528\u3055\u308c\u305f\u7406\u7531:</p> <ul> <li>\u2705 \u958b\u767a\u901f\u5ea6\u304c\u901f\u3044: 1\u3064\u306e\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3067\u5168\u3066\u5b8c\u7d50</li> <li>\u2705 \u5b66\u7fd2\u30b3\u30b9\u30c8\u304c\u4f4e\u3044: \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u8a00\u8a9e\u306e\u307f\u3067\u958b\u767a\u53ef\u80fd</li> <li>\u2705 \u30c7\u30d7\u30ed\u30a4\u304c\u7c21\u5358: 1\u3064\u306e\u30a2\u30d7\u30ea\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u3060\u3051</li> <li>\u2705 SEO\u5bfe\u7b56\u304c\u5bb9\u6613: \u30b5\u30fc\u30d0\u30fc\u304c\u5b8c\u6210\u3057\u305fHTML\u3092\u8fd4\u3059</li> </ul> <p>\u4ee3\u8868\u7684\u306a\u6280\u8853:</p> <ul> <li>Ruby on Rails (2004\u5e74) - Twitter, GitHub, Airbnb\u521d\u671f</li> <li>Django (2005\u5e74) - Instagram, Pinterest\u521d\u671f</li> <li>Laravel (2011\u5e74)</li> </ul> <p>\u5f53\u6642\u306e\u8ab2\u984c:</p> <ul> <li>\u274c JavaScript\u306f\u3042\u304f\u307e\u3067\u300c\u88dc\u52a9\u7684\u306a\u6a5f\u80fd\u300d</li> <li>\u274c \u30ea\u30c3\u30c1\u306aUI\u306f\u96e3\u3057\u3044\uff08jQuery\u5168\u76db\u671f\uff09</li> <li>\u274c \u30da\u30fc\u30b8\u9077\u79fb\u6642\u306b\u5168\u4f53\u30ea\u30ed\u30fc\u30c9\uff08UX\u4f4e\u4e0b\uff09</li> </ul> \u7b2c2\u4e16\u4ee3: SPA\u9769\u547d\uff082010\u5e74\u4ee3\u524d\u534a\u301c\uff09 <p>\u6642\u4ee3\u80cc\u666f:</p> <ul> <li>\ud83d\udcf1 \u30b9\u30de\u30fc\u30c8\u30d5\u30a9\u30f3\u306e\u666e\u53ca\uff08iPhone 2007\u5e74\u3001Android 2008\u5e74\uff09</li> <li>\u26a1 \u30e6\u30fc\u30b6\u30fc\u304c\u300c\u30a2\u30d7\u30ea\u306e\u3088\u3046\u306a\u4f53\u9a13\u300d\u3092\u671f\u5f85</li> <li>\ud83c\udf10 JavaScript\u30a8\u30f3\u30b8\u30f3\u306e\u9ad8\u901f\u5316\uff08Chrome V8\u767b\u5834 2008\u5e74\uff09</li> <li>\ud83d\udce6 npm\u767b\u5834\uff082010\u5e74\uff09\u3067JavaScript\u30a8\u30b3\u30b7\u30b9\u30c6\u30e0\u62e1\u5927</li> </ul> <p>\u4e3b\u6d41\u306e\u69cb\u6210:</p> <pre><code>\u30d6\u30e9\u30a6\u30b6\uff08SPA: React/Angular\uff09 \u2190\u2192 RESTful API \u2190\u2192 DB\n          \u2191\n     \u9759\u7684\u30d5\u30a1\u30a4\u30eb\u306fCDN\n</code></pre> <p>SPA\u304c\u9078\u3070\u308c\u305f\u7406\u7531:</p> <ul> <li>\u2705 \u30cd\u30a4\u30c6\u30a3\u30d6\u30a2\u30d7\u30ea\u306e\u3088\u3046\u306aUX: \u30da\u30fc\u30b8\u9077\u79fb\u304c\u9ad8\u901f\u30fb\u6ed1\u3089\u304b</li> <li>\u2705 \u30d5\u30ed\u30f3\u30c8\u30fb\u30d0\u30c3\u30af\u5206\u96e2: \u4e26\u884c\u958b\u767a\u53ef\u80fd</li> <li>\u2705 \u30e2\u30d0\u30a4\u30eb\u30a2\u30d7\u30ea\u3068API\u5171\u6709: iOS\u30a2\u30d7\u30ea\u3082Android\u30a2\u30d7\u30ea\u3082\u540c\u3058API\u3092\u4f7f\u7528</li> <li>\u2705 CDN\u3067\u9ad8\u901f\u914d\u4fe1: \u9759\u7684\u30d5\u30a1\u30a4\u30eb\u306f\u4e16\u754c\u4e2d\u306eCDN\u304b\u3089\u914d\u4fe1</li> <li>\u2705 \u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u5c02\u9580\u30a8\u30f3\u30b8\u30cb\u30a2: \u5f79\u5272\u5206\u62c5\u304c\u660e\u78ba\u5316</li> </ul> <p>\u4ee3\u8868\u7684\u306a\u6280\u8853:</p> <ul> <li>Backbone.js (2010\u5e74) - \u521d\u671f\u306eSPA\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af</li> <li>AngularJS (2010\u5e74) - Google\u88fd\u3001\u30a8\u30f3\u30bf\u30fc\u30d7\u30e9\u30a4\u30ba\u3067\u4eba\u6c17</li> <li>React (2013\u5e74) - Facebook\u88fd\u3001\u73fe\u5728\u306e\u6a19\u6e96</li> <li>Vue.js (2014\u5e74) - \u5b66\u7fd2\u304c\u5bb9\u6613\u3001\u65e5\u672c\u3067\u4eba\u6c17</li> </ul> <p>\u5b9f\u4f8b:</p> <ul> <li>Gmail (2004\u5e74) - AJAX\u6280\u8853\u3067SPA\u7684\u306a\u4f53\u9a13\u3092\u5148\u99c6\u7684\u306b\u5b9f\u73fe</li> <li>Facebook (2013\u5e74\u301c) - React\u5c0e\u5165\u3067SPA\u5316</li> <li>Netflix (2015\u5e74) - React\u63a1\u7528</li> </ul> <p>\u65b0\u305f\u306a\u8ab2\u984c:</p> <ul> <li>\u274c \u521d\u56de\u8868\u793a\u304c\u9045\u3044: JavaScript\u306e\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30fb\u5b9f\u884c\u5f85\u3061</li> <li>\u274c SEO\u5bfe\u7b56\u304c\u56f0\u96e3: \u691c\u7d22\u30a8\u30f3\u30b8\u30f3\u304cJavaScript\u3092\u5b9f\u884c\u3067\u304d\u306a\u3044\uff08\u5f53\u6642\uff09</li> <li>\u274c \u72b6\u614b\u7ba1\u7406\u306e\u8907\u96d1\u5316: Redux\u7b49\u306e\u5b66\u7fd2\u30b3\u30b9\u30c8</li> <li>\u274c \u958b\u767a\u306e\u8907\u96d1\u5316: \u30d3\u30eb\u30c9\u30c4\u30fc\u30eb\u3001\u30c8\u30e9\u30f3\u30b9\u30d1\u30a4\u30e9\u7b49\u304c\u5fc5\u8981</li> </ul> \u7b2c3\u4e16\u4ee3: \u30cf\u30a4\u30d6\u30ea\u30c3\u30c9\u6642\u4ee3\uff082016\u5e74\u301c\u73fe\u5728\uff09 <p>\u6642\u4ee3\u80cc\u666f:</p> <ul> <li>\ud83d\udd0d SEO\u306e\u91cd\u8981\u6027\u518d\u8a8d\u8b58: Google\u304c\u30d3\u30b8\u30cd\u30b9\u306e\u751f\u547d\u7dda</li> <li>\u26a1 Core Web Vitals: Google\u304c\u30da\u30fc\u30b8\u901f\u5ea6\u3092\u691c\u7d22\u9806\u4f4d\u306b\u5f71\u97ff</li> <li>\ud83c\udf0d \u30b0\u30ed\u30fc\u30d0\u30eb\u5c55\u958b: \u4f4e\u901f\u56de\u7dda\u5730\u57df\u3078\u306e\u5bfe\u5fdc</li> <li>\ud83c\udfe2 \u5927\u898f\u6a21\u5316: \u30e2\u30ce\u30ea\u30b7\u30c3\u30af\u3067\u306f\u9650\u754c\u3001\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u5316</li> </ul> <p>\u4e3b\u6d41\u306e\u69cb\u6210\uff08BFF\u30d1\u30bf\u30fc\u30f3\uff09:</p> <pre><code>\u30d6\u30e9\u30a6\u30b6 \u2190\u2192 Next.js/Nuxt.js\uff08BFF\uff09 \u2190\u2192 \u30d0\u30c3\u30af\u30a8\u30f3\u30c9API\uff08\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\uff09 \u2190\u2192 DB\n          \u521d\u56deSSR + \u4ee5\u964dSPA               Spring Boot/FastAPI\u7b49\n</code></pre> <p>Next.js/Nuxt.js\u304c\u9078\u3070\u308c\u305f\u7406\u7531:</p> <ul> <li>\u2705 \u521d\u56deSSR + \u4ee5\u964dSPA: SPA\u306e\u826f\u3055\u3092\u4fdd\u3061\u3064\u3064SEO\u5bfe\u7b56</li> <li>\u2705 \u30d5\u30ed\u30f3\u30c8\u30fb\u30d0\u30c3\u30af\u5206\u96e2\u7dad\u6301: BFF\u3067API\u4e2d\u7d99</li> <li>\u2705 \u958b\u767a\u8005\u4f53\u9a13\uff08DX\uff09\u5411\u4e0a: \u30d5\u30a1\u30a4\u30eb\u30d9\u30fc\u30b9\u30eb\u30fc\u30c6\u30a3\u30f3\u30b0\u3001\u81ea\u52d5\u6700\u9069\u5316</li> <li>\u2705 \u6bb5\u968e\u7684\u306a\u79fb\u884c\u304c\u53ef\u80fd: \u30da\u30fc\u30b8\u5358\u4f4d\u3067SSR/CSR/SSG\u3092\u9078\u629e</li> <li>\u2705 \u30a8\u30c3\u30b8\u30b3\u30f3\u30d4\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0: Vercel/Netlify\u3067\u4e16\u754c\u4e2d\u306b\u914d\u4fe1</li> </ul> <p>\u4ee3\u8868\u7684\u306a\u6280\u8853:</p> <ul> <li>Next.js (2016\u5e74) - React\u88fd\u3001Vercel\u793e</li> <li>Nuxt.js (2016\u5e74) - Vue\u88fd</li> <li>Remix (2020\u5e74) - React\u88fd\u3001Web\u6a19\u6e96\u91cd\u8996</li> <li>SvelteKit (2020\u5e74) - Svelte\u88fd</li> </ul> <p>\u5b9f\u4f8b:</p> <ul> <li>TikTok - Next.js\u63a1\u7528</li> <li>Notion - Next.js\u63a1\u7528</li> <li>Hulu - Next.js\u63a1\u7528</li> <li>\u697d\u5929\u5e02\u5834 - Nuxt.js\u63a1\u7528</li> </ul> <p>\u73fe\u5728\u306e\u30c8\u30ec\u30f3\u30c9\uff082024\u5e74\u301c\uff09:</p> <ul> <li>\ud83d\udd25 React Server Components: Next.js App Router</li> <li>\u26a1 Streaming SSR: HTML\u3092\u6bb5\u968e\u7684\u306b\u9001\u4fe1</li> <li>\ud83c\udfaf Islands Architecture: Astro\u7b49\u3001\u5fc5\u8981\u306a\u90e8\u5206\u3060\u3051JS</li> <li>\ud83d\ude80 \u30a8\u30c3\u30b8\u30d5\u30a1\u30fc\u30b9\u30c8: Cloudflare Workers, Deno Deploy</li> </ul> \u306a\u305c\u4eca\u3082\u8907\u6570\u306e\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u304c\u5171\u5b58\u3059\u308b\u306e\u304b <p>\u7b54\u3048: \u30d7\u30ed\u30b8\u30a7\u30af\u30c8\u306e\u6027\u8cea\u306b\u3088\u3063\u3066\u6700\u9069\u89e3\u304c\u7570\u306a\u308b</p>"},{"location":"web-basics/#_3","title":"\u30e2\u30ce\u30ea\u30b7\u30c3\u30af\u304c\u4eca\u3082\u9078\u3070\u308c\u308b\u7406\u7531:","text":"<ul> <li>\u2705 \u30b9\u30bf\u30fc\u30c8\u30a2\u30c3\u30d7\u521d\u671f\uff08MVP\u958b\u767a\uff09</li> <li>\u2705 \u793e\u5185\u30b7\u30b9\u30c6\u30e0\uff08SEO\u4e0d\u8981\u3001\u958b\u767a\u901f\u5ea6\u91cd\u8996\uff09</li> <li>\u2705 \u5c0f\u898f\u6a21\u30c1\u30fc\u30e0\uff08\u30d5\u30ed\u30f3\u30c8\u5c02\u9580\u5bb6\u304c\u3044\u306a\u3044\uff09</li> <li>\u2705 \u65e2\u5b58\u30b7\u30b9\u30c6\u30e0\u306e\u4fdd\u5b88</li> </ul> <p>\u4e8b\u4f8b: Basecamp\uff08Ruby on Rails\uff09\u3001GitHub\uff08Ruby on Rails\uff09</p>"},{"location":"web-basics/#spa-api","title":"SPA + API\u304c\u9078\u3070\u308c\u308b\u7406\u7531:","text":"<ul> <li>\u2705 \u30ea\u30c3\u30c1\u306aUI/UX\u91cd\u8996\uff08\u7ba1\u7406\u753b\u9762\u3001\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\uff09</li> <li>\u2705 \u30e2\u30d0\u30a4\u30eb\u30a2\u30d7\u30ea\u3082\u540c\u6642\u958b\u767a</li> <li>\u2705 \u30d5\u30ed\u30f3\u30c8\u30fb\u30d0\u30c3\u30af\u3092\u5225\u30c1\u30fc\u30e0\u3067\u958b\u767a</li> <li>\u2705 SEO\u304c\u4e0d\u8981\uff08\u30ed\u30b0\u30a4\u30f3\u5f8c\u306e\u753b\u9762\uff09</li> </ul> <p>\u4e8b\u4f8b: Figma, Slack, Trello</p>"},{"location":"web-basics/#nextjsbff","title":"Next.js\uff08BFF\uff09\u304c\u9078\u3070\u308c\u308b\u7406\u7531:","text":"<ul> <li>\u2705 EC\u30b5\u30a4\u30c8\uff08SEO + \u30ea\u30c3\u30c1UI\uff09</li> <li>\u2705 \u30e1\u30c7\u30a3\u30a2\u30b5\u30a4\u30c8\uff08SEO + \u9ad8\u901f\u8868\u793a\uff09</li> <li>\u2705 \u30b0\u30ed\u30fc\u30d0\u30eb\u5c55\u958b\uff08\u30a8\u30c3\u30b8\u914d\u4fe1\uff09</li> <li>\u2705 \u5927\u898f\u6a21\u30a2\u30d7\u30ea\uff08\u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u5316\uff09</li> </ul> <p>\u4e8b\u4f8b: Nike.com, Twitch, Netflix\uff08\u4e00\u90e8\uff09</p>"},{"location":"web-basics/#_4","title":"\u9078\u629e\u306e\u5224\u65ad\u57fa\u6e96:","text":"\u8981\u4ef6 \u304a\u3059\u3059\u3081\u69cb\u6210 \u958b\u767a\u901f\u5ea6\u6700\u512a\u5148 \u30e2\u30ce\u30ea\u30b7\u30c3\u30af\uff08Rails/Django\uff09 SEO\u6700\u91cd\u8981 \u30e2\u30ce\u30ea\u30b7\u30c3\u30af or Next.js\uff08SSR\uff09 \u30ea\u30c3\u30c1\u306aUI SPA + API or Next.js \u30e2\u30d0\u30a4\u30eb\u30a2\u30d7\u30ea\u9023\u643a SPA + API or Next.js\uff08BFF\uff09 \u30b0\u30ed\u30fc\u30d0\u30eb\u5c55\u958b Next.js\uff08\u30a8\u30c3\u30b8\u914d\u4fe1\uff09 \u5927\u898f\u6a21\u30fb\u8907\u96d1 Next.js + \u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9"},{"location":"web-basics/#html","title":"\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u65b9\u5f0f\uff08HTML\u751f\u6210\u306e\u30bf\u30a4\u30df\u30f3\u30b0\uff09","text":"<p>Web\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3067\u306f\u3001HTML\u3092\u3069\u3053\u3067\u30fb\u3044\u3064\u751f\u6210\u3059\u308b\u304b\u306b\u3088\u3063\u3066\u3001\u3044\u304f\u3064\u304b\u306e\u65b9\u5f0f\u304c\u3042\u308a\u307e\u3059\u3002</p> SSR\uff08Server-Side Rendering\uff09 CSR\uff08Client-Side Rendering\uff09 \u305d\u306e\u4ed6\u306e\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u65b9\u5f0f\uff08SSG / ISR\uff09 <p>SSG\uff08Static Site Generation\uff09: \u30d3\u30eb\u30c9\u6642\u306b\u751f\u6210</p> <ul> <li>\u30d3\u30eb\u30c9\u6642\u306b\u5168\u30da\u30fc\u30b8\u306eHTML\u3092\u4e8b\u524d\u751f\u6210</li> <li>\u5909\u66f4\u304c\u306a\u3044\u9650\u308a\u540c\u3058HTML\u3092\u914d\u4fe1</li> <li>\u7528\u9014: \u30d6\u30ed\u30b0\u3001\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3001\u30e9\u30f3\u30c7\u30a3\u30f3\u30b0\u30da\u30fc\u30b8</li> <li>\u6280\u8853\u4f8b: Next.js (<code>getStaticProps</code>), Gatsby, Hugo</li> </ul> <p>ISR\uff08Incremental Static Regeneration\uff09: \u6bb5\u968e\u7684\u518d\u751f\u6210</p> <ul> <li>SSG\u3068SSR\u306e\u4e2d\u9593</li> <li>\u4e00\u5b9a\u671f\u9593\u30ad\u30e3\u30c3\u30b7\u30e5\u3057\u3001\u671f\u9650\u5207\u308c\u6642\u306b\u518d\u751f\u6210</li> <li>\u7528\u9014: \u983b\u7e41\u306b\u66f4\u65b0\u3055\u308c\u308b\u30b3\u30f3\u30c6\u30f3\u30c4\uff08EC\u30b5\u30a4\u30c8\u7b49\uff09</li> <li>\u6280\u8853\u4f8b: Next.js (<code>revalidate</code>), Nuxt.js (Hybrid Rendering)</li> </ul>"},{"location":"web-basics/#html_1","title":"\u30b5\u30fc\u30d0\u30fc\u3067HTML\u3092\u751f\u6210","text":"<p>\u30b5\u30fc\u30d0\u30fc\u304c\u30ea\u30af\u30a8\u30b9\u30c8\u3054\u3068\u306bHTML\u3092\u751f\u6210\u3057\u3066\u30d6\u30e9\u30a6\u30b6\u306b\u8fd4\u3059</p> <pre><code>sequenceDiagram\n    participant Browser as \ud83c\udf10 \u30d6\u30e9\u30a6\u30b6\n    participant Server as \ud83d\udda5\ufe0f Web\u30b5\u30fc\u30d0\u30fc\n    participant DB as \ud83d\uddc4\ufe0f \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\n    Browser-&gt;&gt;Server: 1. \u30da\u30fc\u30b8\u30ea\u30af\u30a8\u30b9\u30c8\n    Server-&gt;&gt;DB: 2. \u30c7\u30fc\u30bf\u53d6\u5f97\n    DB-&gt;&gt;Server: 3. \u30c7\u30fc\u30bf\u8fd4\u5374\n    Server-&gt;&gt;Server: 4. HTML\u3092\u751f\u6210\n    Server-&gt;&gt;Browser: 5. \u5b8c\u6210\u3057\u305fHTML\u8fd4\u5374\n    Browser-&gt;&gt;Browser: 6. \u753b\u9762\u8868\u793a</code></pre> <p>\u7279\u5fb4:</p> <ul> <li>\ud83c\udfd7\ufe0f \u30b5\u30fc\u30d0\u30fc\u304cHTML\u3092\u751f\u6210</li> <li>\u26a1 \u521d\u56de\u8868\u793a\u304c\u901f\u3044\uff08HTML\u304c\u65e2\u306b\u5b8c\u6210\u3057\u3066\u3044\u308b\uff09</li> <li>\u2705 SEO\u5bfe\u7b56\u304c\u5bb9\u6613\uff08\u691c\u7d22\u30a8\u30f3\u30b8\u30f3\u304cHTML\u3092\u8aad\u307f\u53d6\u308c\u308b\uff09</li> <li>\ud83d\udd04 \u30ea\u30af\u30a8\u30b9\u30c8\u3054\u3068\u306b\u6700\u65b0\u30c7\u30fc\u30bf</li> </ul> <p>\u6280\u8853\u4f8b:</p> <ul> <li>\u5f93\u6765\u578b: Ruby on Rails, Django, Laravel, Spring Boot + Thymeleaf</li> <li>\u30e2\u30c0\u30f3: Next.js (<code>getServerSideProps</code>), Nuxt.js (<code>asyncData</code>), Remix</li> </ul> <p>\u30e1\u30ea\u30c3\u30c8:</p> <ul> <li>\u2705 \u521d\u56de\u8868\u793a\u304c\u9ad8\u901f</li> <li>\u2705 SEO\u5bfe\u7b56\u304c\u5bb9\u6613</li> <li>\u2705 JavaScript\u304c\u7121\u52b9\u3067\u3082\u52d5\u4f5c</li> </ul> <p>\u30c7\u30e1\u30ea\u30c3\u30c8:</p> <ul> <li>\u274c \u30b5\u30fc\u30d0\u30fc\u8ca0\u8377\u304c\u9ad8\u3044\uff08\u6bce\u56deHTML\u751f\u6210\uff09</li> <li>\u274c \u30da\u30fc\u30b8\u9077\u79fb\u6642\u306b\u753b\u9762\u5168\u4f53\u3092\u518d\u8aad\u307f\u8fbc\u307f\uff08\u5f93\u6765\u578b\u306e\u5834\u5408\uff09</li> </ul>"},{"location":"web-basics/#html_2","title":"\u30d6\u30e9\u30a6\u30b6\u3067HTML\u3092\u751f\u6210","text":"<p>\u30d6\u30e9\u30a6\u30b6\u304cJavaScript\u3092\u4f7f\u3063\u3066HTML\u3092\u751f\u6210\u30fb\u66f4\u65b0</p> <pre><code>sequenceDiagram\n    participant Browser as \ud83c\udf10 \u30d6\u30e9\u30a6\u30b6\n    participant CDN as \ud83d\udce6 \u9759\u7684\u30b5\u30fc\u30d0\u30fc\n    participant API as \ud83d\udd0c API\u30b5\u30fc\u30d0\u30fc\n    participant DB as \ud83d\uddc4\ufe0f \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\n    Browser-&gt;&gt;CDN: 1. \u30da\u30fc\u30b8\u30ea\u30af\u30a8\u30b9\u30c8\n    CDN-&gt;&gt;Browser: 2. \u7a7a\u306eHTML + JavaScript\n    Browser-&gt;&gt;Browser: 3. JavaScript\u30a2\u30d7\u30ea\u8d77\u52d5\n    Browser-&gt;&gt;API: 4. \u30c7\u30fc\u30bf\u53d6\u5f97API\u547c\u3073\u51fa\u3057\n    API-&gt;&gt;DB: 5. \u30c7\u30fc\u30bf\u53d6\u5f97\n    DB-&gt;&gt;API: 6. \u30c7\u30fc\u30bf\u8fd4\u5374\n    API-&gt;&gt;Browser: 7. JSON\u8fd4\u5374\n    Browser-&gt;&gt;Browser: 8. JavaScript\u3067HTML\u751f\u6210\u30fb\u8868\u793a</code></pre> <p>\u7279\u5fb4:</p> <ul> <li>\u2699\ufe0f \u30d6\u30e9\u30a6\u30b6\u304cJavaScript\u3067HTML\u3092\u751f\u6210</li> <li>\ud83d\udc0c \u521d\u56de\u8868\u793a\u304c\u9045\u3044\uff08JavaScript\u8aad\u307f\u8fbc\u307f\u30fb\u5b9f\u884c\u304c\u5fc5\u8981\uff09</li> <li>\u26a1 \u30da\u30fc\u30b8\u9077\u79fb\u304c\u9ad8\u901f\uff08\u90e8\u5206\u66f4\u65b0\u306e\u307f\uff09</li> <li>\ud83d\udd04 \u52d5\u7684\u3067\u30a4\u30f3\u30bf\u30e9\u30af\u30c6\u30a3\u30d6</li> </ul> <p>\u6280\u8853\u4f8b:</p> <ul> <li>React \u5358\u4f53\uff08Create React App, Vite\uff09</li> <li>Vue.js \u5358\u4f53</li> <li>Angular</li> </ul> <p>\u30e1\u30ea\u30c3\u30c8:</p> <ul> <li>\u2705 \u30da\u30fc\u30b8\u9077\u79fb\u304c\u9ad8\u901f\uff08\u90e8\u5206\u66f4\u65b0\uff09</li> <li>\u2705 \u30ea\u30c3\u30c1\u306aUI\u30fbUX</li> <li>\u2705 \u30b5\u30fc\u30d0\u30fc\u8ca0\u8377\u304c\u4f4e\u3044\uff08\u9759\u7684\u30d5\u30a1\u30a4\u30eb\u914d\u4fe1\u306e\u307f\uff09</li> </ul> <p>\u30c7\u30e1\u30ea\u30c3\u30c8:</p> <ul> <li>\u274c \u521d\u56de\u8868\u793a\u304c\u9045\u3044</li> <li>\u274c SEO\u5bfe\u7b56\u306b\u5de5\u592b\u304c\u5fc5\u8981</li> <li>\u274c JavaScript\u304c\u5fc5\u9808</li> </ul>"},{"location":"web-basics/#_5","title":"\u30b5\u30fc\u30d0\u30fc\u69cb\u6210\uff08\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3\u30d1\u30bf\u30fc\u30f3\uff09","text":"<p>Web\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30b5\u30fc\u30d0\u30fc\u69cb\u6210\u306b\u306f\u3001\u4e3b\u306b3\u3064\u306e\u30d1\u30bf\u30fc\u30f3\u304c\u3042\u308a\u307e\u3059\u3002</p> \u30d1\u30bf\u30fc\u30f31: \u30e2\u30ce\u30ea\u30b7\u30c3\u30af\u69cb\u6210 \u30d1\u30bf\u30fc\u30f32: \u30d5\u30ed\u30f3\u30c8\u30fb\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u5206\u96e2\u69cb\u6210 <p>\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\uff08\u9759\u7684\u914d\u4fe1\uff09\u3068\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\uff08API\uff09\u3092\u5b8c\u5168\u5206\u96e2</p> <pre><code>sequenceDiagram\n    participant Browser as \ud83c\udf10 \u30d6\u30e9\u30a6\u30b6\n    participant CDN as \ud83d\udce6 \u9759\u7684\u30d5\u30a1\u30a4\u30eb\u30b5\u30fc\u30d0\u30fc&lt;br/&gt;(CDN/S3)\n    participant API as \ud83d\udd0c API\u30b5\u30fc\u30d0\u30fc&lt;br/&gt;(\u30d0\u30c3\u30af\u30a8\u30f3\u30c9)\n    participant DB as \ud83d\uddc4\ufe0f \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\n    Note over Browser,CDN: \u521d\u56de\u30a2\u30af\u30bb\u30b9\n    Browser-&gt;&gt;CDN: 1. \u30da\u30fc\u30b8\u30ea\u30af\u30a8\u30b9\u30c8\n    CDN-&gt;&gt;Browser: 2. \u9759\u7684\u30d5\u30a1\u30a4\u30eb&lt;br/&gt;(HTML+CSS+JS)\n    Browser-&gt;&gt;Browser: 3. \u30a2\u30d7\u30ea\u8d77\u52d5\n\n    Note over Browser,DB: \u30c7\u30fc\u30bf\u53d6\u5f97\n    Browser-&gt;&gt;API: 4. API\u30ea\u30af\u30a8\u30b9\u30c8\n    API-&gt;&gt;DB: 5. \u30c7\u30fc\u30bf\u691c\u7d22\n    DB-&gt;&gt;API: 6. \u691c\u7d22\u7d50\u679c\n    API-&gt;&gt;Browser: 7. JSON\u8fd4\u5374\n    Browser-&gt;&gt;Browser: 8. \u753b\u9762\u66f4\u65b0</code></pre> <p>\u7279\u5fb4:</p> <ul> <li>\ud83d\udd00 2\u3064\u306e\u30b5\u30fc\u30d0\u30fc \u3067\u5f79\u5272\u5206\u62c5</li> <li>\ud83d\udcc4 \u9759\u7684\u30d5\u30a1\u30a4\u30eb\u30b5\u30fc\u30d0\u30fc: HTML/CSS/JavaScript\u3092\u914d\u4fe1\uff08CDN\uff09</li> <li>\ud83d\udd0c API\u30b5\u30fc\u30d0\u30fc: \u30c7\u30fc\u30bf\u51e6\u7406\u30fbDB\u64cd\u4f5c\uff08JSON\u8fd4\u5374\uff09</li> <li>\ud83c\udfa8 \u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u65b9\u5f0f\u306f\u901a\u5e38CSR\uff08SPA\u304c\u4e00\u822c\u7684\uff09</li> </ul> <p>\u547c\u3073\u65b9:</p> <ul> <li>\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\u30fb\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u5206\u96e2</li> <li>API\u99c6\u52d5\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3</li> <li>JAMstack\uff08\u9759\u7684\u30b5\u30a4\u30c8 + API\uff09</li> </ul> <p>\u6280\u8853\u4f8b:</p> <ul> <li>\u30d5\u30ed\u30f3\u30c8: React, Vue.js, Angular\uff08SPA\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\uff09</li> <li>\u30d0\u30c3\u30af: Spring Boot, FastAPI, Express.js, Django REST Framework</li> </ul> <p>\u30e1\u30ea\u30c3\u30c8:</p> <ul> <li>\u2705 \u30d5\u30ed\u30f3\u30c8\u30fb\u30d0\u30c3\u30af\u3092\u72ec\u7acb\u958b\u767a</li> <li>\u2705 \u30e2\u30d0\u30a4\u30eb\u30a2\u30d7\u30ea\u3067\u3082\u540c\u3058API\u3092\u5229\u7528</li> <li>\u2705 \u9759\u7684\u30d5\u30a1\u30a4\u30eb\u306fCDN\u914d\u4fe1\u3067\u9ad8\u901f</li> </ul> <p>\u30c7\u30e1\u30ea\u30c3\u30c8:</p> <ul> <li>\u274c \u521d\u56de\u8868\u793a\u304c\u9045\u3044\uff08CSR\u306e\u305f\u3081\uff09</li> <li>\u274c SEO\u5bfe\u7b56\u304c\u96e3\u3057\u3044</li> <li>\u274c \u69cb\u6210\u304c\u8907\u96d1\u5316</li> </ul> \u30d1\u30bf\u30fc\u30f33: BFF\uff08Backends For Frontends\uff09\u69cb\u6210 <p>BFF\uff08Backend For Frontend\uff09\u3092\u4e2d\u9593\u5c64\u3068\u3057\u3066\u914d\u7f6e</p> <p>BFF\u69cb\u6210\u306b\u306f 2\u3064\u306e\u5b9f\u88c5\u65b9\u5f0f \u304c\u3042\u308a\u307e\u3059\uff1a</p>"},{"location":"web-basics/#1","title":"\u30d5\u30ed\u30f3\u30c8\u3068\u30d0\u30c3\u30af\u304c\u540c\u3058\u30b5\u30fc\u30d0\u30fc\uff081\u30b5\u30fc\u30d0\u30fc\uff09","text":"<p>\u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9\uff08HTML\u751f\u6210\uff09\u3068\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\uff08\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u30fbDB\uff09\u304c\u7d71\u5408</p> <pre><code>sequenceDiagram\n    participant Browser as \ud83c\udf10 \u30d6\u30e9\u30a6\u30b6\n    participant Server as \ud83d\udda5\ufe0f \u7d71\u5408Web\u30b5\u30fc\u30d0\u30fc&lt;br/&gt;(\u30d5\u30ed\u30f3\u30c8+\u30d0\u30c3\u30af)\n    participant DB as \ud83d\uddc4\ufe0f \u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\n\n    Browser-&gt;&gt;Server: 1. \u30da\u30fc\u30b8\u30ea\u30af\u30a8\u30b9\u30c8\n    Server-&gt;&gt;DB: 2. \u30c7\u30fc\u30bf\u691c\u7d22\n    DB-&gt;&gt;Server: 3. \u691c\u7d22\u7d50\u679c\n    Server-&gt;&gt;Server: 4. HTML\u751f\u6210\n    Server-&gt;&gt;Browser: 5. \u5b8c\u6210\u3057\u305fHTML\u8fd4\u5374\n    Browser-&gt;&gt;Browser: 6. \u753b\u9762\u8868\u793a</code></pre> <p>\u7279\u5fb4:</p> <ul> <li>\ud83d\udce6 1\u3064\u306e\u30b5\u30fc\u30d0\u30fc \u3067\u5168\u3066\u51e6\u7406</li> <li>\ud83c\udfd7\ufe0f \u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u65b9\u5f0f\u306f\u81ea\u7531\uff08SSR, CSR, SSG\u7b49\u3092\u9078\u629e\u53ef\u80fd\uff09</li> <li>\ud83c\udfaf \u69cb\u6210\u304c\u30b7\u30f3\u30d7\u30eb</li> </ul> <p>\u547c\u3073\u65b9:</p> <ul> <li>\u30e2\u30ce\u30ea\u30b7\u30c3\u30af\u30a2\u30fc\u30ad\u30c6\u30af\u30c1\u30e3</li> <li>\u7d71\u5408\u578bWeb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3</li> <li>\u5f93\u6765\u578bWeb\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3</li> </ul> <p>\u6280\u8853\u4f8b:</p> <ul> <li>Ruby on Rails</li> <li>Django\uff08Python\uff09</li> <li>Laravel\uff08PHP\uff09</li> <li>Spring Boot + Thymeleaf\uff08Java\uff09</li> <li>ASP.NET MVC\uff08.NET\uff09</li> <li>Next.js\uff08\u5358\u4f53\u4f7f\u7528\u30fb\u5916\u90e8API\u306a\u3057\uff09</li> </ul> <p>Next.js/Nuxt.js\u306e\u5834\u5408</p> <p>Next.js\u7b49\u3082\u3001API Routes\u3067DB\u64cd\u4f5c\u307e\u3067\u884c\u3044\u3001\u5916\u90e8\u306e\u30d0\u30c3\u30af\u30a8\u30f3\u30c9API\u3092\u4f7f\u308f\u306a\u3044\u5834\u5408\u306f\u30d1\u30bf\u30fc\u30f31\u3067\u3059\u3002\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u65b9\u5f0f\uff08SSR/CSR/SSG\uff09\u306f\u30da\u30fc\u30b8\u5358\u4f4d\u3067\u9078\u629e\u3067\u304d\u307e\u3059\u3002</p> <p>\u30e1\u30ea\u30c3\u30c8:</p> <ul> <li>\u2705 \u69cb\u6210\u304c\u30b7\u30f3\u30d7\u30eb</li> <li>\u2705 \u958b\u767a\u30fb\u30c7\u30d7\u30ed\u30a4\u304c\u5bb9\u6613</li> <li>\u2705 \u5c0f\u301c\u4e2d\u898f\u6a21\u30a2\u30d7\u30ea\u306b\u6700\u9069</li> </ul> <p>\u30c7\u30e1\u30ea\u30c3\u30c8:</p> <ul> <li>\u274c \u30d5\u30ed\u30f3\u30c8\u30fb\u30d0\u30c3\u30af\u304c\u5bc6\u7d50\u5408</li> <li>\u274c \u30b9\u30b1\u30fc\u30ea\u30f3\u30b0\u304c\u56f0\u96e3\uff08\u5168\u4f53\u3092\u4e00\u7dd2\u306b\u30b9\u30b1\u30fc\u30eb\uff09</li> <li>\u274c \u30e2\u30d0\u30a4\u30eb\u30a2\u30d7\u30ea\u7b49\u3068\u306e\u9023\u643a\u304c\u56f0\u96e3</li> </ul>"},{"location":"web-basics/#3-a-ssrnextjs","title":"3-A: SSR\u30cf\u30a4\u30d6\u30ea\u30c3\u30c9\u578b\uff08Next.js\u7b49\uff09","text":"<p>Next.js/Nuxt.js\u304cBFF + SSR/SPA\u30cf\u30a4\u30d6\u30ea\u30c3\u30c9</p> <pre><code>sequenceDiagram\n    participant Browser as \ud83c\udf10 \u30d6\u30e9\u30a6\u30b6\n    participant BFF as \u26a1 Next.js&lt;br/&gt;(BFF)\n    participant API as \ud83d\udd0c \u30d0\u30c3\u30af\u30a8\u30f3\u30c9API\n    participant DB as \ud83d\uddc4\ufe0f DB\n\n    Note over Browser,BFF: \u521d\u56de\uff08SSR\uff09\n    Browser-&gt;&gt;BFF: 1. \u30ea\u30af\u30a8\u30b9\u30c8\n    BFF-&gt;&gt;API: 2. API\u547c\u3073\u51fa\u3057\n    API-&gt;&gt;DB: 3. DB\u691c\u7d22\n    DB-&gt;&gt;API: 4. \u8fd4\u5374\n    API-&gt;&gt;BFF: 5. JSON\n    BFF-&gt;&gt;Browser: 6. HTML\u8fd4\u5374\n\n    Note over Browser,DB: \u4ee5\u964d\uff08SPA\uff09\n    Browser-&gt;&gt;BFF: 7. API Route\n    BFF-&gt;&gt;API: 8. \u4e2d\u7d99\n    API-&gt;&gt;BFF: 9. JSON\n    BFF-&gt;&gt;Browser: 10. JSON</code></pre> <p>\u7279\u5fb4:</p> <ul> <li>\ud83c\udfaf \u521d\u56deSSR + \u4ee5\u964dSPA</li> <li>\ud83d\udd00 BFF\u304c\u8a8d\u8a3c\u30fbAPI\u4e2d\u7d99\u30fbSSR\u3092\u62c5\u5f53</li> <li>\ud83d\udd0c \u30d0\u30c3\u30af\u30a8\u30f3\u30c9API\u306f\u5225\u30b5\u30fc\u30d0\u30fc</li> </ul> <p>\u6280\u8853\u4f8b:</p> <ul> <li>Next.js + Spring Boot</li> <li>Nuxt.js + FastAPI</li> <li>SvelteKit + Go API</li> </ul>"},{"location":"web-basics/#3-b-spa-bff","title":"3-B: \u5b8c\u5168SPA + BFF\u578b","text":"<p>\u30d5\u30ed\u30f3\u30c8\uff08\u9759\u7684SPA\uff09 + BFF\uff08API\u4e2d\u7d99\uff09 + \u30d0\u30c3\u30af\u30a8\u30f3\u30c9API</p> <pre><code>sequenceDiagram\n    participant Browser as \ud83c\udf10 \u30d6\u30e9\u30a6\u30b6\n    participant CDN as \ud83d\udce6 CDN\n    participant BFF as \ud83d\udd00 BFF\n    participant API as \ud83d\udd0c API\n    participant DB as \ud83d\uddc4\ufe0f DB\n\n    Browser-&gt;&gt;CDN: 1. \u30ea\u30af\u30a8\u30b9\u30c8\n    CDN-&gt;&gt;Browser: 2. \u9759\u7684\u30d5\u30a1\u30a4\u30eb\n    Browser-&gt;&gt;Browser: 3. SPA\u8d77\u52d5\n    Browser-&gt;&gt;BFF: 4. API\u547c\u3073\u51fa\u3057\n    BFF-&gt;&gt;BFF: 5. \u8a8d\u8a3c\u51e6\u7406\n    BFF-&gt;&gt;API: 6. \u4e2d\u7d99\n    API-&gt;&gt;DB: 7. DB\u691c\u7d22\n    DB-&gt;&gt;API: 8. \u8fd4\u5374\n    API-&gt;&gt;BFF: 9. JSON\n    BFF-&gt;&gt;Browser: 10. JSON</code></pre> <p>\u7279\u5fb4:</p> <ul> <li>\ud83d\udcc4 \u5b8c\u5168SPA\uff08CSR\uff09</li> <li>\ud83d\udd00 BFF\u306fAPI\u30b2\u30fc\u30c8\u30a6\u30a7\u30a4</li> <li>\ud83d\udd10 \u8a8d\u8a3c\u30fbAPI\u96c6\u7d04\u3092BFF\u3067\u5b9f\u65bd</li> </ul> <p>\u6280\u8853\u4f8b:</p> <ul> <li>\u30d5\u30ed\u30f3\u30c8: React/Vue\uff08Vite\uff09</li> <li>BFF: Node.js, Go, .NET</li> <li>\u30d0\u30c3\u30af\u30a8\u30f3\u30c9: Spring Boot, FastAPI</li> </ul>"},{"location":"web-basics/#bffbackend-for-frontend","title":"BFF\uff08Backend For Frontend\uff09\u306e\u5f79\u5272:","text":"<ul> <li>\u2705 \u30d0\u30c3\u30af\u30a8\u30f3\u30c9API\u3078\u306e\u4e2d\u7d99</li> <li>\u2705 \u8a8d\u8a3c\u30fb\u30bb\u30c3\u30b7\u30e7\u30f3\u7ba1\u7406</li> <li>\u2705 \u8907\u6570API\u306e\u96c6\u7d04\u30fb\u5909\u63db</li> <li>\u2705 \u30d5\u30ed\u30f3\u30c8\u5411\u3051\u30c7\u30fc\u30bf\u6700\u9069\u5316</li> <li>\u2705 CORS\u5bfe\u7b56\u3001\u30ec\u30fc\u30c8\u5236\u9650</li> <li>\u2705 SSR\uff083-A\u306e\u307f\uff09</li> </ul>"},{"location":"web-basics/#_6","title":"\u30e1\u30ea\u30c3\u30c8:","text":"<ul> <li>\u2705 \u30d5\u30ed\u30f3\u30c8\u30fb\u30d0\u30c3\u30af\u306e\u5b8c\u5168\u5206\u96e2</li> <li>\u2705 \u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9\u5bfe\u5fdc</li> <li>\u2705 BFF\u3067\u30d5\u30ed\u30f3\u30c8\u7279\u5316\u51e6\u7406</li> <li>\u2705 \u8907\u6570API\u30921\u3064\u306b\u96c6\u7d04</li> <li>\u2705 \u521d\u56de\u8868\u793a\u304c\u901f\u3044\uff083-A\uff09</li> </ul>"},{"location":"web-basics/#_7","title":"\u30c7\u30e1\u30ea\u30c3\u30c8:","text":"<ul> <li>\u274c \u69cb\u6210\u304c\u8907\u96d1\uff083\u5c64\uff09</li> <li>\u274c BFF\u5c64\u306e\u904b\u7528\u30fb\u4fdd\u5b88\u304c\u5fc5\u8981</li> <li>\u274c \u5f79\u5272\u5206\u62c5\u306e\u8a2d\u8a08\u304c\u91cd\u8981</li> </ul>"},{"location":"web-basics/#_8","title":"\u30b5\u30fc\u30d0\u30fc\u69cb\u6210\u306e\u6bd4\u8f03\u8868","text":"\u3069\u306e\u69cb\u6210\u3092\u9078\u3076\u3079\u304d\u304b \u9805\u76ee \u30d1\u30bf\u30fc\u30f31\u30e2\u30ce\u30ea\u30b7\u30c3\u30af \u30d1\u30bf\u30fc\u30f32\u30d5\u30ed\u30f3\u30c8\u30fb\u30d0\u30c3\u30af\u5206\u96e2 \u30d1\u30bf\u30fc\u30f33BFF\u69cb\u6210 \u30b5\u30fc\u30d0\u30fc\u6570 1\u3064 2\u3064\uff08\u9759\u7684+API\uff09 3\u3064\uff08\u9759\u7684+BFF+API\uff09 \u30ec\u30f3\u30c0\u30ea\u30f3\u30b0 SSR/CSR/SSG\u81ea\u7531\u306b\u9078\u629e \u901a\u5e38CSR SSR/CSR\u9078\u629e\u53ef\u80fd \u30d5\u30ed\u30f3\u30c8\u30fb\u30d0\u30c3\u30af \u7d71\u5408 \u5b8c\u5168\u5206\u96e2 \u5b8c\u5168\u5206\u96e2 \u958b\u767a\u306e\u8907\u96d1\u3055 \u2705 \u30b7\u30f3\u30d7\u30eb \u26a0\ufe0f \u3084\u3084\u8907\u96d1 \u274c \u8907\u96d1\uff083\u5c64\uff09 \u30b9\u30b1\u30fc\u30ea\u30f3\u30b0 \u274c \u56f0\u96e3 \u2705 \u5bb9\u6613 \u2705 \u5bb9\u6613 \u30de\u30eb\u30c1\u30af\u30e9\u30a4\u30a2\u30f3\u30c8 \u274c \u56f0\u96e3 \u2705 \u5bb9\u6613 \u2705 \u5bb9\u6613 \u8a8d\u8a3c\u7ba1\u7406 \u30a2\u30d7\u30ea\u5185 \u30d5\u30ed\u30f3\u30c8 or API BFF \u9069\u7528\u4f8b \u5c0f\u301c\u4e2d\u898f\u6a21\u793e\u5185\u30b7\u30b9\u30c6\u30e0\u30d6\u30ed\u30b0 \u30e2\u30c0\u30f3Web\u30a2\u30d7\u30eaSaaS\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9 \u5927\u898f\u6a21EC\u30b5\u30a4\u30c8\u30a8\u30f3\u30bf\u30fc\u30d7\u30e9\u30a4\u30ba"},{"location":"web-basics/#_9","title":"\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0\u65b9\u5f0f\u3068\u30b5\u30fc\u30d0\u30fc\u69cb\u6210\u306e\u7d44\u307f\u5408\u308f\u305b","text":"\u5b9f\u969b\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u4f8b \u69cb\u6210 \u30ec\u30f3\u30c0\u30ea\u30f3\u30b0 \u6280\u8853\u4f8b \u7528\u9014 \u30d1\u30bf\u30fc\u30f31 SSR Rails, Django, Laravel \u793e\u5185\u30b7\u30b9\u30c6\u30e0\u3001CMS \u30d1\u30bf\u30fc\u30f31 SSR+CSR Next.js\u5358\u4f53\uff08API Routes\uff09 \u5c0f\u898f\u6a21Web\u30a2\u30d7\u30ea \u30d1\u30bf\u30fc\u30f32 CSR React + Spring Boot \u30e2\u30c0\u30f3Web\u30a2\u30d7\u30ea \u30d1\u30bf\u30fc\u30f33-A SSR+SPA Next.js + Spring Boot EC\u30b5\u30a4\u30c8\u3001\u30e1\u30c7\u30a3\u30a2 \u30d1\u30bf\u30fc\u30f33-B CSR React + BFF + Spring Boot \u7ba1\u7406\u753b\u9762\u3001\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9 <p>\u9078\u629e\u306e\u30dd\u30a4\u30f3\u30c8</p> <ul> <li>\u5c0f\u301c\u4e2d\u898f\u6a21 + \u958b\u767a\u901f\u5ea6\u91cd\u8996 \u2192 \u30d1\u30bf\u30fc\u30f31\uff08\u30e2\u30ce\u30ea\u30b7\u30c3\u30af\uff09</li> <li>\u30d5\u30ed\u30f3\u30c8\u30fb\u30d0\u30c3\u30af\u72ec\u7acb\u958b\u767a + \u30e2\u30d0\u30a4\u30eb\u30a2\u30d7\u30ea\u9023\u643a \u2192 \u30d1\u30bf\u30fc\u30f32\uff08\u5206\u96e2\uff09</li> <li>\u5927\u898f\u6a21 + SEO\u91cd\u8996 + \u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9 \u2192 \u30d1\u30bf\u30fc\u30f33\uff08BFF\uff09</li> </ul>"},{"location":"web-basics/#_10","title":"\u7528\u8a9e\u307e\u3068\u3081","text":"\u7528\u8a9e\u4e00\u89a7 \u7528\u8a9e \u8aac\u660e \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b5\u30a4\u30c9 \u30d6\u30e9\u30a6\u30b6\u4e0a\u3067\u5b9f\u884c\u3055\u308c\u308b\u51e6\u7406\uff08HTML/CSS/JavaScript\uff09 \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9 \u30b5\u30fc\u30d0\u30fc\u4e0a\u3067\u5b9f\u884c\u3055\u308c\u308b\u51e6\u7406\uff08\u30d3\u30b8\u30cd\u30b9\u30ed\u30b8\u30c3\u30af\u3001DB\u64cd\u4f5c\uff09 \u30d5\u30ed\u30f3\u30c8\u30a8\u30f3\u30c9 \u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b5\u30a4\u30c9\u3068\u540c\u7fa9\uff08\u30e6\u30fc\u30b6\u30fc\u304c\u898b\u308b\u90e8\u5206\uff09 \u30d0\u30c3\u30af\u30a8\u30f3\u30c9 \u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u3068\u540c\u7fa9\uff08\u30c7\u30fc\u30bf\u51e6\u7406\u30fb\u30ed\u30b8\u30c3\u30af\uff09 BFF Backend For Frontend\uff08\u30d5\u30ed\u30f3\u30c8\u5c02\u7528\u306e\u30d0\u30c3\u30af\u30a8\u30f3\u30c9\u5c64\uff09 SSR Server-Side Rendering\uff08\u30b5\u30fc\u30d0\u30fc\u3067HTML\u751f\u6210\uff09 CSR Client-Side Rendering\uff08\u30d6\u30e9\u30a6\u30b6\u3067HTML\u751f\u6210\uff09 SPA Single Page Application\uff081\u3064\u306eHTML\u3067\u52d5\u7684\u306b\u5207\u308a\u66ff\u3048\uff09 \u30e2\u30ce\u30ea\u30b7\u30c3\u30af \u30d5\u30ed\u30f3\u30c8\u3068\u30d0\u30c3\u30af\u304c\u7d71\u5408\u3055\u308c\u305f\u69cb\u6210 \u30de\u30a4\u30af\u30ed\u30b5\u30fc\u30d3\u30b9 \u6a5f\u80fd\u3054\u3068\u306b\u30b5\u30fc\u30d3\u30b9\u3092\u5206\u5272\u3057\u305f\u69cb\u6210 API \u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u9593\u3067\u30c7\u30fc\u30bf\u3092\u3084\u308a\u53d6\u308a\u3059\u308b\u4ed5\u7d44\u307f JSON \u30c7\u30fc\u30bf\u4ea4\u63db\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\uff08API\u306e\u8fd4\u5374\u30c7\u30fc\u30bf\u7b49\uff09 <p>\u6700\u7d42\u66f4\u65b0: 2025\u5e7410\u6708 \u5bfe\u8c61\u8aad\u8005: Web\u958b\u767a\u521d\u5fc3\u8005\u3001\u300c\u30b5\u30fc\u30d0\u30fc\u30b5\u30a4\u30c9\u300d\u300c\u30af\u30e9\u30a4\u30a2\u30f3\u30c8\u30b5\u30a4\u30c9\u300d\u306e\u9055\u3044\u3092\u7406\u89e3\u3057\u305f\u3044\u65b9</p>"}]}